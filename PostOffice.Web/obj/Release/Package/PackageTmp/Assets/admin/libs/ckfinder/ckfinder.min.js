(function(){function s(t){return n.instances[t]}function l(t){var i=this,r,u;i.id=t.name;r=t.element.getDocument().getWindow().$;u=n.oC.getWindow().$;i.inPopup=!!(r&&r.opener);i.inIframe=!i.inPopup&&r!=u.top&&r.frameElement.nodeName.toLowerCase()=="iframe";i.inFrame=!i.inPopup&&r!=u.top&&r.frameElement.nodeName.toLowerCase()=="frame";i.inUrlPopup=!!(i.inPopup&&u.opener)}function p(n,t,i){t.on("appReady",function(r){r.removeListener();n.document=t.document.$;n.folders=t.folders;n.files=t.ld["filesview.filesview"].data().files;n.basketFiles=t.basketFiles;n.resourceTypes=t.resourceTypes;n.connector=t.connector;n.lang=t.lang;n.langCode=t.langCode;n.config=t.config;t.ld["foldertree.foldertree"].on("afterAddFolder",function(t){t.removeListener();i&&i(n)},n)},n,null,999)}var n=function(){var n={jY:"G3EK",_:{},status:"unloaded",basePath:function(){var n=window.CKFINDER_BASEPATH||"",i,t,r;if(!n)for(i=document.getElementsByTagName("script"),t=0;t<i.length;t++)if(r=i[t].src.match(/(^|.*[\\\/])CKFINDER(?:_basic)?(?:_v2)?(?:_source)?.js(?:\?.*)?$/i),r){n=r[1];break}return n.indexOf("://")==-1&&(n=n.indexOf("/")===0?location.href.match(/^.*?:\/\/[^\/]*/)[0]+n:location.href.match(/^[^\?]*\/(?:)/)[0]+n),n}(),getUrl:function(n){return n.indexOf("://")==-1&&n.indexOf("/")!==0&&(n=this.basePath+n),this.jY&&n.charAt(n.length-1)!="/"&&(n+=(n.indexOf("?")>=0?"&":"?")+"t="+this.jY),n}},t=window.CKFINDER_GETURL,i;return t&&(i=n.getUrl,n.getUrl=function(r){return t.call(n,r)||i.call(n,r)}),n}(),y={callback:1,selectThumbnailActionFunction:1,selectActionFunction:1},a,v,i,f,u,t,c,e,h,o,r;n.jd=function(){var n=this,i={};for(var t in n)n.hasOwnProperty(t)&&(typeof n[t]!="function"||y[t])&&typeof n[t]!="undefined"&&(i[t]=n[t]);return n.callback&&(i.callback=n.callback),i};n.lj=function(n){var i=this,t,r;return n=n||i.basePath,t="",n&&n.length!==0||(n=CKFinder.DEFAULT_basePath),n.substr(n.length-1,1)!="/"&&(n+="/"),n+="ckfinder.html",i.hh&&(r=i.hh,typeof r=="function"&&(r=r.toString().match(/function ([^(]+)/)[1]),t+="?action=js&amp;func="+r),i.jx&&(t+=t?"&amp;":"?",t+="data="+encodeURIComponent(i.jx)),i.disableThumbnailSelection?(t+=t?"&amp;":"?",t+="dts=1"):(i.lH||i.hh)&&(r=i.lH||i.hh,typeof r=="function"&&(r=r.toString().match(/function ([^(]+)/)[1]),t+=t?"&amp;":"?",t+="thumbFunc="+r,i.nm?t+="&amp;tdata="+encodeURIComponent(i.nm):!i.lH&&i.jx&&(t+="&amp;tdata="+encodeURIComponent(i.jx))),i.startupPath&&(t+=t?"&amp;":"?",t+="start="+encodeURIComponent(i.startupPath+(i.startupFolderExpanded?":1":":0"))),i.rememberLastFolder===undefined||i.rememberLastFolder||(t+=t?"&amp;":"?",t+="rlf=0"),i.id&&(t+=t?"&amp;":"?",t+="id="+encodeURIComponent(i.id)),i.skin&&(t+=t?"&amp;":"?",t+="skin="+encodeURIComponent(i.skin)),n+t};l.prototype={_:{},addFileContextMenuOption:function(t,i,r){var f=s(this.id),u="FileContextMenu_"+t.command;f.bD(u,{exec:function(n){var t=n.ld["filesview.filesview"].tools.dH();i(n.cg,t)}});t.command=u;t.group||(t.group="file1");f.gp(u,t);f.ld["filesview.filesview"].on("beforeContextMenu",function(t){if(r){var i=r(this.tools.dH());i&&(t.data.bj[u]=i==-1?n.aY:n.aS)}else t.data.bj[u]=n.aS})},disableFileContextMenuOption:function(n,t){var i=s(this.id),u=t?"FileContextMenu_"+n:n,r=function(n){delete n.data.bj[u]};i.ld["filesview.filesview"].on("beforeContextMenu",r);return function(){i.ld["filesview.filesview"].removeListener("beforeContextMenu",r)}},addFolderContextMenuOption:function(t,i,r){var f=s(this.id),u="FolderContextMenu_"+t.command;f.bD(u,{exec:function(n){i(n.cg,n.aV)}});t.command=u;t.group||(t.group="folder1");f.gp(u,t);f.ld["foldertree.foldertree"].on("beforeContextMenu",function(t){if(r){var i=r(this.app.aV);i&&(t.data.bj[u]=i==-1?n.aY:n.aS)}else t.data.bj[u]=n.aS})},disableFolderContextMenuOption:function(n,t){var i=s(this.id),u=t?"FolderContextMenu_"+n:n,r=function(n){delete n.data.bj[u]};i.ld["foldertree.foldertree"].on("beforeContextMenu",r);return function(){i.ld["foldertree.foldertree"].removeListener("beforeContextMenu",r)}},addFolderDropMenuOption:function(t,i,r){var u=s(this.id),f="FolderDropMenu_"+t.command,e;u.bD(f,{exec:function(n){i(n.cg,n.cK.oa())}});t.command=f;e=new n.iD(u,f,t);u.ld["foldertree.foldertree"].on("beforeDropMenu",function(n){(r?r.call(u.cg,n.data.folder):1)&&(n.data.iG[f]=e)})},disableFolderDropMenuOption:function(n,t){var i=s(this.id),u=t?"FolderDropMenu_"+n:n,r=function(n){delete n.data.iG[u]};i.ld["foldertree.foldertree"].on("beforeDropMenu",r);return function(){i.ld["foldertree.foldertree"].removeListener("beforeDropMenu",r)}},getSelectedFile:function(){return s(this.id).ld["filesview.filesview"].tools.dH()},getSelectedFiles:function(){return s(this.id).ld["filesview.filesview"].tools.oO(!0)},getSelectedFolder:function(){return s(this.id).aV},filterFiles:function(n){s(this.id).ld["filesview.filesview"].oW("requestRenderFiles",{lookup:n})},setUiColor:function(n){return s(this.id).setUiColor(n)},destroy:function(n){s(this.id).destroy();n&&n()},openDialog:function(t,i){var r=this,u=new n.dom.document(window.document).getHead(),f=s(r.id).document.getWindow();return(r.inFrame||r.inPopup||r.inIframe)&&(n.document=s(r.id).document),s(r.id).openDialog(t,i,u)},openMsgDialog:function(n,t){s(this.id).msgDialog(n,t)},openConfirmDialog:function(n,t,i){s(this.id).fe(n,t,i)},openInputDialog:function(n,t,i,r){s(this.id).hs(n,t,i,r)},openSkippedFilesDialog:function(n,t,i,r){s(this.id).skippedFilesDialog(n,t,i,r)},addTool:function(n){return s(this.id).plugins.tools.addTool(n)},addToolPanel:function(n){return s(this.id).plugins.tools.addToolPanel(n)},removeTool:function(n){s(this.id).plugins.tools.removeTool(n)},showTool:function(n){s(this.id).plugins.tools.showTool(n)},hideTool:function(n){s(this.id).plugins.tools.hideTool(n)},getResourceType:function(n){return s(this.id).getResourceType(n)},log:function(){n.log.apply(n.log,arguments)},getLog:function(){return n.mZ()},emptyBasket:function(){s(this.id).execCommand("TruncateBasket")},replaceUploadForm:function(t,i,r,u){var f=s(this.id);if(u||(u=10),!(u>=(f.dC||20))){f.dC=u;f.ld["formpanel.formpanel"].on("beforeUploadFileForm",function(e){if(e.data.step==2&&!(u>f.dC)){e.cancel(!0);var o=this.data(),h=e.data.folder;try{o.dc=="upload"?this.oW("requestUnloadForm",function(){this.app.cS("upload").bR(n.aS)}):(this.data().dc&&this.oW("requestUnloadForm"),r||this.eh.removeClass("show_border"),this.oW("requestLoadForm",{html:t,command:"upload"}),i&&i())}catch(s){this.oW("failedUploadFileForm",e.data);this.oW("afterUploadFileForm",e.data);throw n.ba(s);}}});return{hide:function(){f.oW("requestUnloadForm",function(){f.cS("upload").bR(n.aS)})}}}},resizeFormPanel:function(n){var t=s(this.id),i;typeof n=="undefined"?(t.document.getById("panel_view").setStyle("height",""),t.document.getById("panel_widget").setStyle("height","")):(i=Math.min(n,Math.max(90,t.document.getById("main_container").$.offsetHeight-300)),t.document.getById("panel_view").setStyle("height",i+"px"),t.document.getById("panel_widget").setStyle("height",i-3+"px"));t.layout.ea(!0)},refreshOpenedFolder:function(){var n=s(this.id),t=n.ld["filesview.filesview"].tools.currentFolder();n.oW("requestSelectFolder",{folder:t})},selectFile:function(n){var t=s(this.id);t.oW("requestSelectFile",{file:n,scrollTo:1})},closePopup:function(){this.inPopup&&s(this.id).element.getDocument().getWindow().$.close()},openFolder:function(n,t){var r=s(this.id),u,i;for(t=t.replace(/\/$/,""),n=n.toLowerCase(),u=0;u<r.folders.length;u++)if(i=r.folders[u],i.getPath().replace(/\/$/,"")==t&&n==i.type.toLowerCase()){r.oW("requestSelectFolder",{folder:i});r.oW("requestShowFolderFiles",{folder:i});return}},setUiColor:function(n){s(this.id).setUiColor(n)},execCommand:function(n){s(this.id).execCommand(n)}},function(){function i(t,i){var f,u,r,e,s,o;if(t.toolbarButtons)for(f=0;f<t.toolbarButtons.length;f++)(u=t.toolbarButtons[f],i.bY._.items[u[0]])||(r=n.tools.deepCopy(u[1]),e=r.command,r.command||(s=u[1].onClick,e="ToolbarButton_"+u[0],i.bD(e,{exec:function(n){s(n.cg)}}),r.command=e),o=n.tools.capitalize(t.name),typeof r.label=="function"?r.label=r.label.call(t,i.cg):i.lang[t.name]&&i.lang[t.name][r.label]?r.label=i.lang[t.name][r.label]:i.lang[o]&&i.lang[o][r.label]?r.label=i.lang[o][r.label]:i.lang[r.label]&&(r.label=i.lang[r.label]),i.bY.add(u[0],CKFinder._.UI_BUTTON,r))}function t(n){for(var t=1;CKFinder._.instanceConfig[t];)t++;return CKFinder._.instanceConfig[t]=n,t}window.CKFinder=function(n,t){if(n)for(var i in n)n.hasOwnProperty(i)&&(typeof n[i]!="function"||i=="callback")&&(this[i]=n[i]);this.callback=t};CKFinder.prototype={create:function(t){var r="ckf"+Math.random().toString().substr(2,9),i;return document.write('<span id="'+r+'"><\/span>'),t=n.tools.extend(n.jd.call(this),t,!0),i=n.replace(r,t,CKFinder),this.api=i.cg,i.cg},appendTo:function(t,i){i=n.tools.extend(n.jd.call(this),i,!0);var r=n.appendTo(t,i,CKFinder);return this.api=r.cg,r.cg},replace:function(t,i){i=n.tools.extend(n.jd.call(this),i,!0);var r=n.replace(t,i,CKFinder);return this.api=r.cg,r.cg},popup:function(t,i){function h(){var r=new n.dom.document(u.document),h;r.$.open();n.env.isCustomDomain()&&(r.$.domain=window.document.domain);r.$.write(s);r.$.close();try{return h=navigator.userAgent.toLowerCase(),h.indexOf(" chrome/")==-1&&(u.moveTo(o,e),u.resizeTo(t,i)),u.focus(),f.appendTo(r.bH())}catch(c){return f.appendTo(r.bH())}return!1}var r,s,f;t!==null&&typeof t=="object"&&(r=t,t=parseInt(r.width,10),i=parseInt(r.height,10));t=t||"80%";i=i||"70%";typeof t=="string"&&t.length>1&&t.substr(t.length-1,1)=="%"&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10));typeof i=="string"&&i.length>1&&i.substr(i.length-1,1)=="%"&&(i=parseInt(window.screen.height*parseInt(i,10)/100,10));t<200&&(t=200);i<200&&(i=200);var e=parseInt((window.screen.height-i)/2,10),o=parseInt((window.screen.width-t)/2,10),c=(r&&r.popupFeatures?r.popupFeatures:CKFinder.config.popupFeatures)+",width="+t+",height="+i+",top="+e+",left="+o,l=n.env.webkit?"about:blank":"",u=window.open(l,"CKFinderpopup",c,!0);return u?(this.width=this.height="100%",s='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><title>'+(r&&r.popupTitle?r.popupTitle:CKFinder.config.popupTitle)+'<\/title><style type="text/css">body, html, iframe, #ckfinder { margin: 0; padding: 0; border: 0; width: 100%; height: 100%; overflow: hidden; }<\/style><\/head><body><\/body><\/html>',f=this,CKFinder.env.safari)?(setTimeout(h,0),null):h():!1}};CKFinder._={};CKFinder._.instanceConfig=[];CKFinder.lang={};CKFinder.version="2.6.1";CKFinder.revision="UNKNOWN";CKFinder.addPlugin=function(t,r,u){var e={bM:u||[]},f;typeof r=="function"&&(r={appReady:r});for(f in r)r.hasOwnProperty(f)&&f!="connectorInitialized"&&f!="uiReady"&&(e[f]=r[f]);e.bz=function(n){if(n.config.readOnly&&e.readOnly===!1)return null;if(r.connectorInitialized)n.on("connectorInitialized",function(t){var i=r.connectorInitialized;i&&i.call(i,n.cg,t.data.xml)},null,null,1e3);if(r.connectorResponse)n.on("connectorResponse",function(t){var i=r.connectorResponse;i&&i.call(i,n.cg,t.data.xml)});if(r.galleryCallback)n.on("launchGallery",function(t){var i=r.galleryCallback;i&&(t.data.bx=i.call(i,n.cg,t.data.selected,t.data.files))});if(r.uiReady)n.on("uiReady",function(){var t=r.uiReady;t.call(t,n.cg)},null,null,1e3);if(r.appReady)n.on("appReady",function(){var t=r.appReady;t.call(t,n.cg)},null,null,1e3);i(e,n)};n.plugins.add(t,e)};CKFinder.getPluginPath=function(t){return n.plugins.getPath(t)};CKFinder.addExternalPlugin=function(t,i,r){n.plugins.tR(t,i,r)};CKFinder.setPluginLang=function(t,i,r){n.plugins.rX(t,i,r)};CKFinder.dialog={add:function(t,i){typeof i=="function"&&(i=n.tools.override(i,function(n){return function(t){return n(t.cg)}}));n.dialog.add(t,i)}};CKFinder.tools={};CKFinder.env={};CKFinder.dom={};CKFinder.create=function(n,t,i,r,u){var f,e;if(n!==null&&typeof n=="object"){f=new CKFinder;for(e in n)f[e]=n[e]}else f=new CKFinder,f.basePath=n,t&&(f.width=t),i&&(f.height=t),r&&(f.selectActionFunction=r),u&&(f.callback=u);return f.create()};CKFinder.popup=function(n,t,i,r,u){var f,o,s,e;if(n!==null&&typeof n=="object"){f=new CKFinder;for(e in n)f[e]=n[e];o=n.popupTitle;s=n.popupFeatures;t||(t=n.width);i||(i=n.height)}else f=new CKFinder,f.basePath=n,r&&(f.selectActionFunction=r),u&&(f.callback=u);return f.popup({width:t,height:i,popupTitle:o,popupFeatures:s})};CKFinder.setupFCKeditor=function(i,r,u,f){var h,v,c,o,s,e,l,a;if(r!==null&&typeof r=="object"){v=t(r);h=new CKFinder;for(c in r)h[c]=r[c],c=="width"?(o=h[c]||800,typeof o=="string"&&o.length>1&&o.substr(o.length-1,1)=="%"&&(o=parseInt(window.screen.width*parseInt(o,10)/100,10)),i.Config.LinkBrowserWindowWidth=o,i.Config.ImageBrowserWindowWidth=o,i.Config.FlashBrowserWindowWidth=o):c=="height"&&(s=h[c]||600,typeof s=="string"&&s.length>1&&s.substr(s.length-1,1)=="%"&&(s=parseInt(window.screen.height*parseInt(s,10)/100,10)),i.Config.LinkBrowserWindowHeight=s,i.Config.ImageBrowserWindowHeight=s,i.Config.FlashBrowserWindowHeight=s)}else h=new CKFinder,h.basePath=r;e=h.basePath;e.substr(0,1)!="/"&&e.indexOf("://")==-1&&(e=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+e);e=n.lj.call(h,e);l=e.indexOf("?")!==-1?"&":"?";v&&(e+=l+"configId="+v,l="&");i.Config.LinkBrowserURL=e;i.Config.ImageBrowserURL=e+l+"type="+(u||"Images");i.Config.FlashBrowserURL=e+l+"type="+(f||"Flash");a=e.substring(0,1+e.lastIndexOf("/"));i.Config.LinkUploadURL=a+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type=Files";i.Config.ImageUploadURL=a+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(u||"Images");i.Config.FlashUploadURL=a+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(f||"Flash")};CKFinder.setupCKEditor=function(i,r,u,f){var y,o,v,c,s,h,e,l,a;if(i===null){for(y in CKEDITOR.instances)CKFinder.setupCKEditor(CKEDITOR.instances[y],r,u,f);CKEDITOR.on("instanceCreated",function(n){CKFinder.setupCKEditor(n.editor,r,u,f)});return}if(r!==null&&typeof r=="object"){v=t(r);o=new CKFinder;for(c in r)o[c]=r[c],c=="width"?(s=o[c]||800,typeof s=="string"&&s.length>1&&s.substr(s.length-1,1)=="%"&&(s=parseInt(window.screen.width*parseInt(s,10)/100,10)),i.config.filebrowserWindowWidth=s):c=="height"&&(h=o[c]||600,typeof h=="string"&&h.length>1&&h.substr(h.length-1,1)=="%"&&(h=parseInt(window.screen.height*parseInt(h,10)/100,10)),i.config.filebrowserWindowHeight=h)}else o=new CKFinder,o.basePath=r;e=o.basePath;e.substr(0,1)!="/"&&e.indexOf("://")==-1&&(e=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+e);e=n.lj.call(o,e);l=e.indexOf("?")!==-1?"&":"?";v&&(e+=l+"configId="+v,l="&");i.config.filebrowserBrowseUrl=e;i.config.filebrowserImageBrowseUrl=e+l+"type="+(u||"Images");i.config.filebrowserFlashBrowseUrl=e+l+"type="+(f||"Flash");a=e.substring(0,1+e.lastIndexOf("/"));i.config.filebrowserUploadUrl=a+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type=Files";i.config.filebrowserImageUploadUrl=a+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(u||"Images");i.config.filebrowserFlashUploadUrl=a+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(f||"Flash")}}();n.event||(n.event=function(){},n.event.du=function(t){var r=n.event.prototype;for(var i in r)t[i]==undefined&&(t[i]=r[i])},n.event.prototype=function(){var t=function(n){var t=n.kk&&n.kk()||n._||(n._={});return t.cC||(t.cC={})},i=function(n){this.name=n;this.dF=[]};return i.prototype={mi:function(n){for(var t=0,i=this.dF;t<i.length;t++)if(i[t].fn==n)return t;return-1}},{on:function(n,r,u,f,e){var c=t(this),l=c[n]||(c[n]=new i(n)),o,a,s,h;if(l.mi(r)<0){for(o=l.dF,u||(u=this),isNaN(e)&&(e=10),a=this,s=function(t,i,e,o){var s={name:n,jN:this,application:t,data:i,jO:f,stop:e,cancel:o,removeListener:function(){a.removeListener(n,r)}};return r.call(u,s),s.data},s.fn=r,s.nT=e,h=o.length-1;h>=0;h--)if(o[h].nT<=e){o.splice(h+1,0,s);return}o.unshift(s)}},oW:function(){var r=!1,u=function(){r=!0},i=!1,f=function(n){i=n?2:!0};return function(e,o,s,h){var c,l,v,a;typeof o=="function"?(h=o,o=null):typeof s=="function"&&(h=s,s=null);e!="mousemove"&&n.log("[EVENT] "+e,o,h);var y=t(this)[e],p=r,w=i;if(r=i=!1,y&&(c=y.dF,c.length))for(c=c.slice(0),l=0;l<c.length;l++)if(v=c[l].call(this,s,o,u,f),typeof v!="undefined"&&(o=v),r||i&&i!=2)break;return a=i||(typeof o=="undefined"?!1:!o||typeof o.result=="undefined"?o:o.result),typeof h=="function"&&i!=2&&(a=h.call(this,i,o)||a),r=p,i=w,a}}(),cr:function(n,i,r){var u=this.oW(n,i,r);return delete t(this)[n],u},removeListener:function(n,i){var r=t(this)[n],u;r&&(u=r.mi(i),u>=0&&r.dF.splice(u,1))},mF:function(){for(var i=t(this),n=0;n<i.length;n++)i[n].dF=[]},rC:function(n){var i=t(this)[n];return i&&i.dF.length>0}}}());n.application||(n.kZ=0,n.fc=1,n.qE=2,n.application=function(t,i,r,u){var f=this;f._={instanceConfig:t,element:i};f.ff=r||n.kZ;n.event.call(f);f.iI(u)},n.application.replace=function(t,i,r){var u=t,f,e;if(typeof u!="object"){if(u=document.getElementById(t),!u)for(f=0,e=document.getElementsByName(t);(u=e[f++])&&u.tagName.toLowerCase()!="textarea";);if(!u)throw'[CKFINDER.application.replace] The element with id or name "'+t+'" was not found.';}return new n.application(i,u,n.fc,r)},n.application.appendTo=function(t,i,r){if(typeof t!="object"&&(t=document.getElementById(t),!t))throw'[CKFINDER.application.appendTo] The element with id "'+t+'" was not found.';return new n.application(i,t,n.qE,r)},n.application.prototype={iI:function(){var t=n.application.eb||(n.application.eb=[]);t.push(this)},oW:function(t,i,r){return n.event.prototype.oW.call(this,t,i,this,r)},cr:function(t,i,r){return n.event.prototype.cr.call(this,t,i,this,r)}},n.event.du(n.application.prototype,!0));n.env||(a=/rv:([\d\.]+)/,v=/trident\/([\d]+)/,n.env=function(){var i=navigator.userAgent.toLowerCase(),u=window.opera,n={ie:/*@cc_on!@*/!1,iemodern:!1,opera:!!u&&u.version,webkit:i.indexOf(" applewebkit/")>-1,air:i.indexOf(" adobeair/")>-1,mac:i.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat",isCustomDomain:function(){return this.ie&&document.domain!=window.location.hostname}},t,r;return n.gecko=navigator.product=="Gecko"&&!n.webkit&&!n.opera,n.chrome=!1,n.safari=!1,n.webkit&&(i.indexOf(" chrome/")>-1?n.chrome=!0:n.safari=!0),t=0,n.ie&&(t=parseFloat(i.match(/msie (\d+)/)[1]),n.ie8=!!document.documentMode,n.ie8Compat=document.documentMode==8,n.ie7Compat=t==7&&!document.documentMode||document.documentMode==7,n.ie6Compat=t<7||n.quirks),n.gecko&&(r=i.match(a),r&&(r=r[1].split("."),t=r[0]*1e4+(r[1]||0)*100+ +(r[2]||0)),v.test(i)?(n.gecko=!1,n.iemodern=!0):n.isMobile=i.indexOf("fennec")>-1),n.opera&&(t=parseFloat(u.version()),n.isMobile=i.indexOf("opera mobi")>-1),n.air&&(t=parseFloat(i.match(/ adobeair\/(\d+)/)[1])),n.webkit&&(t=parseFloat(i.match(/ applewebkit\/(\d+)/)[1]),n.isMobile=i.indexOf("mobile")>-1),n.version=t,n.isCompatible=n.ie&&t>=6||n.iemodern&&t>=11||n.gecko&&t>=10801||n.opera&&t>=9.5||n.air&&t>=1||n.webkit&&t>=522||!1,n.cssClass="browser_"+(n.ie?"ie":n.iemodern?"iemodern":n.gecko?"gecko":n.opera?"opera":n.air?"air":n.webkit?"webkit":"unknown"),n.quirks&&(n.cssClass+=" browser_quirks"),n.ie&&(n.cssClass+=" browser_ie"+(n.version<7?"6":n.version>=8?"8":"7"),n.quirks&&(n.cssClass+=" browser_iequirks"),n.ie7Compat&&(n.cssClass+=" browser_ie7Compat")),n.gecko&&t<10900&&(n.cssClass+=" browser_gecko18"),n}(),CKFinder.env=n.env);i=n.env;f=i.ie;n.status=="unloaded"&&function(){n.event.du(n);n.dO=function(){if(n.status!="basic_ready"){n.dO.qr=!0;return}delete n.dO;var t=document.createElement("script");t.type="text/javascript";t.src=n.basePath+"ckfinder.js";document.getElementsByTagName("head")[0].appendChild(t)};n.mS=0;n.uQ="ckfinder";n.uM=!0;var t=function(t,r,u,f){if(i.isCompatible){n.dO&&n.dO();var e=u(t,r,f);return n.add(e),e}return null};n.replace=function(i,r,u){return t(i,r,n.application.replace,u)};n.appendTo=function(i,r,u){return t(i,r,n.application.appendTo,u)};n.add=function(n){var t=this._.io||(this._.io=[]);t.push(n)};n.uL=function(){for(var u,r=document.getElementsByTagName("textarea"),t=0;t<r.length;t++){var i=null,n=r[t],f=n.name;if(n.name||n.id){if(typeof arguments[0]=="string"){if(u=new RegExp("(?:^| )"+arguments[0]+"(?:$| )"),!u.test(n.className))continue}else if(typeof arguments[0]=="function"&&(i={},arguments[0](n,i)===!1))continue;this.replace(n,i)}}},function(){var t=function(){var t=n.dO,i=n.mS;n.status="basic_ready";t&&t.qr?t():i&&setTimeout(function(){n.dO&&n.dO()},i*1e3)};window.addEventListener?window.addEventListener("load",t,!1):window.attachEvent&&window.attachEvent("onload",t)}();n.status="basic_loaded"}();n.dom={};CKFinder.dom=n.dom;u=n.dom;n.ajax=function(){var r=function(){if(!f||location.protocol!="file:")try{return new XMLHttpRequest}catch(n){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(i){}return null},t=function(n){return n.readyState==4&&(n.status>=200&&n.status<300||n.status==304||n.status===0||n.status==1223)},u=function(n){return t(n)?n.responseText:null},e=function(i){var f,r;if(t(i)&&(f=i.responseXML,r=new n.xml(f&&f.firstChild&&f.documentElement&&f.documentElement.nodeName!="parsererror"?f:i.responseText.replace(/^[^<]+/,"").replace(/[^>]+$/,"")),r&&r.mq&&r.mq.documentElement&&r.mq.documentElement.nodeName!="parsererror"&&r.mq.documentElement.nodeName!="html"&&r.mq.documentElement.nodeName!="br"))return r;var e=n.nG||n.jt,u=i.responseText,o=e.lang.ErrorMsg[u?"XmlError":"XmlEmpty"]+"<br>";return r&&r.mq&&(r.mq.parseError&&r.mq.parseError.reason?o+=r.mq.parseError.reason:r.mq.documentElement&&r.mq.documentElement.nodeName=="parsererror"&&(o+=r.mq.documentElement.textContent)),u?((/text\/plain/.test(i.getResponseHeader("Content-Type"))||/<Connector\s*/.test(u))&&(u=n.tools.htmlEncode(u),u=u.replace(/\n/g,"<br>"),u='<div style="width:600px; overflow:scroll"><font>'+u+"<\/font><\/div>"),e.msgDialog(e.lang.SysErrorDlgTitle,o+"<br>"+e.lang.ErrorMsg.XmlRawResponse.replace("%s","<br><br>"+u))):e.msgDialog(e.lang.SysErrorDlgTitle,o),{}},i=function(t,i,u,f){var o=!!i,e;return(n.log("[AJAX] "+(f?"POST":"GET")+" "+t),e=r(),!e)?null:(f?e.open("POST",t,o):e.open("GET",t,o),o&&(e.onreadystatechange=function(){e.readyState==4&&(i(u(e)),e=null)}),f?(e.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8"),e.send(f)):e.send(null),o?"":u(e))};return{load:function(n,t,r){return i(n,t,u,r)},loadXml:function(n,t,r){return i(n,t,e,r)}}}();CKFinder.ajax=n.ajax,function(){var t=[];n.tools={arrayCompare:function(n,t){if(!n&&!t)return!0;if(!n||!t||n.length!=t.length)return!1;for(var i=0;i<n.length;i++)if(n[i]!=t[i])return!1;return!0},clone:function(n){var t,i,r,u;if(n&&n instanceof Array){for(t=[],i=0;i<n.length;i++)t[i]=this.clone(n[i]);return t}if(n===null||typeof n!="object"||n instanceof String||n instanceof Number||n instanceof Boolean||n instanceof Date)return n;t=new n.constructor;for(r in n)u=n[r],t[r]=this.clone(u);return t},capitalize:function(n){return n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()},extend:function(n){var t=arguments.length,u,f,r,e,i;for(typeof(u=arguments[t-1])=="boolean"?t--:typeof(u=arguments[t-2])=="boolean"&&(f=arguments[t-1],t-=2),r=1;r<t;r++){e=arguments[r];for(i in e)(u===!0||n[i]==undefined)&&(!f||i in f)&&(n[i]=e[i])}return n},prototypedCopy:function(n){var t=function(){};return t.prototype=n,new t},isArray:function(n){return!!n&&n instanceof Array},cssStyleToDomStyle:function(){var n=document.createElement("div").style,t=typeof n.cssFloat!="undefined"?"cssFloat":typeof n.styleFloat!="undefined"?"styleFloat":"float";return function(n){return n=="float"?t:n.replace(/-./g,function(n){return n.substr(1).toUpperCase()})}}(),htmlEncode:function(n){var t=function(n){var t=new u.element("span");return t.setText(n),t.getHtml()},i=t("\n").toLowerCase()=="<br>"?function(n){return t(n).replace(/<br>/gi,"\n")}:t,r=t(">")==">"?function(n){return i(n).replace(/>/g,"&gt;")}:i,f=t("  ")=="&nbsp; "?function(n){return r(n).replace(/&nbsp;/g," ")}:r;return this.htmlEncode=f,this.htmlEncode(n)},escapeHtml:function(n){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return n.replace(/[&<>"']/g,function(n){return t[n]})},getNextNumber:function(){var n=0;return function(){return++n}}(),getRandomString:function(n){var f="abcdefghijklmnopqrstuvwxyz0123456789",t=[],e="",r,i,u;if(window.crypto&&window.crypto.getRandomValues)t=new Uint8Array(n),window.crypto.getRandomValues(t);else for(r=0;r<n;r++)t.push(Math.floor(Math.random()*256));for(i=0;i<t.length;i++)u=f.charAt(t[i]%f.length),e+=Math.random()>.5?u.toUpperCase():u;return e},override:function(n,t){return t(n)},setTimeout:function(n,t,i,r,u){return u||(u=window),i||(i=u),u.setTimeout(function(){r?n.apply(i,[].concat(r)):n.apply(i)},t||0)},trim:function(){var n=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(t){return t?t.replace(n,""):null}}(),ltrim:function(){var n=/^[ \t\n\r]+/g;return function(t){return t?t.replace(n,""):null}}(),rtrim:function(){var n=/[ \t\n\r]+$/g;return function(t){return t?t.replace(n,""):null}}(),indexOf:Array.prototype.indexOf?function(n,t){return n.indexOf(t)}:function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},bind:function(n,t){return function(){return n.apply(t,arguments)}},createClass:function(t){var i=t.$,r=t.base,u=t.vd||t._,f=t.ej,e=t.statics,o;return u&&(o=i,i=function(){var t=this,f=t._||(t._={}),r,i;for(r in u)i=u[r],f[r]=typeof i=="function"?n.tools.bind(i,t):i;o.apply(t,arguments)}),r&&(i.prototype=this.prototypedCopy(r.prototype),i.prototype.constructor=i,i.prototype.base=function(){this.base=r.prototype.base;r.apply(this,arguments);this.base=arguments.callee}),f&&this.extend(i.prototype,f,!0),e&&this.extend(i,e,!0),i},addFunction:function(n,i){return t.push(function(){n.apply(i||this,arguments)})-1},removeFunction:function(n){t[n]=null},callFunction:function(n){var i=t[n];return i.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var n=/^\d+(?:\.\d+)?$/;return function(t){return t+(n.test(t)?"px":"")}}(),repeat:function(n,t){return new Array(t+1).join(n)},deepCopy:function(t){var r={},i;if(typeof t=="object"){typeof t.length!="undefined"&&(r=[]);for(i in t)r[i]=t[i]===null?null:typeof t[i]=="object"?n.tools.deepCopy(t[i]):t[i]}return r},getUrlParam:function(n,t){var r=new RegExp("(?:[?&]|&amp;)"+n+"=([^&]+)","i"),i=(t||window).location.search.match(r);return i&&i.length>1?i[1]:null},htmlEncode:function(n){return n?(n=typeof n!="string"?n.toString():n,n=n.replace(/&/g,"&amp;"),n=n.replace(/</g,"&lt;"),n.replace(/>/g,"&gt;")):""},setCookie:function(n,t,i){document.cookie=n+"="+t+(i?"":"; expires=Thu, 6 Oct 2016 01:00:00 UTC; path=/")},getCookie:function(n){var t=document.cookie.match(new RegExp("(^|\\s|;)"+n+"=([^;]*)"));return t&&t.length>0?t[2]:""},mH:function(n){f?(n.$.onfocusin=function(){n.addClass("focus_inside")},n.$.onfocusout=function(){n.removeClass("focus_inside")}):(n.$.addEventListener("focus",function(){n.addClass("focus_inside")},!0),n.$.addEventListener("blur",function(){n.removeClass("focus_inside")},!0))},formatSize:function(n,t,i){return n==0?"0":n<1?t.Kb.replace("%1",1):n<1024?(i||(n=n.toFixed(2)),t.Kb.replace("%1",n)):n<1048576?t.Mb.replace("%1",(n/1024).toFixed(2)):t.Gb.replace("%1",(n/1048576).toFixed(2))},formatSpeed:function(n,t){return t.SizePerSecond.replace("%1",this.formatSize(n,t))}};CKFinder._.callFunction=n.tools.callFunction;CKFinder.tools=n.tools}();t=n.tools;u.event=function(n){this.$=n};u.event.prototype={oV:function(){return this.$.keyCode||this.$.which||0},db:function(){var t=this,i=t.oV();return(t.$.ctrlKey||t.$.metaKey)&&(i+=n.bP),t.$.shiftKey&&(i+=n.dy),t.$.altKey&&(i+=n.eJ),i},preventDefault:function(n){var t=this.$;t.preventDefault?t.preventDefault():t.returnValue=!1;n&&this.stopPropagation()},stopPropagation:function(){var n=this.$;n.stopPropagation?n.stopPropagation():n.cancelBubble=!0},bK:function(){var n=this.$.target||this.$.srcElement;return n?new u.bi(n):null},getButton:function(){if(this.$.which)return this.$.which;switch(this.$.button){case 1:return 1;case 4:return 2;case 2:return 3}},ov:function(){return 1==this.getButton()}};n.bP=1e3;n.dy=2e3;n.eJ=4e3;u.dE=function(n){n&&(this.$=n)};u.dE.prototype=function(){var t=function(t,i){return function(r){typeof n!="undefined"&&t.oW(i,new u.event(r))}};return{kk:function(){var n;return(n=this.dw("_"))||this.fL("_",n={}),n},on:function(i){var r=this,u=r.dw("_cke_nativeListeners"),f;return u||(u={},r.fL("_cke_nativeListeners",u)),u[i]||(f=u[i]=t(r,i),r.$.addEventListener?r.$.addEventListener(i,f,!!n.event.jP):r.$.attachEvent&&r.$.attachEvent("on"+i,f)),n.event.prototype.on.apply(r,arguments)},removeListener:function(t){var i=this,r,u;n.event.prototype.removeListener.apply(i,arguments);i.rC(t)||(r=i.dw("_cke_nativeListeners"),u=r&&r[t],u&&(i.$.removeEventListener?i.$.removeEventListener(t,u,!1):i.$.detachEvent&&i.$.detachEvent("on"+t,u),delete r[t]))}}}(),function(i){var r={};i.equals=function(n){return n&&n.$===this.$};i.fL=function(n,t){var i=this.iY(),u=r[i]||(r[i]={});return u[n]=t,this};i.dw=function(n){var t=this.$._ckf_expando,i=t&&r[t];return i&&i[n]};i.jF=function(n){var i=this.$._ckf_expando,t=i&&r[i],u=t&&t[n];return typeof u!="undefined"&&delete t[n],u||null};i.iY=function(){return this.$._ckf_expando||(this.$._ckf_expando=t.getNextNumber())};n.event.du(i)}(u.dE.prototype);u.window=function(n){u.dE.call(this,n)};u.window.prototype=new u.dE;t.extend(u.window.prototype,{focus:function(){i.webkit&&this.$.parent&&this.$.parent.focus();this.$.focus()},eR:function(){var n=this.$.document,t=n.compatMode=="CSS1Compat";return{width:(t?n.documentElement.clientWidth:n.body.clientWidth)||0,height:(t?n.documentElement.clientHeight:n.body.clientHeight)||0}},hV:function(){var t=this.$,n;return"pageXOffset"in t?{x:t.pageXOffset||0,y:t.pageYOffset||0}:(n=t.document,{x:n.documentElement.scrollLeft||n.body.scrollLeft||0,y:n.documentElement.scrollTop||n.body.scrollTop||0})}});u.document=function(n){u.dE.call(this,n)};c=u.document;c.prototype=new u.dE;t.extend(c.prototype,{appendStyleSheet:function(n){var t=this,i;t.$.createStyleSheet?t.$.createStyleSheet(n):(i=new u.element("link",t),i.setAttributes({rel:"stylesheet",type:"text/css",href:n}),t.getHead().append(i))},createElement:function(n,t){var i=new u.element(n,this);return t&&(t.attributes&&i.setAttributes(t.attributes),t.gS&&i.setStyles(t.gS)),i},jT:function(n){return new u.text(n,this)},focus:function(){this.getWindow().focus()},getById:function(n){var t=this.$.getElementById(n);return t?new u.element(t):null},vu:function(n,t){for(var o,s,f,r,i=this.$.documentElement,e=0;i&&e<n.length;e++){if(o=n[e],!t){i=i.childNodes[o];continue}for(s=-1,f=0;f<i.childNodes.length;f++)if((r=i.childNodes[f],t!==!0||r.nodeType!=3||!r.previousSibling||r.previousSibling.nodeType!=3)&&(s++,s==o)){i=r;break}}return i?new u.bi(i):null},eG:function(n,t){return!f&&t&&(n=t+":"+n),new u.iT(this.$.getElementsByTagName(n))},getHead:function(){var n=this.$.getElementsByTagName("head")[0];return n=new u.element(n),(this.getHead=function(){return n})()},bH:function(){var n=new u.element(this.$.body);return(this.bH=function(){return n})()},gT:function(){var n=new u.element(this.$.documentElement);return(this.gT=function(){return n})()},getWindow:function(){var n=new u.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return n})()}});u.bi=function(t){if(t){switch(t.nodeType){case n.cv:return new u.element(t);case n.fl:return new u.text(t)}u.dE.call(this,t)}return this};u.bi.prototype=new u.dE;n.cv=1;n.fl=3;n.va=8;n.om=11;n.oh=0;n.op=1;n.gW=2;n.gX=4;n.mo=8;n.lF=16;t.extend(u.bi.prototype,{appendTo:function(n,t){return n.append(this,t),n},clone:function(t,i){var f=this.$.cloneNode(t),r;return i||(r=function(t){var u,i;if(t.nodeType==n.cv)for(t.removeAttribute("id",!1),t.removeAttribute("_ckf_expando",!1),u=t.childNodes,i=0;i<u.length;i++)r(u[i])},r(f)),new u.bi(f)},gE:function(){return!!this.$.previousSibling},ge:function(){return!!this.$.nextSibling},kB:function(n){return n.$.parentNode.insertBefore(this.$,n.$.nextSibling),n},insertBefore:function(n){return n.$.parentNode.insertBefore(this.$,n.$),n},vP:function(n){return this.$.parentNode.insertBefore(n.$,this.$),n},lU:function(n){for(var e=[],o=this.getDocument().$.documentElement,t=this.$,u,f,r,i;t&&t!=o;){for(u=t.parentNode,f=-1,r=0;r<u.childNodes.length;r++)if((i=u.childNodes[r],!n||i.nodeType!=3||!i.previousSibling||i.previousSibling.nodeType!=3)&&(f++,i==t))break;e.unshift(f);t=t.parentNode}return e},getDocument:function(){var n=new c(this.$.ownerDocument||this.$.parentNode.ownerDocument);return(this.getDocument=function(){return n})()},vA:function(){for(var t=this.$,n=t.parentNode&&t.parentNode.firstChild,i=-1;n;){if(i++,n==t)return i;n=n.nextSibling}return-1},hL:function(t,i,r){var e,u,f;if(r&&!r.call&&(e=r,r=function(n){return!n.equals(e)}),u=!t&&this.getFirst&&this.getFirst(),!u){if(this.type==n.cv&&r&&r(this,!0)===!1)return null;u=this.dG()}while(!u&&(f=(f||this).getParent())){if(r&&r(f,!0)===!1)return null;u=f.dG()}return u?r&&r(u)===!1?null:i&&i!=u.type?u.hL(!1,i,r):u:null},hZ:function(t,i,r){var e,u,f;if(r&&!r.call&&(e=r,r=function(n){return!n.equals(e)}),u=!t&&this.dB&&this.dB(),!u){if(this.type==n.cv&&r&&r(this,!0)===!1)return null;u=this.cf()}while(!u&&(f=(f||this).getParent())){if(r&&r(f,!0)===!1)return null;u=f.cf()}return u?r&&r(u)===!1?null:i&&u.type!=i?u.hZ(!1,i,r):u:null},cf:function(n){var t=this.$,i;do t=t.previousSibling,i=t&&new u.bi(t);while(i&&n&&!n(i));return i},vs:function(){return this.cf(function(n){return n.$.nodeType==1})},dG:function(n){var t=this.$,i;do t=t.nextSibling,i=t&&new u.bi(t);while(i&&n&&!n(i));return i},vk:function(){return this.dG(function(n){return n.$.nodeType==1})},getParent:function(){var n=this.$.parentNode;return n&&n.nodeType==1?new u.bi(n):null},vn:function(n){var t=this,i=[];do i[n?"push":"unshift"](t);while(t=t.getParent());return i},vv:function(n){var t=this,i;if(n.equals(t))return t;if(n.contains&&n.contains(t))return n;i=t.contains?t:t.getParent();do if(i.contains(n))return i;while(i=i.getParent());return null},gz:function(t){var i=this.$,u=t.$,r;if(i.compareDocumentPosition)return i.compareDocumentPosition(u);if(i==u)return n.oh;if(this.type==n.cv&&t.type==n.cv){if(i.contains){if(i.contains(u))return n.lF+n.gX;if(u.contains(i))return n.mo+n.gW}if("sourceIndex"in i)return i.sourceIndex<0||u.sourceIndex<0?n.op:i.sourceIndex<u.sourceIndex?n.gX:n.gW}var f=this.lU(),e=t.lU(),o=Math.min(f.length,e.length);for(r=0;r<=o-1;r++)if(f[r]!=e[r]){if(r<o)return f[r]<e[r]?n.gX:n.gW;break}return f.length<e.length?n.lF+n.gX:n.mo+n.gW},vw:function(n,t){var i=this.$;for(t||(i=i.parentNode);i;){if(i.nodeName&&i.nodeName.toLowerCase()==n)return new u.bi(i);i=i.parentNode}return null},vX:function(n,t){var i=this.$;for(t||(i=i.parentNode);i;){if(i.nodeName&&i.nodeName.toLowerCase()==n)return!0;i=i.parentNode}return!1},move:function(n,t){n.append(this.remove(),t)},remove:function(n){var t=this.$,i=t.parentNode,r;if(i){if(n)for(;r=t.firstChild;)i.insertBefore(t.removeChild(r),t);i.removeChild(t)}return this},replace:function(n){this.insertBefore(n);n.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var r=this,i,u,f;r.getFirst&&(i=r.getFirst());){if(i.type==n.fl)if(u=t.ltrim(i.getText()),f=i.hJ(),u)u.length<f&&(i.split(f-u.length),r.$.removeChild(r.$.firstChild));else{i.remove();continue}break}},rtrim:function(){for(var u=this,r,e,o;u.dB&&(r=u.dB());){if(r.type==n.fl)if(e=t.rtrim(r.getText()),o=r.hJ(),e)e.length<o&&(r.split(e.length),u.$.lastChild.parentNode.removeChild(u.$.lastChild));else{r.remove();continue}break}f||i.opera||(r=u.$.lastChild,r&&r.type==1&&r.nodeName.toLowerCase()=="br"&&r.parentNode.removeChild(r))}});u.iT=function(n){this.$=n};u.iT.prototype={count:function(){return this.$.length},getItem:function(n){var t=this.$[n];return t?new u.bi(t):null}};u.element=function(n,t){typeof n=="string"&&(n=(t?t.$:document).createElement(n));u.dE.call(this,n)};e=u.element;e.eB=function(n){return n&&(n.$?n:new e(n))};e.prototype=new u.bi;e.kE=function(n,t){var i=new e("div",t);return i.setHtml(n),i.getFirst().remove()};e.rS=function(n,i,r,u){var f=i.dw("list_marker_id")||i.fL("list_marker_id",t.getNextNumber()).dw("list_marker_id"),e=i.dw("list_marker_names")||i.fL("list_marker_names",{}).dw("list_marker_names");return n[f]=i,e[r]=1,i.fL(r,u)};e.sM=function(n){for(var t in n)e.qZ(n,n[t],!0)};e.qZ=function(n,t,i){var r=t.dw("list_marker_names"),u=t.dw("list_marker_id");for(var f in r)t.jF(f);t.jF("list_marker_names");i&&(t.jF("list_marker_id"),delete n[u])};t.extend(e.prototype,{type:n.cv,addClass:function(n){var t=this.$.className,i;t&&(i=new RegExp("(?:^|\\s)"+n+"(?:\\s|$)",""),i.test(t)||(t+=" "+n));this.$.className=t||n},removeClass:function(n){var t=this.getAttribute("class"),i;t&&(i=new RegExp("(?:^|\\s+)"+n+"(?=\\s|$)","i"),i.test(t)&&(t=t.replace(i,"").replace(/^\s+/,""),t?this.setAttribute("class",t):this.removeAttribute("class")))},hasClass:function(n){var t=new RegExp("(?:^|\\s+)"+n+"(?=\\s|$)","");return t.test(this.getAttribute("class"))},append:function(t,i){var r=this;return typeof t=="string"&&(t=r.getDocument().createElement(t)),i?r.$.insertBefore(t.$,r.$.firstChild):r.$.appendChild(t.$),n.log("[DOM] DOM flush into "+r.getName()),t},appendHtml:function(n){var t=this,i;t.$.childNodes.length?(i=new e("div",t.getDocument()),i.setHtml(n),i.jg(t)):t.setHtml(n)},appendText:function(n){this.$.text!=undefined?this.$.text+=n:this.append(new u.text(n))},pd:function(){for(var u=this,r=u.dB();r&&r.type==n.fl&&!t.rtrim(r.getText());)r=r.cf();r&&r.is&&r.is("br")||u.append(i.opera?u.getDocument().jT(""):u.getDocument().createElement("br"))},tV:function(n){var t=this,i=new u.mk(t.getDocument()),r;i.setStartAfter(t);i.setEndAfter(n);r=i.extractContents();i.insertNode(t.remove());r.kA(t)},contains:f||i.webkit?function(t){var i=this.$;return t.type!=n.cv?i.contains(t.getParent().$):i!=t.$&&i.contains(t.$)}:function(n){return!!(this.$.compareDocumentPosition(n.$)&16)},focus:function(){try{this.$.focus()}catch(n){}},getHtml:function(){return this.$.innerHTML},fH:function(){var n=this,t;return n.$.outerHTML?n.$.outerHTML.replace(/<\?[^>]*>/,""):(t=n.$.ownerDocument.createElement("div"),t.appendChild(n.$.cloneNode(!0)),t.innerHTML)},setHtml:function(t){return n.log("[DOM] DOM flush into "+this.getName()),this.$.innerHTML=t},setText:function(t){return e.prototype.setText=this.$.innerText!=undefined?function(t){return n.log("[DOM] Text flush"),this.$.innerText=t}:function(t){return n.log("[DOM] Text flush"),this.$.textContent=t},this.setText(t)},getAttribute:function(){var n=function(n){return this.$.getAttribute(n,2)};return f&&(i.ie7Compat||i.ie6Compat)?function(t){var i=this,r;switch(t){case"class":t="className";break;case"tabindex":return r=n.call(i,t),r!==0&&i.$.tabIndex===0&&(r=null),r;case"checked":return i.$.checked;case"style":return i.$.style.cssText}return n.call(i,t)}:n}(),getChildren:function(){return new u.iT(this.$.childNodes)},getComputedStyle:f?function(n){return this.$.currentStyle[t.cssStyleToDomStyle(n)]}:function(n){return this.getWindow().$.getComputedStyle(this.$,"").getPropertyValue(n)},pf:function(){var t=n.ga[this.getName()];return this.pf=function(){return t},t},eG:c.prototype.eG,vp:f?function(){var t=this.$.tabIndex;return t!==0||n.ga.ug[this.getName()]||parseInt(this.getAttribute("tabindex"),10)===0||(t=-1),t}:i.webkit?function(){var n=this.$.tabIndex;return n==undefined&&(n=parseInt(this.getAttribute("tabindex"),10),isNaN(n)&&(n=-1)),n}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},dS:function(){return this.$.id||null},data:function(n,t){return(n="data-"+n,t===undefined)?this.getAttribute(n):(t===!1?this.removeAttribute(n):this.setAttribute(n,t),null)},vm:function(){return this.$.name||null},getName:function(){var n=this.$.nodeName.toLowerCase(),t;return!f||document.documentMode>8||(t=this.$.scopeName,t!="HTML"&&(n=t.toLowerCase()+":"+n)),(this.getName=function(){return n})()},getValue:function(){return this.$.value},getFirst:function(){var n=this.$.firstChild;return n?new u.bi(n):null},dB:function(n){var i=this.$.lastChild,t=i&&new u.bi(i);return t&&n&&!n(t)&&(t=t.cf(n)),t},rd:function(n){return this.$.style[t.cssStyleToDomStyle(n)]},is:function(){for(var t=this.getName(),n=0;n<arguments.length;n++)if(arguments[n]==t)return!0;return!1},vL:function(){var t=this.getName(),i=!n.ga.uj[t]&&(n.ga[t]||n.ga.span);return i&&i["#"]},isIdentical:function(n){var i,t;if(this.getName()!=n.getName())return!1;var r=this.$.attributes,u=n.$.attributes,e=r.length,o=u.length;if(!f&&e!=o)return!1;for(i=0;i<e;i++)if(t=r[i],(!f||t.specified&&t.nodeName!="_ckf_expando")&&t.nodeValue!=n.getAttribute(t.nodeName))return!1;if(f)for(i=0;i<o;i++)if(t=u[i],(!f||t.specified&&t.nodeName!="_ckf_expando")&&t.nodeValue!=r.getAttribute(t.nodeName))return!1;return!0},isVisible:function(){return this.$.offsetWidth&&this.$.style.visibility!="hidden"},hasAttributes:f&&(i.ie7Compat||i.ie6Compat)?function(){for(var t,i=this.$.attributes,n=0;n<i.length;n++){t=i[n];switch(t.nodeName){case"class":if(this.getAttribute("class"))return!0;case"_ckf_expando":continue;default:if(t.specified)return!0}}return!1}:function(){var n=this.$.attributes;return n.length>1||n.length==1&&n[0].nodeName!="_ckf_expando"},hasAttribute:function(n){var t=this.$.attributes.getNamedItem(n);return!!(t&&t.specified)},hide:function(){this.setStyle("display","none")},jg:function(n,t){var i=this.$,r;if(n=n.$,i!=n)if(t)while(r=i.lastChild)n.insertBefore(i.removeChild(r),n.firstChild);else while(r=i.firstChild)n.appendChild(i.removeChild(r))},show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var n=function(n,t){return this.$.setAttribute(n,t),this};return f&&(i.ie7Compat||i.ie6Compat)?function(t,i){var r=this;return t=="class"?r.$.className=i:t=="style"?r.$.style.cssText=i:t=="tabindex"?r.$.tabIndex=i:t=="checked"?r.$.checked=i:n.apply(r,arguments),r}:n}(),setAttributes:function(n){for(var t in n)this.setAttribute(t,n[t]);return this},setValue:function(n){return this.$.value=n,this},removeAttribute:function(){var n=function(n){this.$.removeAttribute(n)};return f&&(i.ie7Compat||i.ie6Compat)?function(t){t=="class"?t="className":t=="tabindex"&&(t="tabIndex");n.call(this,t)}:n}(),uW:function(n){for(var t=0;t<n.length;t++)this.removeAttribute(n[t])},removeStyle:function(n){var i=this;i.$.style.removeAttribute?i.$.style.removeAttribute(t.cssStyleToDomStyle(n)):i.setStyle(n,"");i.$.style.cssText||i.removeAttribute("style")},setStyle:function(n,i){return this.$.style[t.cssStyleToDomStyle(n)]=i,this},setStyles:function(n){for(var t in n)this.setStyle(t,n[t]);return this},setOpacity:function(n){f&&i.version<9?(n=Math.round(n*100),this.setStyle("filter",n>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+n+")")):this.setStyle("opacity",n)},unselectable:i.gecko?function(){this.$.style.MozUserSelect="none"}:i.webkit?function(){this.$.style.uE="none"}:function(){if(f||i.opera){var t=this.$,n,r=0;for(t.unselectable="on";n=t.all[r++];)switch(n.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:n.unselectable="on"}}},vr:function(){for(var n=this;n.getName()!="html";){if(n.getComputedStyle("position")!="static")return n;n=n.getParent()}return null},ir:function(n){var r=this,u=0,o=0,c=r.getDocument().bH(),h=r.getDocument().$.compatMode=="BackCompat",v=r.getDocument(),k,d,t,y,g,s,a,nt,p;if(document.documentElement.getBoundingClientRect){var w=r.$.getBoundingClientRect(),tt=v.$,l=tt.documentElement,it=l.clientTop||c.$.clientTop||0,rt=l.clientLeft||c.$.clientLeft||0,b=!0;f&&(k=v.gT().contains(r),d=v.bH().contains(r),b=h&&d||!h&&k);b&&(u=w.left+(!h&&l.scrollLeft||c.$.scrollLeft),u-=rt,o=w.top+(!h&&l.scrollTop||c.$.scrollTop)-it)}else for(t=r,y=null;t&&!(t.getName()=="body"||t.getName()=="html");){for(u+=t.$.offsetLeft-t.$.scrollLeft,o+=t.$.offsetTop-t.$.scrollTop,t.equals(r)||(u+=t.$.clientLeft||0,o+=t.$.clientTop||0),s=y;s&&!s.equals(t);)u-=s.$.scrollLeft,o-=s.$.scrollTop,s=s.getParent();y=t;t=(g=t.$.offsetParent)?new e(g):null}return n&&(a=r.getWindow(),nt=n.getWindow(),!a.equals(nt)&&a.$.frameElement&&(p=new e(a.$.frameElement).ir(n),u+=p.x,o+=p.y)),document.documentElement.getBoundingClientRect||i.gecko&&!h&&(u+=r.$.clientLeft?1:0,o+=r.$.clientTop?1:0),{x:u,y:o}},scrollIntoView:function(n){var i=this,r=i.getWindow(),u=r.eR().height,t=u*-1,e,f;n?t+=u:(t+=i.$.offsetHeight||0,t+=parseInt(i.getComputedStyle("marginBottom")||0,10)||0);e=i.ir();t+=e.y;t=t<0?0:t;f=r.hV().y;(t>f||t<f-u)&&r.$.scrollTo(0,t)},bR:function(t){var i=this;switch(t){case n.eV:i.addClass("cke_on");i.removeClass("cke_off");i.removeClass("cke_disabled");break;case n.aY:i.addClass("cke_disabled");i.removeClass("cke_off");i.removeClass("cke_on");break;default:i.addClass("cke_off");i.removeClass("cke_on");i.removeClass("cke_disabled")}},getFrameDocument:function(){var n=this.$;try{n.contentWindow.document}catch(t){n.src=n.src;f&&i.version<7&&window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);<\/script>")')}return n&&new c(n.contentWindow.document)},qw:function(n,t){var r=this,s=r.$.attributes,u,i,e,o;for(t=t||{},u=0;u<s.length;u++)if(i=s[u],i.specified||f&&i.nodeValue&&i.nodeName.toLowerCase()=="value"){if(e=i.nodeName,e in t)continue;o=r.getAttribute(e);o===null&&(o=i.nodeValue);n.setAttribute(e,o)}r.$.style.cssText!==""&&(n.$.style.cssText=r.$.style.cssText)},renameNode:function(n){var t=this,r,i;t.getName()!=n&&(r=t.getDocument(),i=new e(n,r),t.qw(i),t.jg(i),t.$.parentNode.replaceChild(i.$,t.$),i.$._ckf_expando=t.$._ckf_expando,t.$=i.$)},getChild:function(n){var t=this.$;if(n.slice)while(n.length>0&&t)t=t.childNodes[n.shift()];else t=t.childNodes[n];return t?new u.bi(t):null},iu:function(){return this.$.childNodes.length},hX:function(){this.on("contextmenu",function(n){n.data.bK().hasClass("cke_enable_context_menu")||n.data.preventDefault()})},toString:function(){return this.getName()+"#"+this.dS()+"."+this.getAttribute("class")}}),function(){function r(t){for(var r=0,i=0,u=n[t].length;i<u;i++)r+=parseInt(this.getComputedStyle(n[t][i])||0,10)||0;return r}var n={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};e.prototype.setSize=function(n,t,u){typeof t=="number"&&(!u||f&&i.quirks||(t-=r.call(this,n)),this.setStyle(n,t+"px"))};e.prototype.hR=function(n,i){var u=Math.max(this.$["offset"+t.capitalize(n)],this.$["client"+t.capitalize(n)])||0;return i&&(u-=r.call(this,n)),u}}();n.command=function(i,r){this.pW=[];this.exec=function(t){return this.bu==n.aY||this.readOnly===!1&&i.config.readOnly?!1:(r.oD&&i.focus(),r.exec.call(this,i,t)!==!1)};t.extend(this,r,{iH:{qt:1},oD:!0,bu:n.aS});n.event.call(this)};n.command.prototype={enable:function(){var t=this;t.bu==n.aY&&t.bR(!t.vf||typeof t.lJ=="undefined"?n.aS:t.lJ)},disable:function(){this.bR(n.aY)},bR:function(n){var t=this;return t.bu==n?!1:(t.lJ=t.bu,t.bu=n,t.oW("bu"),!0)},rJ:function(){var t=this;t.bu==n.aS?t.bR(n.eV):t.bu==n.eV&&t.bR(n.aS)}};n.event.du(n.command.prototype,!0);n.config={customConfig:n.getUrl("config.js"),connectorLanguage:"aspx",language:"",defaultLanguage:"en",defaultViewType:"thumbnails",defaultSortBy:"filename",defaultDisplayFilename:!0,defaultDisplayDate:!0,defaultDisplayFilesize:!0,pO:"",height:400,plugins:"foldertree,folder,filebrowser,container,connector,resource,search,toolbar,formpanel,filesview,status,contextmenu,uploadform,keystrokes,dragdrop,basket,dialog,tools,resize,maximize,help,mobile,html5upload,gallery,csrftokenmanager",extraPlugins:"",fileIcons:"ai|avi|bmp|cs|dll|doc|docx|exe|fla|gif|jpg|js|mdb|mp3|ogg|pdf|ppt|pptx|rdp|swf|swt|txt|vsd|xls|xlsx|xml|zip",removePlugins:"",tabIndex:0,thumbnailDelay:100,theme:"default",skin:"kama",width:"100%",baseFloatZIndex:1e4,directDownload:!1,log:!1,logStackTrace:!1,rememberLastFolder:!0,id:null,startupPath:"",startupFolderExpanded:!0,selectActionFunction:null,selectActionData:null,selectThumbnailActionFunction:null,selectThumbnailActionData:null,disableThumbnailSelection:!1,thumbsUrl:null,thumbsDirectAccess:!1,imagesMaxWidth:0,imagesMaxHeight:0,selectActionType:"js",resourceType:null,disableHelpButton:!1,connectorPath:"",connectorInfo:"",uiColor:null,showContextMenuArrow:!1,useNativeIcons:!1,maxSimultaneousUploads:1,readOnly:!1,selectMultiple:!0,popupTitle:"CKFinder 2",popupFeatures:"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes"};CKFinder.config=n.config;h=n.config;n.dU=function(n,t){this.rG=n;this.message=t};n.fs=function(n){return n.fs?n.fs:(this.hasFocus=!1,this._={application:n},this)};n.fs.prototype={focus:function(){var t=this,i;t._.fW&&clearTimeout(t._.fW);t.hasFocus||(n.nG&&n.nG.fs.ly(),i=t._.application,i.container.getFirst().addClass("cke_focus"),t.hasFocus=!0,i.oW("focus"))},blur:function(){var n=this;n._.fW&&clearTimeout(n._.fW);n._.fW=setTimeout(function(){delete n._.fW;n.ly()},100)},ly:function(){if(this.hasFocus){var n=this._.application;n.container.getFirst().removeClass("cke_focus");this.hasFocus=!1;n.oW("blur")}}},function(){n.lang={ko:{bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,eo:1,es:1,"es-mx":1,et:1,fa:1,fi:1,fr:1,gu:1,he:1,hi:1,hr:1,hu:1,it:1,ja:1,lv:1,lt:1,nb:1,nl:1,no:1,nn:1,pl:1,"pt-br":1,ro:1,ru:1,sk:1,sl:1,sr:1,sv:1,tr:1,vi:1,"zh-cn":1,"zh-tw":1},load:function(t,i,r){t&&n.lang.ko[t]||(t=this.jV(i,t));this[t]?r(t,this[t]):n.scriptLoader.load(n.getUrl("lang/"+t+".js"),function(){r(t,CKFinder.lang[t])},this)},jV:function(t,i){var u=this.ko;i=i||navigator.userLanguage||navigator.language;var f=i.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),r=f[1],e=f[2];return u[r+"-"+e]?r=r+"-"+e:u[r]||(r=null),n.lang.jV=r?function(){return r}:function(n){return n},r||t}}}(),function(){n.log=function(){var t,u,i,r;if(h.log||window.CKFINDER_LOG){for(t="",u=0;u<arguments.length;u++)if(i=arguments[u],i){t&&(t+="; ");switch(typeof i){case"function":r=/function (\w+?)\(/.exec(i.toString());r=r?r[1]:"anonymous func";t+=r;break;default:t+=i?i.toString():""}}n._.log.push(t);typeof console=="object"&&(console.log.apply?console.log.apply(console,arguments):console.log(t))}};n.ba=function(t){return h.logStackTrace&&n.log("[EXCEPTION] "+t.toString()),t};n.mZ=function(){for(var i="",t=0;t<n._.log.length;t++)i+=t+1+". "+n._.log[t]+"\n";return i};n._.log=[]}();n.scriptLoader=function(){var i={},t={};return{load:function(r,u,o,s,h,c){var y=typeof r=="string",l,d;y&&(r=[r]);o||(o=n);var a=r.length,p=[],w=[],b=function(n){u&&(y?u.call(o,n):u.call(o,p,w))};if(a===0){b(!0);return}var k=function(n,t){(t?p:w).push(n);--a<=0&&b(t)},v=function(n,r){var f,u;for(i[n]=1,f=t[n],delete t[n],u=0;u<f.length;u++)f[u](n,r)},g=function(r){var l,o;if(s!==!0&&i[r]){k(r,!0);return}(l=t[r]||(t[r]=[]),l.push(k),l.length>1)||(o=new e("script",c),o.setAttributes({type:"text/javascript",src:r}),u&&(f?o.$.onreadystatechange=function(){(o.$.readyState=="loaded"||o.$.readyState=="complete")&&(o.$.onreadystatechange=null,n.log("[LOADED] "+r),v(r,!0))}:(o.$.onload=function(){setTimeout(function(){n.log("[LOADED] "+r);v(r,!0)},0)},o.$.onerror=function(){v(r,!1)})),o.appendTo(h?h:n.document.getHead()))};for(l=0,d=a;l<d;l++)g(r[l])},uq:function(t){var i=new e("script");i.setAttribute("type","text/javascript");i.appendText(t);i.appendTo(n.document.getHead())}}}();CKFinder.scriptLoader=n.scriptLoader;n.fQ=function(n,t){var i=this;i.basePath=n;i.fileName=t;i.bX={};i.loaded={};i.jn={};i._={rZ:{}}};n.fQ.prototype={add:function(n,t){if(this.bX[n])throw'[CKFINDER.fQ.add] The resource name "'+n+'" is already bX.';this.bX[n]=t||{}},eB:function(n){return this.bX[n]||null},getPath:function(t){var i=this.jn[t];return n.getUrl(i&&i.dir||this.basePath+t+"/")},pi:function(t){var i=this.jn[t];return n.getUrl(this.getPath(t)+(i&&i.file||this.fileName+".js"))},tR:function(n,t,i){var r,u;for(n=n.split(","),r=0;r<n.length;r++)u=n[r],this.jn[u]={dir:t,file:i}},load:function(i,r,u){var s,f,o;t.isArray(i)||(i=i?[i]:[]);var c=this.loaded,a=this.bX,l=[],e={},h={};for(s=0;s<i.length;s++)(f=i[s],f)&&(c[f]||a[f]?h[f]=this.eB(f):(o=this.pi(f),l.push(o),o in e||(e[o]=[]),e[o].push(f)));n.scriptLoader.load(l,function(n,t){var i,s,f,o;if(t.length)throw'[CKFINDER.fQ.load] Resource name "'+e[t[0]].join(",")+'" was not found at "'+t[0]+'".';for(i=0;i<n.length;i++)for(s=e[n[i]],f=0;f<s.length;f++)o=s[f],h[o]=this.eB(o),c[o]=1;r.call(u,h)},this)}};n.plugins=new n.fQ("plugins/","plugin");o=n.plugins;o.load=t.override(o.load,function(n){return function(i,r,u){var f={},e=function(i){n.call(this,i,function(n){var h,c,i,o,s;t.extend(f,n);h=[];for(c in n)if(i=n[c],o=i&&i.bM,o)for(s=0;s<o.length;s++)f[o[s]]||h.push(o[s]);if(h.length)e.call(this,h);else{for(c in f)i=f[c],i.onLoad&&!i.onLoad.qK&&(i.onLoad(),i.onLoad.qK=1);r&&r.call(u||window,f)}},this)};e.call(this,i)}});o.rX=function(n,t,i){var r=this.eB(n);r.lang[t]=i},function(){var t={},i=function(n,i){var u=function(){t[n]=1;i()},r=new e("img");r.on("load",u);r.on("error",u);r.setAttribute("src",n)};n.rw={load:function(n,r){for(var f,o=n.length,e=function(){--o==0&&r()},u=0;u<n.length;u++)f=n[u],t[f]?e():i(f,e)}}}();n.skins=function(){var t={},r={},i={},u=function(f,e,o,s){var c=t[e],a,l,v,h,y;if(f.skin||(f.skin=c,c.bz&&c.bz(f)),a=function(t){for(var r=0;r<t.length;r++)t[r]=n.getUrl(i[e]+t[r])},!r[e]){if(l=c.ls,l&&l.length>0){a(l);n.rw.load(l,function(){r[e]=1;u(f,e,o,s)});return}r[e]=1}if(o=c[o],v=0,o?o.iB?o.iB[f.name]&&(v=1):o.iB=[]:v=1,v)s&&s();else{if(o.eb===undefined&&(o.eb=[]),o.eb[f.name]===undefined&&(o.eb[f.name]=[]),h=o.eb[f.name],h.push(s),h.length>1)return;var p=!o.css||!o.css.length,w=!o.js||!o.js.length,b=function(){if(p&&w){o.iB[f.name]=1;for(var n=0;n<h.length;n++)h[n]&&h[n]()}};if(!p){if(o.rr||(a(o.css),o.rr=1),o.qx)for(y=0;y<o.css.length;y++)n.oC.appendStyleSheet(o.css[y]);else f.on("themeSpace",function(n){if(n.data.space=="head")for(var t=0;t<o.css.length;t++)n.data.html+="<link rel='stylesheet' href='"+o.css[t]+"'>\n";n.removeListener()});p=1}w||(a(o.js),f.scriptLoader.load(o.js,function(){w=1;b()}));b()}};return{add:function(r,u){t[r]=u;u.fh=i[r]||(i[r]=n.getUrl("skins/"+r+"/"))},loaded:t,load:function(r,f,e){var o=r.gd,s=r.fh,h;t[o]?(u(r,o,f,e),h=t[o]):(i[o]=s,n.scriptLoader.load(s+"skin.js",function(){u(r,o,f,e)}))}}}();n.gc=new n.fQ("gc/","theme");n.bY=function(n){return n.bY?n.bY:(this._={jZ:{},items:{},application:n},this)};r=n.bY;r.prototype={add:function(n,t,i){this._.items[n]={type:t,command:i.command||null,mp:Array.prototype.slice.call(arguments,2)}},create:function(n){var i=this,t=i._.items[n],r=t&&i._.jZ[t.type],u=t&&t.command&&i._.application.cS(t.command),f=r&&r.create.apply(i,t.mp);return u&&u.pW.push(f),f},kd:function(n,t){this._.jZ[n]=t}},function(){var a=0,f=function(){var t="ckfinder"+ ++a;return n.instances&&n.instances[t]?f():t},s={},u=function(t){var i=t.config.customConfig,r;return i?(r=s[i]||(s[i]={}),r.fn?setTimeout(function(){r.fn.call(t,t.config);t.config.customConfig!=i&&u(t)||t.cr("customConfigLoaded")},0):n.scriptLoader.load(i,function(){r.fn=CKFinder.customConfig?CKFinder.customConfig:function(){};u(t)}),!0):!1},v=function(n,i){n.on("customConfigLoaded",function(){if(i){if(i.on)for(var r in i.on)n.on(r,i.on[r]);t.extend(n.config,i,!0);delete n.config.on}y(n)});i&&i.id&&(n.config.id=i.id);i&&i.customConfig!=undefined&&(n.config.customConfig=i.customConfig);u(n)||n.cr("customConfigLoaded")},y=function(i){var u=i.config.skin.split(","),r=u[0],f=n.getUrl(u[1]||"skins/"+r+"/");i.gd=r;i.fh=f;i.iy="cke_skin_"+r+" skin_"+r;i.qn=i.ox();i.on("uiReady",function(){i.document.getWindow().on("lW",function(){t.setCookie("CKFinder_UTime",Math.round((new Date).getTime()/1e3),!0);t.setCookie("CKFinder_UId",encodeURIComponent(i.id?i.id:location.href),!0)})});i.cr("configLoaded");d(i)},w=function(t,i){n.event.jP=!0;t.document.on("keydown",function(r){var u=r.data,e=u.oV(),f=u.db();if(e==116||f==n.bP+82||f==n.bP+n.dy+82){t.execCommand("refresh");i.$.event&&i.$.event.keyCode&&(i.$.event.keyCode=5055);try{r.data.preventDefault()}catch(r){}}});n.event.jP=!1},b=function(n,t,i){for(var u=[],r,f=0;f<i.length;f++)r=i[f],u.push({evt:"onbeforeunload",bi:r.bH().$,fO:r.bH().$.onbeforeunload},{evt:"onunload",bi:r.getWindow().$,fO:r.getWindow().$.onunload},{evt:"onbeforeunload",bi:r.getWindow().$,fO:r.getWindow().$.onbeforeunload});t.$.onunload=t.$.onbeforeunload=function(){for(var n=0;n<u.length;n+=1)u[n].bi[u[n].evt]=u[n].fO}},k=function(t,i){var r=[n.oC],u,f=i.$.top.location.href.match(/ckfinder.html/)||i.$.top.name=="CKFinderpopup";if(f){if(t.document.focus(),t.focus(),t.cg.inUrlPopup)try{r.push(new c(n.oC.getWindow().$.opener.document))}catch(e){}for(w(t,i),b(t,i,r),u=0;u<r.length;u+=1)r[u].bH().$.onbeforeunload=r[u].getWindow().$.onunload=r[u].getWindow().$.onbeforeunload=function(){var n=t.element&&t.element.getDocument().getWindow().$;n.closed||n.close()}}},d=function(r){n.lang.load(r.config.language,r.config.defaultLanguage,function(n,u){r.langCode=n;r.lang=t.prototypedCopy(u);r.lB=function(){var t="['"+r.lang.DateAmPm.join("','")+"']",n=r.lang.DateTime.replace(/dd|mm|yyyy|hh|HH|MM|aa|d|m|yy|h|H|M|a/g,function(n){var i;switch(n){case"d":i="day.replace(/^0/,'')";break;case"dd":i="day";break;case"m":i="month.replace(/^0/,'')";break;case"mm":i="month";break;case"yy":i="year.substr(2)";break;case"yyyy":i="year";break;case"H":i="hour.replace(/^0/,'')";break;case"HH":i="hour";break;case"h":i="( hour < 12 ? hour : ( ( hour - 12 ) + 100 ).toString().substr( 1 ) ).replace(/^0/,'')";break;case"hh":i="( hour < 12 ? hour : ( ( hour - 12 ) + 100 ).toString().substr( 1 ) )";break;case"M":i="minute.replace(/^0/,'')";break;case"MM":i="minute";break;case"a":i=t+"[ hour < 12 ? 0 : 1 ].charAt(0)";break;case"aa":i=t+"[ hour < 12 ? 0 : 1 ]";break;default:i="'"+n+"'"}return"',"+i+",'"});return n="'"+n+"'",n=n.replace(/('',)|,''$/g,""),new Function("day","month","year","hour","minute","return ["+n+"].join('');")}();i.gecko&&i.version<10900&&r.lang.dir=="rtl"&&(r.lang.dir="ltr");g(r)})},g=function(i){var f=i.config,r=f.plugins,e=f.extraPlugins,s=f.removePlugins,u;e&&(u=new RegExp("(?:^|,)(?:"+e.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),r=r.replace(u,"")+(","+e));s&&(u=new RegExp("(?:^|,)(?:"+s.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),r=r.replace(u,""));o.load(r.split(","),function(r){var s=[],h=[],l=[],u;if(i.config.readOnly)for(u in r)r[u].readOnly===!1&&delete r[u];i.plugins=r;for(u in r){var e=r[u],c=e.lang,a=o.getPath(u),f=null;r[u].name=u;e.pathName=a;c&&(f=t.indexOf(c,i.langCode)>=0?i.langCode:c[0],e.lang[f]?(t.extend(i.lang,e.lang[f]),f=null):l.push(n.getUrl(a+"lang/"+f+".js")));h.push(f);s.push(e)}n.scriptLoader.load(l,function(){for(var u,f,e=["eK","bz","gr"],r=0;r<e.length;r++)for(u=0;u<s.length;u++)f=s[u],r===0&&h[u]&&f.lang&&t.extend(i.lang,f.lang[h[u]]),f[e[r]]&&(n.log("[PLUGIN] "+f.name+"."+e[r]),f[e[r]](i));i.oW("pluginsLoaded");nt(i)})})},nt=function(t){n.skins.load(t,"application",function(){n.skins.load(t,"host",function(){tt(t)})})},tt=function(t){var i=t.config.theme;n.gc.load(i,function(){var r=t.theme=n.gc.eB(i);r.pathName=n.gc.getPath(i);t.oW("themeAvailable")})};n.application.prototype.iI=function(i){var u=e.eB(this._.element),o=this._.instanceConfig;if(delete this._.element,delete this._.instanceConfig,this._.ky={},this._.gS=[],u.getDocument().getWindow().$.CKFinder=i,this.element=u,this.document=null,this.rQ={},this.name=f(),this.name in n.instances)throw'[CKFINDER.application] The instance "'+this.name+'" already exists.';this.config=t.prototypedCopy(h);this.bY=new r(this);this.fs=new n.fs(this);this.aL={};this.ld={};this.on("uiReady",function(){var n=this,t=n.document.getWindow();t.on("lW",n.destroy,n);n.cg.inPopup&&k(n,t)},this);this.cg=new l(this);this.on("configLoaded",function(){var n=this;p(n.cg,n,n.config.callback);n.id=n.config.id},this);v(this,o);n.oW("instanceCreated",null,this)}}();t.extend(n.application.prototype,{bD:function(t,i){return this._.ky[t]=new n.command(this,i)},destroy:function(){var t=this;t.theme.destroy(t);t.oW("destroy");n.remove(t)},execCommand:function(t,i){n.log("[COMMAND] "+t);var r=this.cS(t),u={name:t,rm:i,command:r};return r&&r.bu!=n.aY&&this.oW("beforeCommandExec",u)!==!0&&(u.returnValue=r.exec(u.rm),!r.async&&this.oW("afterCommandExec",u)!==!0)?u.returnValue:!1},cS:function(n){return this._.ky[n]},ox:function(){var r=Math.round((new Date).getTime()/1e3),n=t.getCookie("CKFinder_UTime"),i=decodeURIComponent(t.getCookie("CKFinder_UId"));return i&&n&&i==(this.id?this.id:location.href)&&Math.abs(r-n)<5?1:0},bs:""}),function(){for(var i="",t=49;t<58;t++)i+=String.fromCharCode(t);for(t=65;t<91;t++)t!=73&&t!=79&&(i+=String.fromCharCode(t));n.bs=i;n.nd="lo";n.jG="\150\x6f";n.hf=new window.RegExp("\136\x77\x77\x77\134\x2e");n.hg=new window.RegExp("\x3a\134\144\053\044");n.lS=function(t){return t.toLowerCase().replace(n.hf,"").replace(n.hg,"")}}();n.on("loaded",function(){var i=n.application.eb,t;if(i)for(delete n.application.eb,t=0;t<i.length;t++)i[t].iI()});if(delete n.dO,n.instances={},n.document=new c(document),n.oC=n.document.getWindow().$!=n.document.getWindow().$.top?new c(n.document.getWindow().$.top.document):n.document,n.add=function(t){n.instances[t.name]=t;n.jt=t;t.on("focus",function(){n.nG!=t&&(n.nG=t,n.oW("nG"))});t.on("blur",function(){n.nG==t&&(n.nG=null,n.oW("nG"))})},n.remove=function(t){delete n.instances[t.name]},n.aL={},n.eV=1,n.aS=2,n.aY=0,n.bF="",function(){function r(n,t){return n+"."+(t.name||t||n)}n.ld={bX:{},hS:function(t,u,f){var e=r(t,u);if(this.bX[e]!==undefined)throw"[CKFINDER] Widget "+e+" already bX!";return n.log("[WIDGET] bX "+e),this.bX[e]=new i(e,f),this.bX[e]},bz:function(i,u,f,o,s){var c=r(u,f),a=this.bX[c],v=t.deepCopy(a.hF),y=function(n,i,r){var o,u,f;if(this.app=n,this.eh=i instanceof e?i:new e(i),this.hF=v?t.extend(v,r):r||{},this._={},o=function(n){this.ib=n},o.prototype=this.tools,this.tools=new o(this),u=a.dT,u.length)for(f=0;f<u.length;f++)u[f].call(this,n,this)},h,l;y.prototype=a;h=new y(i,o,s);for(l in h.fw)h.fw[l].readOnly&&i.config.readOnly?h.ke(l):h.gA(l);if(i.ld[c])throw"[CKFINDER Widget "+c+" already initiated.";return i.ld[c]=h,n.log("[WIDGET] instanced "+c),h}};var u={click:1,mouseover:1,mouseout:1,focus:1,blur:1,submit:1,dblclick:1,mousedown:1,mouseup:1,mousemove:1,keypress:1,keydown:1,keyup:1,load:1,lW:1,abort:1,error:1,resize:1,scroll:1,select:1,change:1,reset:1},i=function(n,t){var i=this;i.id=n;i.readOnly=!0;i.fw={};i.hF=t||{};i.dT=[];i.tools=new i.tools(i)};i.prototype={gA:function(t){var r=this,i,e,o,f;if(n.log("[WIDGET] Enabling behavior "+t),i=r.fw[t],i)for(e=r,o=0;o<i.cC.length;o++)if(f=i.cC[o],u[f])r.eh.on(f,i.fO,e);else{r.on(f,i.fO,e);r.app.on(f,i.fO,e)}},ke:function(t){var i,r,f;if(n.log("[WIDGET] Disabling behavior "+t),i=this.fw[t],i)for(r=0;r<i.cC.length;r++)f=i.cC[r],u[f]?this.eh.removeListener(f,i.fO):this.removeListener(f,i.fO)},bh:function(n,i,r,u){t.isArray(i)||(i=[i]);this.fw[n]={cC:i,fO:r,readOnly:u===!1};this.eh&&this.gA(n)},removeBehavior:function(n){delete this.fw[n]},ur:function(){return this.fw},bn:function(){return this.eh},oE:function(){return this.hF},data:function(){return this.hF},tools:function(){}};i.prototype.tools.prototype={kg:function(n){if(n.target==this.ib.eh)return 1}};n.event.du(i.prototype)}(),n.xml=function(n){var t=null,i;if(typeof n=="object")t=n;else if(i=(n||"").replace(/&nbsp;/g," "),window.DOMParser)t=(new DOMParser).parseFromString(i,"text/xml");else if(window.ActiveXObject){try{t=new ActiveXObject("MSXML2.DOMDocument")}catch(r){try{t=new ActiveXObject("Microsoft.XmlDom")}catch(r){}}t&&(t.async=!1,t.resolveExternals=!1,t.validateOnParse=!1,t.loadXML(i))}this.mq=t},n.xml.prototype={selectSingleNode:function(n,t){var u=this.mq,r,i;if(t||(t=u)){if("selectSingleNode"in t)return t.selectSingleNode(n);if(u.evaluate)return i=u.evaluate(n,t,null,9,null),i&&i.singleNodeValue||null;if(t.querySelectorAll){if(r=this.selectNodes(n,t),r.length==1)return i=n.match(/\/@(.*$)/),i?r[0].getAttributeNode(i[1]):r[0]}else alert("XPath is not supported in your browser")}return null},selectNodes:function(n,t){var i=this.mq,u=[],r,f,e;if(t||(t=i)){if("selectNodes"in t)return t.selectNodes(n);if(i.evaluate){if(r=i.evaluate(n,t,null,5,null),r)while(f=r.iterateNext())u.push(f)}else{if(t.querySelectorAll)return e=n.replace(/\/@(.*$)/,"[$1]").replace(/\//gi,">"),t.querySelectorAll(e);alert("XPath is not supported in your browser")}}return u},vB:function(n,t){var i=this.selectSingleNode(n,t),r=[];if(i)for(i=i.firstChild;i;)i.xml?r.push(i.xml):window.XMLSerializer&&r.push((new XMLSerializer).serializeToString(i)),i=i.nextSibling;return r.length?r.join(""):null}},function(){var t={address:1,tY:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,de:1},i={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1},r=function(t){for(var r,u=t.getChildren(),i=0,f=u.count();i<f;i++)if(r=u.getItem(i),r.type==n.cv&&n.ga.um[r.getName()])return!0;return!1};u.qS=function(u){for(var s=this,h=null,c=null,l=[],e=u,o;e;){if(e.type==n.cv&&(s.qH||(s.qH=e),o=e.getName(),f&&e.$.scopeName!="HTML"&&(o=e.$.scopeName.toLowerCase()+":"+o),c||(!h&&t[o]&&(h=e),i[o]&&(h||o!="div"||r(e)?c=e:h=e)),l.push(e),o=="body"))break;e=e.getParent()}s.block=h;s.tX=c;s.elements=l}}(),u.qS.prototype={sJ:function(n){var i=this.elements,r=n&&n.elements,t;if(!r||i.length!=r.length)return!1;for(t=0;t<i.length;t++)if(!i[t].equals(r[t]))return!1;return!0}},u.text=function(n,t){typeof n=="string"&&(n=(t?t.$:document).createTextNode(n));this.$=n},u.text.prototype=new u.bi,t.extend(u.text.prototype,{type:n.fl,hJ:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},split:function(n){var t=this,r,e,o,s;return f&&n==t.hJ()?(r=t.getDocument().jT(""),r.kB(t),r):(e=t.getDocument(),o=new u.text(t.$.splitText(n),e),i.ie8&&(s=new u.text("",e),s.kB(o),s.remove()),o)},substring:function(n,t){return typeof t!="number"?this.$.nodeValue.substr(n):this.$.nodeValue.substring(n,t)}}),u.pa=function(t){t=t||n.document;this.$=t.$.createDocumentFragment()},t.extend(u.pa.prototype,e.prototype,{type:n.om,kA:function(n){n=n.$;n.parentNode.insertBefore(this.$,n.nextSibling)}},!0,{append:1,pd:1,getFirst:1,dB:1,appendTo:1,jg:1,insertBefore:1,kA:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,iu:1,getChild:1,getChildren:1}),function(){function i(t,i){var o,s,h,c,l;if(this._.end)return null;var r,u=this.mk,f,a=this.vR,e=this.type,v=t?"getPreviousSourceNode":"getNextSourceNode";if(!this._.start&&(this._.start=1,u.trim(),u.collapsed))return this.end(),null;for(t||this._.kp||(o=u.endContainer,s=o.getChild(u.endOffset),this._.kp=function(t,i){return(!i||!o.equals(t))&&(!s||!t.equals(s))&&(t.type!=n.cv||t.getName()!="body")}),t&&!this._.ka&&(h=u.startContainer,c=u.startOffset>0&&h.getChild(u.startOffset-1),this._.ka=function(t,i){return(!i||!h.equals(t))&&(!c||!t.equals(c))&&(t.type!=n.cv||t.getName()!="body")}),l=t?this._.ka:this._.kp,f=a?function(n,t){return l(n,t)===!1?!1:a(n)}:l,this.current?r=this.current[v](!1,e,f):t?(r=u.endContainer,u.endOffset>0?(r=r.getChild(u.endOffset-1),f(r)===!1&&(r=null)):r=f(r)===!1?null:r.hZ(!0,e,f)):(r=u.startContainer,r=r.getChild(u.startOffset),r?f(r)===!1&&(r=null):r=f(u.startContainer)===!1?null:u.startContainer.hL(!0,e,f));r&&!this._.end;){if(this.current=r,this.lf&&this.lf(r)===!1){if(i&&this.lf)return!1}else if(!i)return r;r=r[v](!1,e,f)}return this.end(),this.current=null}function r(n){for(var t,r=null;t=i.call(this,n);)r=t;return r}u.gm=t.createClass({$:function(n){this.mk=n;this._={}},ej:{end:function(){this._.end=1},next:function(){return i.call(this)},previous:function(){return i.call(this,!0)},sC:function(){return i.call(this,!1,!0)!==!1},sD:function(){return i.call(this,!0,!0)!==!1},uF:function(){return r.call(this)},uB:function(){return r.call(this,!0)},reset:function(){delete this.current;this._={}}}});var f={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},o={hr:1};e.prototype.qy=function(n){var i=t.extend({},o,n||{});return f[this.getComputedStyle("display")]||i[this.getName()]};u.gm.pQ=function(t){return function(i){return!(i.type==n.cv&&i.qy(t))}};u.gm.us=function(){return this.pQ({br:1})};u.gm.tU=function(){};u.gm.tW=function(n,t){function i(n){return n&&n.getName&&n.getName()=="span"&&n.hasAttribute("_fck_bookmark")}return function(r){var u,f;return u=r&&!r.getName&&(f=r.getParent())&&i(f),u=n?u:u||i(r),t^u}};u.gm.sf=function(i){return function(r){var u=r&&r.type==n.fl&&!t.trim(r.getText());return i^u}}}(),function(){if(i.webkit){i.hc=!1;return}var t=e.kE('<div style="width:0px;height:0px;position:absolute;left:-10000px;border:1px solid;border-color:red blue;"><\/div>',n.document);t.appendTo(n.document.getHead());try{i.hc=t.getComputedStyle("border-top-color")==t.getComputedStyle("border-right-color")}catch(r){i.hc=!1}i.hc&&(i.cssClass+=" cke_hc");t.remove()}(),o.load(h.pO.split(","),function(){var t,i;if(n.status="loaded",n.oW("loaded"),t=n._.io,t)for(delete n._.io,i=0;i<t.length;i++)n.add(t[i])}),f)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(w){}CKFinder.lang.en={appTitle:"CKFinder",common:{unavailable:'%1<span class="cke_accessibility">, unavailable<\/span>',confirmCancel:"Some of the options were changed. Are you sure you want to close the dialog window?",ok:"OK",cancel:"Cancel",confirmationTitle:"Confirmation",messageTitle:"Information",inputTitle:"Question",undo:"Undo",redo:"Redo",skip:"Skip",skipAll:"Skip all",makeDecision:"What action should be taken?",rememberDecision:"Remember my decision"},dir:"ltr",HelpLang:"en",LangCode:"en",DateTime:"m/d/yyyy h:MM aa",DateAmPm:["AM","PM"],FoldersTitle:"Folders",FolderLoading:"Loading...",FolderNew:"Please type the new folder name: ",FolderRename:"Please type the new folder name: ",FolderDelete:'Are you sure you want to delete the "%1" folder?',FolderRenaming:" (Renaming...)",FolderDeleting:" (Deleting...)",DestinationFolder:"Destination Folder",FileRename:"Please type the new file name: ",FileRenameExt:"Are you sure you want to change the file extension? The file may become unusable.",FileRenaming:"Renaming...",FileDelete:'Are you sure you want to delete the file "%1"?',FilesDelete:"Are you sure you want to delete %1 files?",FilesLoading:"Loading...",FilesEmpty:"The folder is empty.",DestinationFile:"Destination File",SkippedFiles:"List of skipped files:",BasketFolder:"Basket",BasketClear:"Clear Basket",BasketRemove:"Remove from Basket",BasketOpenFolder:"Open Parent Folder",BasketTruncateConfirm:"Do you really want to remove all files from the basket?",BasketRemoveConfirm:'Do you really want to remove the file "%1" from the basket?',BasketRemoveConfirmMultiple:"Do you really want to remove %1 files from the basket?",BasketEmpty:"No files in the basket, drag and drop some.",BasketCopyFilesHere:"Copy Files from Basket",BasketMoveFilesHere:"Move Files from Basket",OperationCompletedSuccess:"Operation completed successfully.",OperationCompletedErrors:"Operation completed with errors.",FileError:"%s: %e",MovedFilesNumber:"Number of files moved: %s.",CopiedFilesNumber:"Number of files copied: %s.",MoveFailedList:"The following files could not be moved:<br />%s",CopyFailedList:"The following files could not be copied:<br />%s",Upload:"Upload",UploadTip:"Upload New File",Refresh:"Refresh",Settings:"Settings",Help:"Help",HelpTip:"Help",Select:"Select",SelectThumbnail:"Select Thumbnail",View:"View",Download:"Download",NewSubFolder:"New Subfolder",Rename:"Rename",Delete:"Delete",DeleteFiles:"Delete Files",CopyDragDrop:"Copy Here",MoveDragDrop:"Move Here",RenameDlgTitle:"Rename",NewNameDlgTitle:"New Name",FileExistsDlgTitle:"File Already Exists",SysErrorDlgTitle:"System Error",FileOverwrite:"Overwrite",FileAutorename:"Auto-rename",ManuallyRename:"Manually rename",OkBtn:"OK",CancelBtn:"Cancel",CloseBtn:"Close",UploadTitle:"Upload New File",UploadSelectLbl:"Select a file to upload",UploadProgressLbl:"(Upload in progress, please wait...)",UploadBtn:"Upload Selected File",UploadBtnCancel:"Cancel",UploadNoFileMsg:"Please select a file from your computer.",UploadNoFolder:"Please select a folder before uploading.",UploadNoPerms:"File upload not allowed.",UploadUnknError:"Error sending the file.",UploadExtIncorrect:"File extension not allowed in this folder.",UploadLabel:"Files to Upload",UploadTotalFiles:"Total Files:",UploadTotalSize:"Total Size:",UploadSend:"Upload",UploadAddFiles:"Add Files",UploadClearFiles:"Clear Files",UploadCancel:"Cancel Upload",UploadRemove:"Remove",UploadRemoveTip:"Remove !f",UploadUploaded:"Uploaded !n%",UploadProcessing:"Processing...",SetTitle:"Settings",SetView:"View:",SetViewThumb:"Thumbnails",SetViewList:"List",SetDisplay:"Display:",SetDisplayName:"File Name",SetDisplayDate:"Date",SetDisplaySize:"File Size",SetSort:"Sorting:",SetSortName:"by File Name",SetSortDate:"by Date",SetSortSize:"by Size",SetSortExtension:"by Extension",FilesCountEmpty:"<Empty Folder>",FilesCountOne:"1 file",FilesCountMany:"%1 files",Kb:"%1 KB",Mb:"%1 MB",Gb:"%1 GB",SizePerSecond:"%1/s",ErrorUnknown:"It was not possible to complete the request. (Error %1)",Errors:{10:"Invalid command.",11:"The resource type was not specified in the request.",12:"The requested resource type is not valid.",102:"Invalid file or folder name.",103:"It was not possible to complete the request due to authorization restrictions.",104:"It was not possible to complete the request due to file system permission restrictions.",105:"Invalid file extension.",109:"Invalid request.",110:"Unknown error.",111:"It was not possible to complete the request due to resulting file size.",115:"A file or folder with the same name already exists.",116:"Folder not found. Please refresh and try again.",117:"File not found. Please refresh the files list and try again.",118:"Source and target paths are equal.",201:'A file with the same name is already available. The uploaded file was renamed to "%1".',202:"Invalid file.",203:"Invalid file. The file size is too big.",204:"The uploaded file is corrupt.",205:"No temporary folder is available for upload in the server.",206:"Upload cancelled due to security reasons. The file contains HTML-like data.",207:'The uploaded file was renamed to "%1".',300:"Moving file(s) failed.",301:"Copying file(s) failed.",500:"The file browser is disabled for security reasons. Please contact your system administrator and check the CKFinder configuration file.",501:"The thumbnails support is disabled."},ErrorMsg:{FileEmpty:"The file name cannot be empty.",FileExists:"File %s already exists.",FolderEmpty:"The folder name cannot be empty.",FolderExists:"Folder %s already exists.",FolderNameExists:"Folder already exists.",FileInvChar:'The file name cannot contain any of the following characters: \n\\ / : * ? " < > |',FolderInvChar:'The folder name cannot contain any of the following characters: \n\\ / : * ? " < > |',PopupBlockView:"It was not possible to open the file in a new window. Please configure your browser and disable all popup blockers for this site.",XmlError:"It was not possible to properly load the XML response from the web server.",XmlEmpty:"It was not possible to load the XML response from the web server. The server returned an empty response.",XmlRawResponse:"Raw response from the server: %s"},Imageresize:{dialogTitle:"Resize %s",sizeTooBig:"Cannot set image height or width to a value bigger than the original size (%size).",resizeSuccess:"Image resized successfully.",thumbnailNew:"Create a new thumbnail",thumbnailSmall:"Small (%s)",thumbnailMedium:"Medium (%s)",thumbnailLarge:"Large (%s)",newSize:"Set a new size",width:"Width",height:"Height",invalidHeight:"Invalid height.",invalidWidth:"Invalid width.",invalidName:"Invalid file name.",newImage:"Create a new image",noExtensionChange:"File extension cannot be changed.",imageSmall:"Source image is too small.",contextMenuName:"Resize",lockRatio:"Lock ratio",resetSize:"Reset size"},Fileeditor:{save:"Save",fileOpenError:"Unable to open file.",fileSaveSuccess:"File saved successfully.",contextMenuName:"Edit",loadingFile:"Loading file, please wait..."},Maximize:{maximize:"Maximize",minimize:"Minimize"},Gallery:{current:"Image {current} of {total}"},Zip:{extractHereLabel:"Extract here",extractToLabel:"Extract to...",downloadZipLabel:"Download as zip",compressZipLabel:"Compress to zip",removeAndExtract:"Remove existing and extract",extractAndOverwrite:"Extract overwriting existing files",extractSuccess:"File extracted successfully."},Search:{searchPlaceholder:"Search"}},function(){var t=1,i=2,r=4,u=8,f=16,e=32,s=64,h=128;n.aL.Acl=function(n){var o=this;n||(n=0);o.folderView=(n&t)==t;o.folderCreate=(n&i)==i;o.folderRename=(n&r)==r;o.folderDelete=(n&u)==u;o.fileView=(n&f)==f;o.fileUpload=(n&e)==e;o.fileRename=(n&s)==s;o.fileDelete=(n&h)==h};o.add("acl")}(),function(){o.add("connector",{bM:["csrftokenmanager"],bz:function(i){i.on("appReady",function(){i.connector=new n.aL.Connector(i);var r=i.config.resourceType,u=r?{type:r}:null;i.connector.sendCommand("Init",u,function(r){var u,f,s,e;r.checkError()||(f="\x43\157\x6e\x6e\x65\143\164\157\x72\057\103\157\156\x6e\x65\x63\164\157\162\111\156\x66\157\057",n.ed=r.selectSingleNode(f+"\x40\163").value,n.bF=r.selectSingleNode(f+"\100\143").value+"----",i.config.thumbsEnabled=r.selectSingleNode(f+"\100\x74\150\x75\155\142\163\105\156\x61\142\154\x65\x64").value=="true",i.config.thumbsDirectAccess=!1,i.config.thumbsEnabled?(u=r.selectSingleNode(f+"\100\x74\150\165\x6d\x62\163\x55\162\x6c"),u&&(i.config.thumbsUrl=u.value),u=r.selectSingleNode(f+"\x40\164\150\x75\155\x62\163\104\151\162\x65\143\x74\101\x63\x63\145\x73\163"),u&&(i.config.thumbsDirectAccess=u.value=="true"),u=r.selectSingleNode(f+"\100\x74\x68\165\155\x62\x73\x57\151\144\164\150"),i.config.thumbsWidth=(u?parseInt(u.value,10):100)||100,u=r.selectSingleNode(f+"\x40\164\150\x75\x6d\142\163\x48\145\151\x67\150\x74"),i.config.thumbsHeight=(u?parseInt(u.value,10):100)||100):(i.config.thumbsWidth=100,i.config.thumbsHeight=100),i.config.imagesMaxWidth=parseInt(r.selectSingleNode(f+"\100\x69\155\x67\x57\x69\x64\x74\150").value,10),i.config.imagesMaxHeight=parseInt(r.selectSingleNode(f+"\x40\x69\155\147\x48\145\151\147\x68\164").value,10),u=r.selectSingleNode(f+"\x40\165\x70\x6c\x6f\x61\x64\x4d\141\170\x53\151\x7a\145"),i.config.uploadMaxSize=u?parseInt(u.value,10):0,u=r.selectSingleNode(f+"\x40\x75\160\x6c\x6f\x61\x64\x43\150\145\x63\153\x49\x6d\x61\x67\145\x73"),i.config.uploadCheckImages=u?u.value=="true":!1,u=r.selectSingleNode(f+"\x40\143\x73\x72\x66\x50\162\x6f\164\x65\143\164\151\157\x6e"),i.config.csrfProtection=u?u.value=="true":!1,s=r.selectSingleNode(f+"\x40\x70\x6c\x75\147\151\156\163"),e=s&&s.value,e&&e.length?o.load(e.split(","),function(u){var h=[],c=[],a=[];for(var f in u){var s=u[f],l=s.lang,v=o.getPath(f),e=null;if(i.plugins[f])continue;else i.plugins[f]=u[f];u[f].name=f;s.pathName=v;l&&(e=t.indexOf(l,i.langCode)>=0?i.langCode:l[0],s.lang[e]?(t.extend(i.lang,s.lang[e]),e=null):a.push(n.getUrl(v+"lang/"+e+".js")));c.push(e);h.push(s)}n.scriptLoader.load(a,function(){for(var f,e,o=["eK","bz","gr"],u=0;u<o.length;u++)for(f=0;f<h.length;f++)e=h[f],u===0&&c[f]&&e.lang&&t.extend(i.lang,e.lang[c[f]]),e[o[u]]&&(n.log("[PLUGIN] "+e.name+"."+o[u]),e[o[u]](i));i.cr("uiReady");i.cr("appReady");i.oW("pluginsLoaded",{step:2,jN:i.connector});i.cr("connectorInitialized",{xml:r})})}):(i.oW("pluginsLoaded",{step:2,jN:i.connector}),i.cr("connectorInitialized",{xml:r})))})})}});n.aL.Connector=function(t){this.app=t;var i=t.config.connectorLanguage||"aspx";this.oN=t.config.connectorPath?t.config.connectorPath:n.basePath+"core/connector/"+i+"/connector."+i};n.aL.Connector.prototype={ERROR_NONE:0,ERROR_CUSTOMERROR:1,ERROR_INVALIDCOMMAND:10,ERROR_TYPENOTSPECIFIED:11,ERROR_INVALIDTYPE:12,ERROR_INVALIDNAME:102,ERROR_UNAUTHORIZED:103,ERROR_ACCESSDENIED:104,ERROR_INVALIDEXTENSION:105,ERROR_INVALIDREQUEST:109,ERROR_UNKNOWN:110,ERROR_ALREADYEXIST:115,ERROR_FOLDERNOTFOUND:116,ERROR_FILENOTFOUND:117,ERROR_SOURCE_AND_TARGET_PATH_EQUAL:118,ERROR_UPLOADEDFILERENAMED:201,ERROR_UPLOADEDINVALID:202,ERROR_UPLOADEDTOOBIG:203,ERROR_UPLOADEDCORRUPT:204,ERROR_UPLOADEDNOTMPDIR:205,ERROR_UPLOADEDWRONGHTMLFILE:206,ERROR_UPLOADEDINVALIDNAMERENAMED:207,ERROR_MOVE_FAILED:300,ERROR_COPY_FAILED:301,ERROR_CONNECTORDISABLED:500,ERROR_THUMBNAILSDISABLED:501,currentFolderUrl:function(){if(this.app.aV)return this.app.aV.getUrl()},currentType:function(){if(this.app.aV)return this.app.aV.type},currentTypeHash:function(){if(this.app.aV)return n.getResourceType(this.app.aV.type).hash},currentResourceType:function(){return n.getResourceType(this.currentType())},sendCommand:function(r,u,f,e,o){var h=this.composeUrl(r,u,e,o),s=this;return f?n.ajax.loadXml(h,function(n){n.hy=s.app;s.app.oW("connectorResponse",{xml:n});f(t.extend(n,i))}):n.ajax.loadXml(h,function(n){s.app.oW("connectorResponse",{xml:n})})},sendCommandPost:function(r,u,f,e,o,s){var c=this.composeUrl(r,u,o,s),h=this;return f||(f={}),f.ckCsrfToken=n.getCsrfToken(),f.CKFinderCommand=!0,e?n.ajax.loadXml(c,function(n){n.hy=h.app;h.app.oW("connectorResponse",{xml:n});e(t.extend(n,i))},this.composeUrlParams(f)):n.ajax.loadXml(c,function(n){h.app.oW("connectorResponse",{xml:n})},this.composeUrlParams(f))},composeUrl:function(n,t,i,r){var u=this,f=u.oN+"?command="+encodeURIComponent(n),e,o;return n!="Init"&&(e="",r||(r=u.app.aV),e=i?u.app.getResourceType(i).hash:u.app.getResourceType(r.type).hash,f+="&type="+encodeURIComponent(i||u.app.aV.type)+"&currentFolder="+encodeURIComponent(r.getPath()||"")+"&langCode="+u.app.langCode+"&hash="+e),t&&(o=u.composeUrlParams(t),o&&(f+="&"+o)),u.app.id&&(f+="&id="+encodeURIComponent(u.app.id)),u.app.config.connectorInfo&&(f+=(u.app.config.connectorInfo.charAt(0)!="&"?"&":"")+u.app.config.connectorInfo),f},composeUrlParams:function(n){var t,i;if(!n)return"";t="";for(i in n)t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(n[i]);return t}};var i={checkError:function(){var r=this,t=r.getErrorNumber(),f=r.hy.connector,e,i,u,o;if(t==f.ERROR_NONE)return!1;if(t===-1)return!0;if(e=r.getErrorMessage(),n.log("[ERROR] "+t),t==f.ERROR_CUSTOMERROR)i=e;else if(i=r.hy.lang.Errors[t],i)for(u=0;u<=arguments.length;u++)o=u===0?e:arguments[u-1],i=i.replace(/%(\d+)/,o);else i=r.hy.lang.ErrorUnknown.replace(/%1/,t);return r.hy.msgDialog("",i),t!=f.ERROR_UPLOADEDFILERENAMED},getErrorNumber:function(){var n=this.selectSingleNode&&this.selectSingleNode("Connector/Error/@number");return n?parseInt(n.value,10):-1},getErrorMessage:function(){var n=this.selectSingleNode&&this.selectSingleNode("Connector/Error/@text");return n?n.value:""}}}();o.add("resource",{bM:["connector"],bz:function(t){t.resourceTypes=[];t.on("connectorInitialized",function(i){for(var r,f=i.data.xml.selectNodes("Connector/ResourceTypes/ResourceType"),u=0;u<f.length;u++)r=f[u].attributes,t.resourceTypes.push(new n.aL.ResourceType(t,{name:r.getNamedItem("name").value,url:r.getNamedItem("url").value,hasChildren:r.getNamedItem("hasChildren").value,allowedExtensions:r.getNamedItem("allowedExtensions").value,deniedExtensions:r.getNamedItem("deniedExtensions").value,acl:r.getNamedItem("acl").value,hash:r.getNamedItem("hash").value,maxSize:r.getNamedItem("maxSize").value}));t.cr("resourcesReceived",{hK:t.resourceTypes})});t.getResourceType=function(n){for(var i,t=0;t<this.resourceTypes.length;t++)if(i=this.resourceTypes[t],i.name==n)return i;return null}}}),function(){function t(n){var r={},i,t;if(n.length>0)for(i=n.toLowerCase().split(","),t=0;t<i.length;t++)r[i[t]]=!0;return r}n.aL.ResourceType=function(n,i){var r=this;r.app=n;r.name=i.name;r.url=i.url;r.hasChildren=i.hasChildren==="true";r.defaultView="Thumbnails";r.allowedExtensions=i.allowedExtensions;r.deniedExtensions=i.deniedExtensions;r.oT=t(i.allowedExtensions);r.ms=t(i.deniedExtensions);r.nS=i.acl;r.hash=i.hash;r.maxSize=i.maxSize};n.aL.ResourceType.prototype={isExtensionAllowed:function(n){var t=this;return n=n.toLowerCase(),(t.deniedExtensions.length===0||!t.ms[n])&&(t.allowedExtensions.length===0||!!t.oT[n])},allowedExtensions:function(){return this.allowedExtensions},getRootFolder:function(){for(var t,n=0;n<this.app.folders.length;n++)if(t=this.app.folders[n],t.isRoot&&t.type==this.name)return t;return undefined}}}(),function(){var n=function(n){this.app=n};n.prototype.er=function(n,i){var r=this;if(!r.id){r.toolbarId="cke_"+t.getNextNumber();r.id="cke_"+t.getNextNumber();r.placeholderId="cke_"+t.getNextNumber();var u={id:r.id,placeholderId:r.placeholderId,lastTimeout:-1,app:n},f=t.addFunction(n.search.doSearch,u),e=t.addFunction(n.search.onFocus,u);i.push('<span class="cke_search_box" id="',r.toolbarId,'" class="cke_toolbar" role="presentation"><span class="cke_toolbar_start"><\/span>');i.push('<input id="'+r.id+'" ');i.push(' onkeyup="window.parent.CKFinder._.callFunction(',f,', this);"');i.push(' oninput="window.parent.CKFinder._.callFunction(',f,', this);"');i.push(' onfocus="window.parent.CKFinder._.callFunction(',e,', this);"');i.push(">");i.push('<span id="'+r.placeholderId+'" class="cke_search_placeholder" onclick="window.parent.CKFinder._.callFunction(',e,', this);">'+n.lang.Search.searchPlaceholder+"<\/span>");i.push('<span class="cke_toolbar_end"><\/span><\/span>')}};n.prototype.doSearch=function(){var i=this.app.ld["filesview.filesview"].oE().shownFiles.length,n=this.app.document.getById(this.id).getValue(),t=this.app;this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=null);i<200?t.ld["filesview.filesview"].oW("requestRenderFiles",{lookup:n}):this.lastTimeout=setTimeout(function(){t.ld["filesview.filesview"].oW("requestRenderFiles",{lookup:n})},1e3)};n.prototype.onFocus=function(){var n=this;n.app.document.getById(n.placeholderId).setStyle("display","none");n.app.document.getById(n.id).$.focus()};n.prototype.reset=function(){var n=this;n.app.document.getById(n.id).setValue("");n.app.document.getById(n.placeholderId).setStyle("display","inline")};o.add("search",{bM:["foldertree"],eK:function(t){t.search=new n(t)},bz:function(n){n.on("appReady",function(){n.ld["foldertree.foldertree"].on("beforeSelectFolder",function(){n.search.reset()});n.ld["formpanel.formpanel"].on("afterUploadFile",function(){n.search.reset()})})}})}(),function(){function f(t,i,r,u,f){t.childFolders===null&&(t.childFolders=[]);var e=new n.aL.Folder(t.app,i,r,u,f);return e.parent=t,e.nh=t.isRoot?0:t.nh+1,t.childFolders.push(e),e}function i(n){return n.folders||(n.folders=[]),n.folders}function r(t,i){if(!t||t.length===0)throw new n.dU("name_empty",i.lang.ErrorMsg.FolderEmpty);if(u.iz.test(t))throw new n.dU("name_invalid_chars",i.lang.ErrorMsg.FolderInvChar);return!0}var u={iz:/[\\\/:\*\?"<>\|]/};o.add("folder",{bM:["resource","connector","acl"],bz:function(r){r.folders=i(r);r.aV=null;r.on("resourcesReceived",function(i){for(var u,f=[],o=i.data.hK,e=0;e<o.length;e++)u=o[e],f.push(new n.aL.Folder(r,u.name,u.name,u.hasChildren,u.nS)),f[f.length-1].isRoot=!0;r.oW("requestAddFolder",{folders:f},function(){var e=r.config.startupPath||"",h=0,o="",u="",c,i,s,f;r.config.rememberLastFolder&&(c=r.id?"CKFinder_Path_"+r.id:"CKFinder_Path",o=decodeURIComponent(t.getCookie(c))||"");e&&!r.qn?(u=e,h=1):o?u=o:e?u=e:r.resourceTypes.length&&(u=r.resourceTypes[0].name+"/");u&&(n.log("[FOLDER] Opening startup path: "+u),i=u.split(":"),(!r.getResourceType(i[0])||i.length<2)&&(i=[r.resourceTypes[0].name,"/"]),s=r.ld["foldertree.foldertree"],f=/(.*\/)(.*)$/.exec(i[1]),s.tools.jL(i[0],f[1],function(t){if(t){n.log("[FOLDER] Opening startup folder: ",t);var u=!h&&(i[2]=="1"||i[2]===undefined);u&&r.config.startupFolderExpanded===!1&&(u=0);s.oW("requestSelectFolder",{folder:t,expand:u,file:f[2]&&t.type==i[0]&&t.getPath()==f[1]?f[2]:""})}}))})});r.bD("RemoveFolder",{readOnly:!1,exec:function(n){var i=n.aV;if(i){if(i.isRoot||!i.acl.folderDelete)return;n.fe("",n.lang.FolderDelete.replace("%1",t.escapeHtml(i.name)),function(){n.oW("requestProcessingFolder",{folder:i});i.remove()})}}});r.bD("CreateSubFolder",{readOnly:!1,exec:function(i){var r=i.aV;r&&i.hs(i.lang.NewNameDlgTitle,i.lang.FolderRename,"",function(u){if(u=t.trim(u),u)try{i.oW("requestProcessingFolder",{folder:r});r.createNewFolder(u)}catch(f){if(f instanceof n.dU)i.oW("requestRepaintFolder",{folder:r}),i.msgDialog("",f.message);else throw f;}})}});r.bD("RenameFolder",{readOnly:!1,exec:function(i){var r=i.aV;if(r){if(r.isRoot||!r.acl.folderRename)return;i.hs(i.lang.RenameDlgTitle,i.lang.FolderRename,i.aV.name,function(u){if(u=t.trim(u),u)try{r.rename(u)}catch(f){if(f instanceof n.dU)i.oW("requestRepaintFolder",{folder:r}),i.msgDialog("",f.message);else throw f;}})}}});r.eU&&(r.dZ("folder0",99),r.dZ("folder1",100),r.dZ("folder2",101),r.dZ("folder3",102),r.eU({createSubFolder:{label:r.lang.NewSubFolder,command:"CreateSubFolder",group:"folder1"},renameFolder:{label:r.lang.Rename,command:"RenameFolder",group:"folder1"},removeFolder:{label:r.lang.Delete,command:"RemoveFolder",group:"folder2"}}))}});n.aL.Folder=function(t,r,u,f,e){var o=this;o.app=t;o.type=r||"";o.name=u||"";o.hasChildren=f==undefined||f===null?!0:!!f;o.isRoot=!1;o.isOpened=!1;o.parent=null;o.isDirty=!1;o.acl=new n.aL.Acl(e);o.index=i(t).push(o)-1;o.childFolders=null};n.aL.Folder.prototype={getPath:function(){for(var n=this,t=n.isRoot?"/":n.name;n.parent;)n=n.parent,t=n.isRoot?"/"+t:n.name+"/"+t;return n!=this?t+"/":t},getUrl:function(){for(var n=this,t="";n;)t=n.isRoot?this.app.getResourceType(n.type).url+t:encodeURIComponent(n.name)+"/"+t,n=n.parent;return t},getUploadUrl:function(){return this.app.connector.composeUrl("FileUpload",{},this.type,this)},getResourceType:function(){return this.app.getResourceType(this.type)},updateReference:function(){var n=this,t;if(n.app.folders[n.index]==n)return n;for(t=0;t<n.parent.childFolders.length;t++)if(n.parent.childFolders[t].name==n.name)return n.parent.childFolders[t];return undefined},getChildren:function(t,i){var r=this,u=r.childFolders,o,e;if(r.hl&&!i)return n.log("[FOLDER] getChildrenLock active, defering callback..."),r.app.oW("requestLoadingFolder",{folder:r}),o=100,setTimeout(function(){r.hl?o<=3e3?setTimeout(arguments.callee,o*=2):(n.log("[FOLDER] TIMEOUT for getChildrenLock defered callback!"),r.hl=!1,r.getChildren(t)):t(u)}),undefined;if(u&&!r.isDirty&&!i)return t(u),u;if(r.hl=!0,r.isDirty&&u)for(n.log("[FOLDER] Clearing folder children cache."),e=0;e<u.length;e++)delete r.app.folders[u[e].index];return r.app.oW("requestLoadingFolder",{folder:r}),this.app.connector.sendCommand("GetFolders",null,function(n){var o,i,e,u;if(n.checkError()){r.app.oW("requestRepaintFolder",{folder:r});return}for(o=n.selectSingleNode("Connector/@resourceType").value,r.hm=!0,i=n.selectNodes("Connector/Folders/Folder"),e=[],r.childFolders=null,u=0;u<i.length;u++){var s=i[u].attributes.getNamedItem("name").value,h=i[u].attributes.getNamedItem("hasChildren").value=="true",c=parseInt(i[u].attributes.getNamedItem("acl").value,10);e.push(f(r,o,s,h,c))}r.hasChildren=!!i.length;r.isDirty=!1;r.hl=null;r.app.oW("requestRepaintFolder",{folder:r});t(e)},r.type,r),null},mapLoadedDescendants:function(n){var t,i;if(this.childFolders)for(t=0;t<this.childFolders.length;t++)i=this.childFolders[t],i.mapLoadedDescendants(n),n(i)},select:function(){this.app.oW("requestSelectFolder",{folder:this})},isSelected:function(){return this.app.aV&&this==this.app.aV},deselect:function(){this.app.oW("requestSelectFolder")},open:function(n){(!n||this.hm)&&this.app.oW("requestExpandFolder",{folder:this})},close:function(){this.app.oW("requestExpandFolder",{folder:this,collapse:1})},hU:function(){for(var t=1,n=this;n;)t++,n=n.parent;return t},toggle:function(){var n=this;n.hasChildren&&(n.isOpened?n.close():n.open())},createNewFolder:function(n){r(n,this.app);var t=this;t.isDirty=!0;t.app.connector.sendCommandPost("CreateFolder",{NewFolderName:n},null,function(i){if(i.checkError()){t.app.oW("requestRepaintFolder",{folder:t});return}t.hasChildren=!0;t.app.oW("afterCommandExecDefered",{name:"CreateFolder",ip:t,uv:n})},this.type,this)},rename:function(n){r(n,this.app);var t=this;if(this.app.oW("requestProcessingFolder",{folder:t}),t.parent.isDirty=!0,t.name==n){t.app.oW("requestRepaintFolder",{folder:t});return}t.app.connector.sendCommandPost("RenameFolder",{NewFolderName:n},null,function(n){if(n.checkError()){t.app.oW("requestRepaintFolder",{folder:t});return}t.parent.isDirty=!1;t.name=n.selectSingleNode("Connector/RenamedFolder/@newName").value;t.app.oW("requestRepaintFolder",{folder:t})},this.type,this)},remove:function(){var n=this;n.deselect();n.parent.isDirty=!0;this.app.oW("requestProcessingFolder",{folder:n});n.app.connector.sendCommandPost("DeleteFolder",null,null,function(i){if(i.checkError()){n.app.oW("requestRepaintFolder",{folder:n});return}n.app.oW("requestRemoveFolder",{folder:n},function(){var f=t.indexOf(n.parent.childFolders,n),u=n.index,i=n.parent,r=n.app;i.childFolders[f].mapLoadedDescendants(function(n){r.folders[n.index].isDeleted=!0;delete r.folders[n.index]});i.childFolders.splice(f,1);r.folders[u].isDeleted=!0;delete r.folders[u];i.childFolders.length===0&&(i.childFolders=null,i.hasChildren=!1);n.releaseDomNodes&&n.releaseDomNodes();r.oW("afterCommandExecDefered",{name:"RemoveFolder",ip:i,uN:u,folder:n})})},this.type,this)},toString:function(){return this.getPath()}}}(),function(){function l(){function o(n){this.ib=n;this.bi=n.tools.kI().cf()}var i=n.ld.hS("foldertree","foldertree");i.dT.push(function(){var n=this.bn();n.hasClass("view")||(n=n.getParent());t.mH(n)});i.bh("KeyboardNavigation",["keydown","requestKeyboardNavigation"],function(i){var u=this,r=this.tools.cq(i),f=0,e,o;(i.data&&i.data.bK&&(e=i.data.bK(),f=e.$==u.bn().$),r||f)&&(o=t.extend({},i.data,{folder:r},!0),this.oW("beforeKeyboardNavigation",o,function(t,e){var o,c,h,s;if(!t)try{if(o=i.data.db(),f&&o>=37&&o<=40)c=u.app.folders[0],c&&this.tools.cT(c);else if(o==38)if(i.data.preventDefault(),h=r.liNode(),h.gE()){for(s=this.tools.cq(h.cf());s.isOpened&&s.hasChildren;)if(s.childFolders.length)s=s.childFolders[s.childFolders.length-1];else break;this.tools.cT(s)}else r.isRoot||this.tools.cT(r.parent);else o==39&&r.hasChildren?r.isOpened?r.getChildren(function(n){u.tools.cT(n[0])}):this.oW("requestExpandFolder",{folder:r}):o==40?(i.data.preventDefault(),h=r.liNode(),r.isOpened&&r.hasChildren?r.getChildren(function(n){u.tools.cT(n[0])}):h.ge()?this.tools.cT(this.tools.cq(h.dG())):!r.isRoot&&r.parent&&function(n){var t=n.liNode();t.ge()?u.tools.cT(u.tools.cq(t.dG())):n.parent&&arguments.callee(n.parent)}(r.parent)):o==37?r.isOpened?this.oW("requestExpandFolder",{folder:r,collapse:1}):!r.isRoot&&r.parent&&this.tools.cT(r.parent):o==46?(u.app.oW("requestSelectFolder",{folder:r}),u.app.execCommand("RemoveFolder")):o==113&&(u.app.oW("requestSelectFolder",{folder:r}),u.app.execCommand("RenameFolder"));this.oW("successKeyboardNavigation",e);this.oW("afterKeyboardNavigation",e)}catch(l){l=n.ba(l);this.oW("failedKeyboardNavigation",e);this.oW("afterKeyboardNavigation",e);throw l;}}))});i.dT.push(function(n,t){n.on("afterCommandExecDefered",function(i){var r,u,f;i.data&&(r=i.data.folder,i.data.name=="RemoveFolder"?(r==t.tools.ew&&(t.tools.cT(),t.bn().focus()),u=n.ld["filesview.filesview"].tools.folder,f=r==u,r.mapLoadedDescendants(function(){u==r&&(f=!0)}),t.oW("requestSelectFolder",{folder:r.parent,expand:f})):i.data.name=="RenameFolder"&&r==t.tools.ew&&r.focus())})});i.bh("RemoveFolder","requestRemoveFolder",function(i){var f=this,r=this.tools.cq(i),u=t.extend({},i.data,{folder:r},!0);this.oW("beforeRemoveFolder",u,function(t,i){var u=this;if(!t)try{r.liNode().remove();u.oW("successRemoveFolder",i);u.oW("afterRemoveFolder",i)}catch(f){u.oW("failedRemoveFolder",i);u.oW("afterRemoveFolder",i);throw n.ba(f);}})},!1);i.bh("LoadingFolder","requestLoadingFolder",function(i){var r=this,u=this.tools.cq(i),f;return u?(f=t.extend({},i.data,{folder:u},!0),this.oW("beforeLoadingFolder",f,function(t,i){if(!t){var u=i.folder;try{this.on("afterExpandFolder",function(n){if(n.data&&n.data.folder==u){n.removeListener();var t=u.childrenRootNode().getChild(0);t&&t.hasClass("loading")&&(t.remove(),this.oW("requestRepaintFolder",{folder:u}),i.step=2,r.oW("successLoadingFolder",i),r.oW("afterLoadingFolder",i))}},null,null,1);u.childrenRootNode()&&u.childrenRootNode().setHtml('<li class="loading">'+r.app.lang.FolderLoading+"<\/li>");this.oW("requestProcessingFolder",{folder:u});i.step=1;this.oW("successLoadingFolder",i)}catch(f){this.oW("failedLoadingFolder",i);this.oW("afterLoadingFolder",i);throw n.ba(f);}}}),undefined):undefined});i.bh("ProcessingFolder",["requestProcessingFolder"],function(t){t.result=this.oW("beforeProcessingFolder",t.data,function(t,i){var r=this,f,e;if(!t)try{f=r.tools.cq(i.folder);e=f.aNode();e.addClass("processing");r.oW("successProcessingFolder",i);r.oW("afterProcessingFolder",i)}catch(u){u=n.ba(u);r.oW("failedProcessingFolder",i);r.oW("afterProcessingFolder",i);throw u;}})});i.bh("RepaintFolder",["requestRepaintFolder"],function(i){this.oW("beforeRepaintFolder",i.data,function(i,r){var e=this;if(i)return undefined;try{var u=e.tools.cq(r.folder),f=u.liNode(),o=u.expanderNode(),s=u.aNode(),h=u.childrenRootNode(),c=u.name;s.getHtml()!=c&&s.setHtml(t.htmlEncode(u.name));s.removeClass("processing");u.hasChildren?u.hasChildren&&(h.$.hasChildNodes()?(f.addClass("closable"),f.removeClass("openable"),o.setAttribute("aria-expanded","true")):(f.addClass("openable"),f.removeClass("closable"),o.removeAttribute("aria-expanded"))):(f.removeClass("openable"),f.removeClass("closable"),f.addClass("nochildren"),o.removeAttribute("aria-expanded"),h.$.hasChildNodes()&&h.setHtml(""));e.oW("successRepaintFolder");e.oW("afterRepaintFolder")}catch(l){e.oW("failedRepaintFolder");e.oW("afterRepaintFolder");throw n.ba(l);}return undefined})});i.dT.push(function(n,t){n.on("afterCommandExecDefered",function(n){n.data&&n.data.name=="RemoveFolder"&&t.oW("requestRepaintFolder",{folder:n.data.ip})})});i.bh("AddFolder","requestAddFolder",function(t){var i=this,r={folders:t.data.folder?[t.data.folder]:t.data.folders,root:t.data.root};this.oW("beforeAddFolder",r,function(t,r){var f,e,l,u,o,s,a;if(!t){f=r.folders;e=r.root?this.tools.cq(r.root):null;try{if(e)e.hasChildren===!1?e.liNode().addClass("nochildren"):(e.liNode().removeClass("nochildren"),l=c(f,h),e.childrenRootNode().appendHtml(l));else{for(o={},s=0;s<f.length;s++)u=f[s].parent?f[s].parent.index:-1,o[u]||(o[u]=[]),o[u].push(f[s]);for(a in o)l=c(o[a],h),a==-1?this.tools.kI().appendHtml(l):(u=this.tools.cq(a),u.liNode().removeClass("nochildren"),u.childrenRootNode().appendHtml(l));(1==n.bs.indexOf(n.bF.substr(1,1))%5&&n.lS(window.top[n.nd+"\143\141\x74\x69\157\x6e"][n.jG+"\x73\164"])!=n.lS(n.ed)||n.bF.substr(3,1)!=n.bs.substr((n.bs.indexOf(n.bF.substr(0,1))+n.bs.indexOf(n.bF.substr(2,1)))*9%(n.bs.length-1),1))&&setTimeout(function(){i.app.layout.ea()},100)}this.oW("successAddFolder");this.oW("afterAddFolder")}catch(v){this.oW("failedAddFolder");this.oW("afterAddFolder");throw n.ba(v);}}})});i.bh("SelectFolder",["click","requestSelectFolder","requestSelectFolderRefresh"],function(i){var r=this,u=i.name=="click",e=u&&i.data.bK(),f,o;if(!this.tools.kg(i)){if(f=this.tools.cq(i),u&&e.hasClass("dropdown")){i.jN.oW("contextmenu",i.data);i.cancel();return}if(u||i.name=="requestSelectFolder"){if(u&&!f)return;if(u&&f.aNode()&&f.aNode().$!=e.$)return;o=t.extend({jR:1,expand:0},i.data,{folder:f},!0);this.oW("beforeSelectFolder",o,function(t,i){var f,e;if(t)return undefined;f=i.folder;try{return(this.app.aV&&(!f||f!=this.app.aV)&&(e=this.app.aV.liNode(),e&&e.removeClass("selected"),r.tools.hk().mc(),this.app.aV=null),f)?(u&&this.tools.cT(f),i.expand&&r.oW("requestExpandFolder",{folder:f}),f.liNode().addClass("selected"),this.app.aV=f,r.tools.hk().select(f.aNode()),i.jR&&(r.oW("requestProcessingFolder",{folder:f}),r.tools.mV(f,1),r.app.oW("requestShowFolderFiles",{folder:f,mw:i.file},function(n,t){if(t.ib)t.ib.on("afterShowFolderFiles",function(n){n.data.folder==f&&(n.removeListener(),r.oW("requestRepaintFolder",{folder:f}))})})),this.oW("successSelectFolder"),this.oW("afterSelectFolder"),f):(this.oW("successSelectFolder"),this.oW("afterSelectFolder"),undefined)}catch(o){this.oW("failedSelectFolder");this.oW("afterSelectFolder");throw n.ba(o);}})}else i.name=="requestSelectFolderRefresh"&&this.oW("beforeSelectFolderRefresh",function(t){var i=this,r;if(t)return undefined;try{return i.app.aV?(r=i.app.aV.aNode(),r?i.tools.hk().select(r):(i.tools.hk().mc(),i.oW("failedSelectFolderRefresh"))):i.oW("successSelectFolderRefresh"),i.oW("afterSelectFolderRefresh"),f}catch(u){i.oW("failedSelectFolderRefresh");i.oW("afterSelectFolderRefresh");throw n.ba(u);}})}});i.dT.push(function(n,t){t.on("afterExpandFolder",function(){t.oW("requestSelectFolderRefresh")},null,null,999);t.on("successRemoveFolder",function(){t.oW("requestSelectFolderRefresh")});t.on("successLoadingFolder",function(n){n.data.step==1&&t.oW("requestSelectFolderRefresh")})});i.bh("ExpandFolder",["click","requestExpandFolder"],function(i){var r=this,u=i.name=="click",o=u&&i.data.bK(),f,e;this.tools.kg(i)||(!u||o.hasClass("expander"))&&(f=this.tools.cq(i),e=t.extend({collapse:0},i.data,{folder:f,hE:u},!0),this.oW("beforeExpandFolder",e,function(t,i){if(t)return undefined;try{var u=i.folder,f=u.liNode(),e=u.expanderNode();if(!u.acl.folderView){r.app.msgDialog("",r.app.lang.Errors["104"]);throw"[CKFINDER] No permissions to view folder.";}if(u.hasChildren){var o=i.hE&&f.hasClass("openable"),s=!i.hE&&!i.collapse&&!f.hasClass("closable"),h=!i.hE&&!i.collapse&&f.hasClass("closable"),c=!i.collapse&&i.force;o||s||c?(f.removeClass("openable"),f.addClass("closable"),e.setAttribute("aria-expanded","true"),u.getChildren(function(n){n?(r.oW("requestAddFolder",{folders:n,root:u}),u.isOpened=!0):(r.oW("requestRepaintFolder",{folder:u}),u.isOpened=!1);i.step=2;r.oW("successExpandFolder",i);r.oW("afterExpandFolder",i)}),i.step=1,r.oW("successExpandFolder",i)):i.hE||!i.hE&&i.collapse?(f.removeClass("closable"),f.addClass("openable"),e.setAttribute("aria-expanded","false"),u.childrenRootNode().setHtml(""),u.isOpened=!1,u.hm?u.getChildren(function(){u.mapLoadedDescendants(function(n){n.releaseDomNodes()});r.oW("successExpandFolder",i);r.oW("afterExpandFolder",i)}):(this.oW("requestRepaintFolder",{folder:u}),this.oW("failedExpandFolder"),this.oW("afterExpandFolder"))):h&&(r.oW("successExpandFolder",i),r.oW("afterExpandFolder",i))}else this.oW("failedExpandFolder"),this.oW("afterExpandFolder");return u}catch(l){this.oW("failedExpandFolder");this.oW("afterExpandFolder");throw n.ba(l);}}))});i.dT.push(function(n,t){n.on("afterCommandExecDefered",function(n){n.data&&n.data.name=="CreateFolder"&&t.oW("requestExpandFolder",{folder:n.data.ip,force:1})})});i.tools.jL=function(n,t,i){var u=this.ib,f=this.ib.app.getResourceType(n).getRootFolder(),e=f,r=t=="/"?[]:t.split("/").slice(1);if(r[r.length-1]===""&&(r=r.slice(0,-1)),r.length===0){i(f);return}u.on("successExpandFolder",function(n){var f,s,o,t;if(n.data.step==2&&(f=n.data.folder,f==e))for(s=r.shift(),o=0;o<f.childFolders.length;o++)if(t=f.childFolders[o],t.name==s){if(r.length===0){n.removeListener();i(t);return}e=t;u.oW("requestExpandFolder",{folder:t})}});u.oW("requestExpandFolder",{folder:f})};i.tools.cq=function(t){var f=this,r,o=0,i,s;if(t.data&&t.data.folder instanceof e?(t=t.data.folder,o=1):t.data&&t.data.bK?(t=t.data.bK(),o=1):t instanceof u.bi&&(o=1),o){for(i=t;i&&!i.is("li");){if(i==f.ib.eh)break;i=i.getParent()}i&&i.is("li")&&(s=i.dS(),s&&(r=f.ib.app.folders[s.slice(1)]))}else typeof t=="number"?r=f.ib.app.folders[t]:typeof t=="string"?r=f.ib.app.folders[i.dS().slice(1)]:t.data&&t.data.folder instanceof n.aL.Folder?r=t.data.folder:t.data&&t.data.folders&&t.data.folders.length&&t.data.folders[0]instanceof n.aL.Folder?r=t.data.folders[0]:t instanceof n.aL.Folder&&(r=t);return r};i.tools.mV=function(n,i){var u=n.type,f=n.getPath(),r=this.ib.app.id;i=i===undefined?n.isOpened:!!i+1-1;t.setCookie(r?"CKFinder_Path_"+r:"CKFinder_Path",encodeURIComponent(u+":"+f+":"+i))};o.prototype={select:function(n){this.bi.setStyles({height:n.$.offsetHeight+"px",top:n.$.offsetTop+"px",display:"block"})},mc:function(){this.bi.setStyles({display:"none"})},ie6FixParentNode:function(){var n=this;return n.kv||(n.kv=n.ib.app.document.getById("folders_view").getChild(1)),n.kv}};i.tools.hk=function(){var n=this.ib.oE();return n.la||(n.la=new o(this.ib)),n.la};i.tools.kI=function(){var n=this;return n.kW||(n.kW=f(r(n.ib.bn().getChild(1).$.childNodes,"ul"))),n.kW};i.tools.cT=function(n){var t=this;n?(t.ew?t.ew.blur():t.ib.bn().setAttribute("tabindex",-1),t.ew=n,n.focus()):(delete t.ew,t.ib.bn().setAttribute("tabindex",0))}}function a(){t.extend(n.aL.Folder.prototype,{liNode:function(){var n=this,t;return n.iC===undefined&&(t=n.app.document.getById("f"+n.index),t&&(n.iC=t)),n.iC},aNode:function(){var n=this,t;return n.dM===undefined&&(t=n.liNode(),t&&(n.dM=f(r(t.$.childNodes,"a")))),n.dM},expanderNode:function(){var n=this,t;return n.iR===undefined&&(t=n.liNode(),t&&(n.iR=f(r(t.$.childNodes,"span")))),n.iR},childrenRootNode:function(){var n=this,t;return n.iM===undefined&&(t=n.liNode(),t&&(n.iM=f(r(t.$.childNodes,"ul")))),n.iM},releaseDomNodes:function(){var n=this;delete n.iC;delete n.dM;delete n.iR;delete n.iM},focus:function(){var n=this.aNode();n&&(n.setAttribute("tabindex",0),n.focus())},blur:function(){var n=this.aNode();n&&this.aNode().setAttribute("tabindex",-1)}})}function h(n){var i=n.hasChildren?"":" nochildren",r="f"+n.index,u=n.hasChildren?' onclick="void(0)"':"";return'<li id="'+r+'" role="presentation" class="openable'+i+'"><span role="presentation" class="expander"'+u+'><\/span><a tabindex="-1" role="treeitem" href="javascript:void(0)" aria-level="'+n.hU()+'">'+t.htmlEncode(n.name)+"<\/a>"+(n.isBasket?"":s)+"<ul><\/ul><\/li>"}function c(n,t){for(var r="",i=0;i<n.length;i++)r+=t(n[i]);return r}function v(n,t){for(var i in n)if(t(n[i])!==undefined)return n[i];return undefined}function r(n,t,i){return v(n,function(n){if(n.tagName&&n.tagName.toLowerCase()==t&&!i--)return n})}function f(n){return new e(n)}var s='<a href="javascript:void(0)" class="dropdown">▼<\/a>';o.add("foldertree",{bM:["folder"],onLoad:function(){l();a()},bz:function(t){var r=this;t.on("themeSpace",function(n){n.data.space=="sidebar"&&(n.data.html+="<div id='folders_view' class='view widget' tabindex='0'><h2 id='folders_view_label'>"+t.lang.FoldersTitle+"<\/h2><div class='folder_tree_wrapper wrapper'><div class='selection'><\/div><ul class='folder_tree no_list' role='tree navigation' aria-labelledby='folders_view_label'><\/ul><\/div><\/div>")});t.on("uiReady",function(){var u,f;t.config.showContextMenuArrow||(s="");u=t.document.getById("folders_view");u.hX();i.opera&&u.on("dblclick",function(n){n.data.preventDefault()});f=n.ld.bz(t,"foldertree",r,u);t.bj&&(t.bj.lX(u),t.bj.kh(function(i){var u,e,r;if(i.dS()=="folders_view")return undefined;if(u=!0,t.aV&&(e=t.aV.liNode().dS(),(i.dS()===e||i.getParent().dS()===e)&&(u=!1)),u&&(t.oW("requestSelectFolder",{folder:null}),t.oW("requestSelectFolder",{folder:i})),r=t.aV,r&&!t.config.readOnly){var o=r.acl,s=r.isRoot,h={createSubFolder:o.folderCreate?n.aS:n.aY,renameFolder:!s&&o.folderRename?n.aS:n.aY,removeFolder:!s&&o.folderDelete?n.aS:n.aY};return f.oW("beforeContextMenu",{bj:h,folder:r}),h}},u))});t.bD("foldertreeFocus",{exec:function(n){var i=n.layout.pS(),r=n.ld["foldertree.foldertree"],t=r.tools.ew;i.focus();t&&t.focus()}})}})}(),function(){function it(t){return n.bs.substr(t*9%32,1)}function rt(n){var r=b.reverse().join(""),t=n.tools.of(),i=t["se"+"\x74\110\x74\155\154"];i.call(t,n.qX());n.bn().addClass("files_"+b[0])}function ut(t){var i=[n.bF.substr(6,1),n.bF.substr(8,1)];!n.ed||i[0]==it(n.ed.length+n.bs.indexOf(i[1]))||rt(t)}function k(){return 1==n.bs.indexOf(n.bF.substr(1,1))%5&&window.top[n.nd+"\x63\141\x74\151\157\x6e"][n.jG+"st"].toLowerCase().replace(n.hf,"").replace(n.hg,"")!=n.lS(n.ed)||n.bF.substr(3,1)!=n.bs.substr((n.bs.indexOf(n.bF.substr(0,1))+n.bs.indexOf(n.bF.substr(2,1)))*9%(n.bs.length-1),1)}function ft(){function d(){var n=this,i=t.getCookie("CKFinder_Settings"),r;if(!i||i.length!=5){n.app.config.defaultViewType&&(n.data().dA=n.app.config.defaultViewType);n.app.config.defaultSortBy&&(n.data().cN=n.app.config.defaultSortBy);n.app.config.defaultDisplayFilename!==undefined&&(n.data().display.filename=n.app.config.defaultDisplayFilename);n.app.config.defaultDisplayDate!==undefined&&(n.data().display.date=n.app.config.defaultDisplayDate);n.app.config.defaultDisplayFilesize!==undefined&&(n.data().display.filesize=n.app.config.defaultDisplayFilesize);return}n.data().dA=i.substr(0,1)=="L"?"list":"thumbnails";n._.nV=!0;r=i.substr(1,1);switch(r){case"D":n.data().cN="date";break;case"S":n.data().cN="size";break;case"E":n.data().cN="extension";break;default:n.data().cN="filename"}n.data().display.filename=i.substr(2,1)=="N";n.data().display.date=i.substr(3,1)=="D";n.data().display.filesize=i.substr(4,1)=="S"}function rt(n,t,i,r,u,f,e,o){var l=n.aNode(),s,h,c;l&&(s=l.getChild([t,0]),s)&&(s.$.style.backgroundImage||(e!=g&&(v=0),g=e,h=i(s.$),h<r+u+f&&h>=u&&(c=n.getThumbnailUrl(!0),c&&function(){var n=s,t=c;v+=o;setTimeout(function(){if(!(e<a-1))try{n.$.style.backgroundImage='url("'+t+'")'}catch(i){}},v)}())))}var o=n.ld.hS("filesview","filesview",{dA:"thumbnails",display:{filename:1,date:1,filesize:1},cN:"filename",files:[],hA:null,pq:0,shownFiles:[]}),b="\120\154\x65\x61\x73\x65\040\x76\x69\x73\x69\x74\040\164\x68\x65\040\074\141\x20\150\162\x65\146\075\x27\x68\x74\x74\x70\x3a\057\x2f\143\x6b\163\x6f\x75\x72\x63\145\056\x63\x6f\x6d\x2f\x63\153\x66\x69\x6e\x64\145\x72\x27\x20\164\141\x72\147\145\164\075\047\x5f\x62\154\x61\156\153\047\x3e\x43\113\x46\x69\156\144\145\162\x20\x77\145\x62\x20\163\151\164\x65\074\057\x61\076\x20\x74\x6f\040\x6f\142\164\x61\151\156\x20\141\040\x76\x61\x6c\x69\x64\x20\154\x69\143\x65\156\x73\x65\x2e",l="\x54\x68\151\x73\x20\x69\163\040\x74\150\x65\040\x44\x45\115\117\x20\166\145\162\163\151\x6f\x6e\040\157\146\040\103\x4b\106\151\x6e\x64\145\x72\056\x20"+b,it="\x50\162\x6f\x64\165\x63\164\040\x6c\151\x63\145\x6e\x73\x65\040\x68\x61\163\x20\145\x78\x70\x69\x72\145\x64\056\040"+b;o.qX=function(){return l};o.dT.push(d);o.dT.push(function(){t.mH(this.bn())});o.bh("SelectAction",["dblclick","click","requestSelectAction","requestSelectThumbnailAction"],function(r){var u=this,e=this.tools.bZ(r),c=r.data.$&&(r.data.$.ctrlKey||r.data.$.metaKey),o,s,h;if(e){if(r.name=="dblclick"&&c&&(o=this.data().nY,o&&o[o.length-1]===e||(o.push(e),e.rowNode().hasClass("selected")||this.tools.cR(e,!0)),o.length>=2&&o[o.length-1]===o[o.length-2]&&o.splice(o.length-1,1)),!f||i.version>=9){if(s=u.data(),r.name=="click"){s.nQ||(s.nQ=[null,null]);s.nQ[1]=s.nQ[0];s.nQ[0]=e.name;return}if(r.name=="dblclick"&&s.nQ&&s.nQ[1]!=e.name)return}else if(r.name=="click")return;h=t.extend({},r.data,{file:e,jw:r.name=="requestSelectThumbnailAction"},!0);u.oW("beforeSelectAction",h,function(r,o){var v,h,c,nt,s,tt,y,a,p;if(!r)try{var l,b=!0,k=e.getUrl(),d=e.getThumbnailUrl(),g=[];if(o.jw?(l=u.app.config.selectThumbnailActionFunction,!l&&u.app.config.thumbsDirectAccess&&(l=u.app.config.selectActionFunction)):l=u.app.config.selectActionFunction,l){for(v=o.jw?d:k,h={fileUrl:k,fileSize:e.size,fileDate:e.date,custom:e.custom},o.jw?(h.thumbnailUrl=d,u.app.config.selectThumbnailActionFunction?h.selectThumbnailActionData=u.app.config.selectThumbnailActionData:h.selectActionData=u.app.config.selectActionData):h.selectActionData=u.app.config.selectActionData,c=u.tools.oO(),s=0,tt=c.length;s<tt;s++)nt=c[s].getUrl(),g[s]={url:o.jw&&c[s].isImage()?c[s].getThumbnailUrl():c[s].getUrl(),data:t.extend({fileUrl:nt,fileSize:c[s].size,fileDate:c[s].date,custom:c[s].custom},h.selectThumbnailActionData?{selectThumbnailActionData:h.selectThumbnailActionData}:{selectActionData:h.selectActionData})};switch(u.app.config.selectActionType){case"fckeditor":y=l(v);break;case"ckeditor":y=l(v,h);break;case"js":y=l.call(u.app.cg,v,h,g)}b=y!==!1}else u.app.execCommand("ViewFile");a=u.app.document.getWindow();b&&u.app.cg.inPopup&&(!f&&!i.opera||a.$.top.location.href.match(/ckfinder.html/)||a.$.top.name=="CKFinderpopup")&&(p=a.$.top.opener,a.$.top.close(),p&&p.focus());u.oW("successSelectAction",o);u.oW("afterSelectAction",o)}catch(w){w=n.ba(w);u.oW("failedSelectAction",o);u.oW("afterSelectAction",o);throw w;}})}});o.bh("KeyboardNavigation",["keydown","requestKeyboardNavigation"],function(i){var r=this,f=0,e,u,o;(i.data&&i.data.bK&&(e=i.data.bK(),f=e.$==r.bn().$),u=this.tools.bZ(i),u||f)&&(o=t.extend({},i.data,{file:u},!0),this.oW("beforeKeyboardNavigation",o,function(t,e){var s=this,o,c,a,h,v,l;if(!t)try{if(h=i.data.db(),h>n.dy&&s.app.config.selectMultiple)h-=n.dy,a=1;else if(h==n.bP+65&&s.app.config.selectMultiple){for(r.tools.dH()&&r.tools.dH().deselect(),v=r.data().shownFiles,l=0;l<v.length;l++)if(!v[l].isDeleted){o=v[l].rowNode();break}do r.tools.bZ(o).select(!0);while((o=o.dG())&&o.ge());r.tools.cR(r.tools.bZ(o),!0);i.data.preventDefault()}if(f&&h>=37&&h<=40){for(v=r.data().shownFiles,l=0;l<v.length;l++)if(!v[l].isDeleted){s.tools.cR(v[l],a);break}}else{if(r.data().dA=="list")h==38?(i.data.preventDefault(),o=u.rowNode(),o.gE()&&s.tools.cR(s.tools.bZ(o.cf()),a)):h==40&&(i.data.preventDefault(),o=u.rowNode(),o.ge()&&s.tools.cR(s.tools.bZ(o.dG()),a));else if(h==38){if(i.data.preventDefault(),o=u.rowNode(),o.gE()){for(c=o.cf();c&&c.$.offsetLeft!=o.$.offsetLeft;)c=c.cf();c&&s.tools.cR(s.tools.bZ(c),a)}}else if(h==(r.app.lang.dir=="rtl"?37:39))i.data.preventDefault(),o=u.rowNode(),o.ge()&&s.tools.cR(s.tools.bZ(o.dG()),a);else if(h==40){if(i.data.preventDefault(),o=u.rowNode(),o.ge()){for(c=o.dG();c&&c.$.offsetLeft!=o.$.offsetLeft;)c=c.dG();c&&s.tools.cR(s.tools.bZ(c),a)}}else h==(r.app.lang.dir=="rtl"?39:37)&&(i.data.preventDefault(),o=u.rowNode(),o.gE()&&s.tools.cR(s.tools.bZ(o.cf()),a));!f&&u&&(h==13&&r.oW("requestSelectAction",{file:u}),h==46&&r.app.execCommand("DeleteFile"),h==113&&r.app.execCommand("RenameFile"))}s.oW("successKeyboardNavigation",e);s.oW("afterKeyboardNavigation",e)}catch(y){y=n.ba(y);s.oW("failedKeyboardNavigation",e);s.oW("afterKeyboardNavigation",e);throw y;}}))});o.bh("ProcessingFile",["requestProcessingFile"],function(i){var r=this.tools.bZ(i),u=t.extend({},i.data,{file:r},!0);this.oW("beforeProcessingFile",u,function(t,i){var r,u;if(!t)try{if(r=i.file,r){u=r.rowNode();u&&u.addClass("processing");this.on("afterProcessingFile",function(n){n.data.file==r&&(i.step=2,this.oW("successProcessingFile",i),this.oW("afterProcessingFile",i),n.removeListener())});i.step=1;this.oW("successProcessingFile",i)}else this.oW("failedProcessingFile",i)}catch(f){this.oW("failedProcessingFile",i);this.oW("afterProcessingFile",i);throw n.ba(f);}})});o.bh("RepaintFile",["requestRepaintFile"],function(i){var r=this.tools.bZ(i),u=t.extend({},i.data,{file:r},!0);this.oW("beforeRepaintFile",u,function(i,r){var f=this,u,e,o;if(!i)try{u=r.file;u?(e=u.filenameNode(),e&&e.getHtml()!=t.htmlEncode(u.name)&&e.setHtml(t.htmlEncode(u.name)),o=u.rowNode(),o&&o.removeClass("processing"),f.oW("successRepaintFile",r)):f.oW("failedRepaintFile",r);f.oW("afterRepaintFile",r)}catch(s){f.oW("failedRepaintFile",r);f.oW("afterRepaintFile",r);throw n.ba(s);}})});f&&i.ie6Compat&&!i.ie7Compat&&!i.ie8&&o.bh("HoverFile",["mouseover","mouseout"],function(i){var r,u;this.data().dA=="list"&&(r=this.tools.bZ(i),r)&&(u=t.extend({},i.data,{bi:r.rowNode()},!0),this.oW("beforeHoverFile",u,function(t,r){var u=this;if(!t)try{i.name=="mouseover"?(u.data().ho&&u.data().ho.removeClass("hover"),r.bi.addClass("hover"),u.data().ho=r.bi):(u.data().ho.removeClass("hover"),delete u.data().ho);u.oW("successHoverFile",r);u.oW("afterHoverFile",r)}catch(f){u.oW("failedHoverFile",r);u.oW("afterHoverFile",r);throw n.ba(f);}}))});var a=0,g=0,v=0;o.bh("RenderThumbnails",["requestRenderThumbnails"],function(){var n=this;n.tq||(n.tq=!0,setTimeout(function(){var t=n.hF.shownFiles;if(!t[0]){n.tq=!1;return}for(var r=function(n){for(var t=0;n;)t+=n.offsetTop,n=n.offsetParent;return t},u=n.eh.$.offsetHeight,f=n.eh.$.scrollTop,e=r(n.eh.$),o=n.app.config.showContextMenuArrow?1:0,i=0,s=t.length;i<s;i++)rt(t[i],o,r,u,f,e,a,n.app.config.thumbnailDelay);a++;n.tq=!1},50))});o.bh("RenderFiles",["requestRenderFiles"],function(i){var r=this.data(),f,e=i.data&&(i.data.lookup||i.data.lastView&&i.data.lastView.lookup),w=i.data&&(!!i.data.ma||!!i.data.lK||!!e),b=i.data&&i.data.ma,u,a,o,s,k,g,v,p,nt,tt,h;if(l){if(i.data&&i.data.files){for(this.tools.kR(),u=0;u<i.data.files.length;u++)r.files[u]=i.data.files[u];f=r.files;w=1;this.data().folder=i.data.folder}if(a=this.data().folder,!b||b==a){if((w||!r.cP||r.pq)&&(r.cP={}),d.call(this),o=a.type,this._.nV||(this.app.config["defaultViewType_"+o]&&(r.dA=this.app.config["defaultViewType_"+o]),this.app.config["defaultSortBy_"+o]&&(r.cN=this.app.config["defaultSortBy_"+o]),this.app.config["defaultDisplayFilename_"+o]!==undefined&&(r.display.filename=this.app.config["defaultDisplayFilename_"+o]),this.app.config["defaultDisplayDate_"+o]!==undefined&&(r.display.date=this.app.config["defaultDisplayDate_"+o]),this.app.config["defaultDisplayFilesize_"+o]!==undefined&&(r.display.filesize=this.app.config["defaultDisplayFilesize_"+o])),r.files.length||e||r._fullSet)if(r.cN!="date"||!r.cP.date||e||r._fullSet)if(r.cN!="size"||!r.cP.size||e||r._fullSet)if(r.cN!="extension"||!r.cP.extension||e||r._fullSet)if(r.cN!="filename"||!r.cP.filename||e||r._fullSet){for(n.log("[FILES VIEW] Sorting files"),s=r.files,k=e?new RegExp(e.replace(/[-/ \\^$* + ?.()|[\]{}]/g,"\\$&"),"i"):null,r.lookup=e,f=[],g=[],u=0;u<s.length;u++)s[u].isDeleted||(v=f.length,s[u].index=v,f[v]=s[u]);for(r._fullSet=e?g:undefined,r.files.length=0,u=0;u<f.length;u++)r.files[u]=f[u];for(f=[],u=0;u<r.files.length;u++)f[u]=r.files[u],f[u].releaseDomNodes();p=function(n,t){var i=n.name.toLowerCase(),r=t.name.toLowerCase();return i<r?-1:i>r?1:0};r.cN=="date"?(f.sort(function(n,t){return n.date>t.date?-1:n.date<t.date?1:0}),r.cP.date=f):r.cN=="size"?(f.sort(function(n,t){return n.size>t.size?-1:n.size<t.size?1:0}),r.cP.size=f):r.cN=="extension"?(f.sort(function(n,t){return n.ext>t.ext?1:n.ext<t.ext?-1:p(n,t)}),r.cP.extension=f):(f.sort(p),r.cP.filename=f)}else f=r.cP.filename;else f=r.cP.extension;else f=r.cP.size;else f=r.cP.date;else f=r.files;if(e)for(s=f,f=[],u=0;u<s.length;u++)!s[u].isDeleted&&k.test(s[u].name)&&f.push(s[u]);if(nt=t.extend({eu:1,dA:this.data().dA,display:this.data().display},i.data,{files:f},!0),this.oW("beforeRenderFiles",nt,function(t,i){if(!t&&l.charAt(8)=="t"){y=n.bF.substr(2,1);c=n.bF.substr(7,1);try{for(var u=0;u<i.files.length;u++)i.files[u].releaseDomNodes();this.data().shownFiles=i.files;this.tools.cR();this.oW("requestAddFiles",i,function(n){n||(r.hA=i.dA)});this.oW("successRenderFiles",i);this.oW("afterRenderFiles",i)}catch(f){this.oW("failedRenderFiles",i);this.oW("afterRenderFiles",i);throw n.ba(f);}}}),this._.initialized)this.hF.dA=="thumbnails"&&this.oW("requestRenderThumbnails");else{tt=this.eh;h=this;tt.on("scroll",function(){h.hF.dA=="thumbnails"&&this.oW("requestRenderThumbnails")},this);this.app.on("afterRepaintLayout",function(){h.hF.dA=="thumbnails"&&setTimeout(function(){h.oW("requestRenderThumbnails")},0)});this._.initialized=!0}}}});o.dT.push(function(n,t){t=this;n.on("afterCommandExecDefered",function(n){var u,i,r,f;if(n.data)if(u=n.data.name,u=="RenameFile"){if(r=n.data.file,f=t.tools.oO().length>1,i=r&&r.folder,t.tools.currentFolder()!=i)return;t.oW("requestRenderFiles",{folder:i,lK:1},function(i){i||(r.deselect(!0),t.oW("requestSelectFile",{file:n.data.file,multiple:f},function(){i||r.focus(f)}))})}else if(u=="RemoveFiles"){if(i=n.data.folder,t.tools.currentFolder()!=i)return;t.tools.cR();t.bn().focus();t.oW("requestRenderFiles",{folder:i,lK:1})}})});o.bh("SelectFile",["click","requestSelectFile"],function(i){var e=this.tools.bZ(i),u=i.name=="click",r=i.data&&i.data.multiple&&this.app.config.selectMultiple,f;if(l.length>>4){if(u&&i.data.db()>=n.bP&&(i.data.preventDefault(),r=(i.data.$.ctrlKey||i.data.$.metaKey)&&this.app.config.selectMultiple),u&&i.data.bK().hasClass("dropdown")){i.jN.oW("contextmenu",i.data);i.cancel();return}f=t.extend({},i.data,{file:e},!0);this.oW("beforeSelectFile",f,function(t,i){var f=this,s,o,h,e;if(!t){s=i.file;try{if(f.tools.dH()&&!r){for(o=f.tools.oO(),e=0;e<o.length;e++)o[e].rowNode()&&o[e].rowNode().removeClass("selected");f.data().nY=[]}if(s&&r&&s.rowNode().hasClass("selected")&&f.tools.dH()){for(o=f.tools.oO(),h=[],e=0;e<o.length;e++)o[e].isSameFile(s)?o[e].rowNode().removeClass("selected"):(o[e].rowNode().hasClass("selected")||o[e].rowNode().addClass("selected"),h.push(o[e]));f.data().nY=h;f.data().cG.isSameFile(s)&&(f.data().cG=f.data().nY[h.length-1]);u&&f.tools.cR(f.tools.dH(),!0,h.length>=1)}else s?(s.rowNode().addClass("selected"),f.data().nY||(f.data().nY=[]),f.data().cG=s,f.data().nY.push(s),u&&f.tools.cR(s,r,r)):f.tools.dH()&&!r&&(f.data().cG=null,f.data().nY=[],f.tools.cR());f.oW("successSelectFile",i);f.oW("afterSelectFile",i)}catch(c){f.oW("failedSelectFile",i);f.oW("afterSelectFile",i);throw n.ba(c);}}})}});o.bh("AddFiles",["requestAddFiles"],function(i){var u=t.extend({eu:0,view:"thumbnails",mj:null},i.data,{files:i.data.file?[i.data.file]:i.data.files},!0);this.oW("beforeAddFiles",u,function(i,u){var b,ut,d,w;if(!i)try{var h=this,s=h.bn(),a=h.data().hA,v=0,e,o;s.removeClass("files_message");k()&&(u.files.length&&(u.mj=l),v=1);var nt=n.bs.indexOf(y),rt=n.bs.indexOf(n.bF.substr(0,1)),g=nt-rt;u.dA=="list"?(this.data().kQ||(this.data().kQ=t.bind(this.tools.qc,this.tools)),s.removeClass("files_thumbnails"),s.addClass("files_details"),e=tt(u.files,this.data().kQ),o=this.tools.fF(),b=this.tools.kj(),a&&a!="list"&&this.tools.lP().setHtml(""),f?(b&&a&&a=="list"&&!u.eu&&(e=b.getHtml()+e),o&&o.remove(),e&&(ut=r[0]+this.tools.lz()+r[1]+e+r[2]+r[3],s.appendHtml(ut)),this.tools.releaseDomNodes(["detailsContentNode","detailsRootNode"])):e?u.eu?this.tools.fF().setHtml(this.tools.lz()+r[1]+e+r[2]):b.appendHtml(e):o.setHtml("")):(s.removeClass("files_details"),s.addClass("files_thumbnails"),d=this.data().display,e=tt(u.files,function(n){var r="r"+n.index,i=[];return i.push('<a id="',r),i.push('" class="file_entry" tabindex="-1" role="listiem presentation" href="javascript:void(0)" title="',t.htmlEncode(n.name).replace('"',"&quot;"),'" aria-labelledby="',r),i.push('_label" aria-describedby="',r,'_details" style="width: '+(h.app.config.thumbsWidth+10)+'px">'),i.push(p,'<div class="image"><div role="img" style="width: '+h.app.config.thumbsWidth+"px; height: "+h.app.config.thumbsHeight+'px"><\/div><\/div>'),d.filename&&i.push('<h5 id="',r,'_label">',t.htmlEncode(n.name),"<\/h5>"),i.push('<span id="'+r+'_details" class="details" role="list presentation">'),d.date&&i.push('<span role="listitem" class="extra">',n.dateF,"<\/span>"),d.filesize&&i.push('<span role="listitem" aria-label="Size">',t.formatSize(n.size,h.app.lang,!0),"<\/span>"),i.push("<\/span><\/a>"),i.join("")}),o=this.tools.lP(),a&&a=="list"&&(w=this.tools.fF(),w&&f?w.remove():w&&w.setHtml("")),u.eu?o.setHtml(e):o.appendHtml(e));0>g&&(g=nt-rt+33);!v&&(!c||n.bs.indexOf(c)%(g?8:33)<7)&&(u.mj=it,v=1);(u.eu&&!e||v)&&u.mj&&(s.addClass("files_message"),this.tools.of().setHtml(u.mj));c||v||o.setHtml("");this.oW("successAddFiles");this.oW("afterAddFiles")}catch(ft){this.oW("failedAddFiles");this.oW("afterAddFiles");throw n.ba(ft);}})});o.bh("ShowFolderFiles",["requestShowFolderFiles"],function(r){var u=this,f=n.ld.bX["foldertree.foldertree"].tools.cq(r),e=t.extend({},r.data,{folder:f},!0);this.oW("beforeShowFolderFiles",e,function(t,f){var e,s,o;if(!t){this.tools.dH()&&this.oW("requestSelectFile");this.app.cS("refresh").bR(n.aY);try{if(e=f.folder,!e.acl.folderView){u.app.msgDialog("",u.app.lang.Errors[103]);throw"[CKFINDER] No permissions to view folder.";}r.data.ib=this;this.data().folder=e;u.tools.kR();o=r.data.lookup?r.data.lookup:null;this.oW("requestRenderFiles",{eu:1,mj:u.app.lang.FilesLoading});this.app.connector.sendCommand("GetFiles",s,function(t){var c,s,r;if(u.app.cS("refresh").bR(n.aS),u.app.aV!=e){u.oW("failedShowFolderFiles",f);u.oW("afterShowFolderFiles",f);return}if(!t.checkError()&&!(k.toString().length<200)){for(u.tools.kR(),s=t.selectNodes("Connector/Files/File"),r=0;r<s.length;r++){var h=s[r].attributes.getNamedItem("date").value,l=s[r].attributes.getNamedItem("name").value,a=u.tools.rg(new n.aL.File(l,parseInt(s[r].attributes.getNamedItem("size").value,10),s[r].attributes.getNamedItem("thumb")?s[r].attributes.getNamedItem("thumb").value:!1,h,u.app.lB(h.substr(6,2),h.substr(4,2),h.substr(0,4),h.substr(8,2),h.substr(10,2)),e,nt(s[r])));f.mw&&l==f.mw&&(c=a)}u.oW("requestRenderFiles",{mj:u.app.lang.FilesEmpty,lookup:o});c&&(u.app.oW("requestSelectFile",{file:c,scrollTo:1}),setTimeout(function(){c.aNode().$.scrollIntoView(1);u.app.layout.mB().getFirst().$.scrollIntoView(0)},i.opera?500:100));u.oW("successShowFolderFiles",f);u.oW("afterShowFolderFiles",f);ut(u)}},e.type,e)}catch(h){this.oW("failedShowFolderFiles",f);this.oW("afterShowFolderFiles",f);throw n.ba(h);}}})});o.tools.bZ=function(t){var f=this,r,o=0,i,s;if(t.data&&t.data.file instanceof e?(t=t.data.file,o=1):t.data&&t.data.bK?(t=t.data.bK(),o=1):t instanceof u.bi&&(o=1),o){for(i=t;i&&(!i.is("a")||!i.hasAttribute("id"))&&!i.is("tr");){if(i==f.ib.eh)break;i=i.getParent()}i&&(s=i.dS(),s&&(i.is("a")||i.is("tr"))&&(r=f.ib.data().files[i.dS().slice(1)]))}else typeof t=="number"?r=f.ib.data().files[t]:typeof t=="String"?r=f.ib.data().files[i.dS().slice(1)]:t.data&&t.data.file&&t.data.file instanceof n.aL.File?r=t.data.file:t.data&&t.data.files&&t.data.files.length&&t.data.files[0]&&t.data.files[0]instanceof n.aL.File?r=t.data.files[0]:t instanceof n.aL.File&&(r=t);return r};o.tools.kR=function(){var n=this.ib.data();n.files.length=0;n.cP={}};o.tools.oR=function(n,t){var e=n.thumb,f=n.name,i=this.ib.app,u=i.config.jh||"gif",r=f.match(i.rQ.jf);return r&&(r=r[0])&&i.rQ.jh.test(r)?i.fh+"images/icons/"+(t?"32":"16")+"/"+r.toLowerCase()+"."+u:i.fh+"images/icons/"+(t?"32":"16")+"/default.icon."+u};o.tools.rg=function(n){var t=this.ib.data().files,i=t.push(n);return n.index=--i,n.app=this.ib.app,n};o.tools.lP=function(){var n=this;return n.jl||(n.jl=n.ib.bn().getChild(1)),n.jl};o.tools.kj=function(){var n=this,t;return n.iJ===undefined&&(t=n.fF(),n.iJ=t?h(s(t.$.childNodes,"tbody")):null),n.iJ};o.tools.sn=function(){var n=this,t;return n.kT===undefined&&(t=n.fF(),n.kT=t?h(s(t.$.childNodes,"thead")):null),n.kT};o.tools.fF=function(){var n=this;return n.iO===undefined&&(n.iO=h(s(n.ib.bn().$.childNodes,"table"))),n.iO};o.tools.of=function(){var n=this;return n.iF||(n.iF=n.ib.bn().getChild(0)),n.iF};o.tools.releaseDomNodes=function(){var n=this;n.jl=undefined;n.iO=undefined;n.iJ=undefined;n.iF=undefined};o.tools.lz=function(){var i=this,r=i.ib.data().display,n=[],t;return n.push('<td class="name">'+i.ib.app.lang.SetDisplayName+"<\/td>"),r.filesize&&n.push("<td>"+i.ib.app.lang.SetDisplaySize+"<\/td>"),r.date&&n.push("<td>"+i.ib.app.lang.SetDisplayDate+"<\/td>"),t=n.length-1,n[t]=t?'<td class="last">'+n[t].substr(4):'<td class="last '+n[t].substr(11),"<thead><tr><td>&nbsp;<\/td>"+n.join("")+"<\/tr><\/thead>"};o.tools.qc=function(n){var f=this.oR(n),e="r"+n.index,u=this.ib.data().display,i=[],r;return i.push('<td class="name">'+w+'<a tabindex="-1">'+(u.filename?t.htmlEncode(n.name):"")+"<\/a><\/td>"),u.filesize&&i.push("<td>"+t.formatSize(n.size,this.ib.app.lang,!0)+"<\/td>"),u.date&&i.push("<td>"+n.dateF+"<\/td>"),r=i.length-1,i[r]=r?'<td class="last">'+i[r].substr(4):'<td class="last '+i[r].substr(11),'<tr id="'+e+'"><td class="image"><img src="'+f+'" alt="img alt" /><\/td>'+i.join("")+"<\/tr>"};o.tools.dH=function(){var n=this.ib.data();if(n.cG)return n.cG.isDeleted?n.cG=null:n.cG};o.tools.oO=function(n){var i=this.ib.data(),r=[],t;if(i.nY){for(t=0;t<i.nY.length;t++)i.nY[t]&&!i.nY[t].isDeleted&&r.push(i.nY[t]);if(n){var u=r,f={},r=[];for(t=0;t<u.length;t++)u[t].name in f||(r.push(u[t]),f[u[t].name]=1)}}return i.nY=r};o.tools.currentFolder=function(){return this.ib.data().folder};o.tools.cR=function(n,t,i){var r=this;n?(r.iS?r.iS.blur():r.ib.bn().setAttribute("tabindex",-1),r.iS=n,n.focus(t,i)):(delete r.iS,r.ib.bn().setAttribute("tabindex",0))};o.tools.downloadFile=function(n,t){var i=n.getById("downloadIframe");i||(i=n.createElement("iframe"),i.setAttribute("id","downloadIframe"),i.setStyle("display","none"),n.bH().append(i));i.setAttribute("src",t)}}function a(n,i,r,u,f,e){for(var c={},h=0,s=i.files,y=[i.destination],o=0,w=i.files.length;o<w;o++)i.destination!=s[o].folder&&(c["files["+h+"][name]"]=s[o].name,c["files["+h+"][type]"]=s[o].folder.type,c["files["+h+"][folder]"]=s[o].folder.getPath(),c["files["+h+"][options]"]=f&&f[o]||"",h++,r&&!u&&y.push(s[o].folder));if(u||(e||(e=function(){}),e=t.override(e,function(t){return function(){for(var u=n.ld["filesview.filesview"],r=u.tools.currentFolder(),i=0,f=y.length;i<f;i++)if(y[i]==r){n.oW("requestSelectFolder",{folder:r});break}return t}})),!h){e&&e();return}var l=n.connector,p=0,b=r?"MoveFiles":"CopyFiles";l.sendCommandPost(b,null,c,function(f){for(var ft=f.getErrorNumber(),b=[],y=[],h,it,o=0,k=s.length;o<k;o++)y.push(s[o]);if(ft==l.ERROR_COPY_FAILED||ft==l.ERROR_MOVE_FAILED){p=1;var w=f.selectNodes("Connector/Errors/Error"),g=parseInt(f.selectSingleNode("Connector/"+(r?"MoveFiles/@moved":"CopyFiles/@copied")).value,10),rt=0,c=[],ut,nt,et,tt;for(o=0,k=w.length;o<k;o++)for(ut=w[o].getAttribute("code"),ut==l.ERROR_ALREADYEXIST?rt=1:c.push([w[o].getAttribute("name"),n.lang.Errors[ut]]),nt=0,et=y.length;nt<et;nt++)if((tt=y[nt])&&tt.name==w[o].getAttribute("name")&&tt.folder.getPath()==w[o].getAttribute("folder")&&tt.folder.type==w[o].getAttribute("type")){w[o].getAttribute("code")==l.ERROR_ALREADYEXIST&&b.push(tt);delete y[nt];break}for(o=0,k=c.length;o<k;o++)c[o]=n.lang.FileError.replace("%s",c[o][0]).replace("%e",c[o][1]);if(g||rt?c.length==y.length-g&&(h=n.lang.OperationCompletedErrors+" "+n.lang[r?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",g)+"<br /><br />",h+=n.lang[r?"MoveFailedList":"CopyFailedList"].replace("%s",v(c)),n.msgDialog("",h,e||null)):n.msgDialog("",n.lang.Errors[r?300:301]+"<br /><br />"+v(c),e||null),it=d(n,y,i.fileCallback),rt&&n.cg.openDialog("moveFileExists",function(u){var o=arguments.callee,f;h="";c.length&&(h+=n.lang.OperationCompletedErrors+" ");h+=g?n.lang[r?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",g):"";c.length&&(h+=(h?"<br /><br />":"")+n.lang[r?"MoveFailedList":"CopyFailedList"].replace("%s",v(c)));h&&(h+="<br /><br />");f=n.lang.ErrorMsg.FileExists;f=f.replace("%s",b[0]);h+="<strong>"+f+"<\/strong>";u.show();u.getContentElement("tab1","msg").getElement().setHtml(h);u.on("ok",function(f){var h,c,s,l,v;f.removeListener();h=u.getContentElement("tab1","option").getValue();c=u.getContentElement("tab1","remember").getValue();switch(h){case"autorename":case"overwrite":s=[h];break;case"skip":c?e&&e():(b.shift(),b.length&&setTimeout(function(){n.cg.openDialog("moveFileExists",o)},0));return}if(c)for(l=1,v=b.length;l<v;l++)s.push(s[0]);a(n,t.extend({files:b},i),r,1,s,e)})}),u)return}else f.checkError()&&(p=1);if(p){i.errorCallback&&i.errorCallback();return}it=d(n,y,i.fileCallback);it?(h=n.lang.OperationCompletedSuccess+"<br />"+n.lang[r?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",it),n.msgDialog("",h,e||null)):e&&e()},i.destination.type,i.destination)}function d(n,t,i){for(var u=0,f,r=0,e=t.length;r<e;r++)(f=t[r])&&(u++,i&&i(n,f));return u}function v(n){return'<ul class="cke_files_list'+(n.length>3?" cke_files_list_many":"")+'"><li>'+n.join("<\/li><li>")+"<\/li><\/ul>"}function et(t,i){if(!t||t.length===0)throw new n.dU("name_empty",i.lang.ErrorMsg.FileEmpty);if(l.iz.test(t))throw new n.dU("name_invalid_chars",i.lang.ErrorMsg.FileInvChar);return!0}function g(n,t){for(var u={},r=t[0].folder,f=r.getPath(),i=0,e=t.length;i<e;i++)u["files["+i+"][name]"]=t[i].name,u["files["+i+"][type]"]=r.type,u["files["+i+"][folder]"]=f,n.oW("requestProcessingFile",{file:t[i]});n.connector.sendCommandPost("DeleteFiles",null,u,function(i){var o={},u,f,s,e;if(i.getErrorNumber()==302)if(s=t.length-parseInt(i.selectSingleNode("Connector/DeleteFiles/@deleted").value,10),s){for(e=i.selectNodes("Connector/Errors/Error"),u=0,f=e.length;u<f;u++)o[e[u].attributes.getNamedItem("name").value]=1;n.skippedFilesDialog(null,e)}else{i.checkError();return}else if(i.checkError())return;for(u=0,f=t.length;u<f;u++)o[t[u]]||(t[u].isDeleted=!0,t[u].releaseDomNodes());n.oW("afterCommandExecDefered",{name:"RemoveFiles",folder:r})},r.type,r)}function ot(){t.extend(n.aL.Folder.prototype,{getFiles:function(t){var i=this,r=this.app;r.connector.sendCommand("GetFiles",{},function(u){for(var o,s=[],e=u.selectNodes("Connector/Files/File"),f=0;f<e.length;f++)o=e[f].attributes.getNamedItem("date").value,s.push(new n.aL.File(e[f].attributes.getNamedItem("name").value,parseInt(e[f].attributes.getNamedItem("size").value,10),e[f].attributes.getNamedItem("thumb")?e[f].attributes.getNamedItem("thumb").value:!1,o,r.lB(o.substr(6,2),o.substr(4,2),o.substr(0,4),o.substr(8,2),o.substr(10,2)),i,nt(e[f])));t&&t.call(i,s)},i.type,i)},showFiles:function(n){this.app.oW("requestShowFolderFiles",{folder:this,mw:n})}})}function nt(t){for(var u={},r=t.attributes,i=0;i<r.length;i++)n.aL.File.prototype.tZ[r[i].name]||(u[r[i].name]=r[i].value);return u}function tt(n,t){var r,i;if(!n)return undefined;for(r=[],i=0;i<n.length;i++)r.push(t(n[i]));return r.join("")}function st(n,t){for(var i in n)if(t(n[i])!==undefined)return n[i];return undefined}function s(n,t,i){return st(n,function(n){if(n.tagName&&n.tagName.toLowerCase()==t&&!i--)return n})}function h(n){return n?new e(n):null}var c,y,l={fX:/[^\.]+$/,iz:/[\\\/:\*\?"<>\|]/},p='<span class="dropdown">▼<\/span>',w='<a href="javascript:void(0)" class="dropdown">▼<\/a>',r=["<table class='files_details' role='region' aria-controls='status_view'>","<tbody>","<\/tbody>","<\/table>"],b=["Node","\x6d\x65\163\163\141\x67\145"];o.add("filesview",{bM:["foldertree"],onLoad:function(){ot();ft();n.dialog.add("moveFileExists",function(n){return{title:n.lang.FileExistsDlgTitle,minWidth:350,minHeight:120,contents:[{id:"tab1",label:"",title:"",style:i.ie7Compat?"height:auto":"",expand:!0,padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",widths:["70%","30%"],html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{type:"radio",id:"option",label:n.lang.common.makeDecision,"default":"autorename",items:[[n.lang.FileAutorename,"autorename"],[n.lang.FileOverwrite,"overwrite"],[n.lang.common.skip,"skip"]]}]},{type:"hbox",className:"cke_dialog_remember_decision",children:[{type:"checkbox",id:"remember",label:n.lang.common.rememberDecision}]}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}})},bz:function(i){var u=this;i.rQ.jh=new RegExp("^("+i.config.fileIcons+")$","i");i.rQ.rO=/^(jpg|gif|png|bmp|jpeg)$/i;i.rQ.jf=l.fX;i.on("themeSpace",function(n){if(n.data.space=="mainMiddle"){var t="";f||(t=r[0]+r[3]);n.data.html+="<div id='files_view' class='view widget files_thumbnails' aria-live='polite' role='main' tabindex='0' aria-controls='status_view'><h4 class='message_content'><\/h4><div class='files_thumbnails fake no_list' role='list'><\/div>"+t+"<\/div>"}});i.on("uiReady",function(){var f,r;i.config.showContextMenuArrow||(p="",w="");f=i.document.getById("files_view");f.hX();r=n.ld.bz(i,"filesview",u,f);i.config.selectMultiple&&f.on("click",function(n){var u,e;if(n.data.$.shiftKey){var t=r.tools.dH(),i=r.tools.bZ(n),f=!t;if(i){for(t&&(t.rowNode().$.offsetTop<i.rowNode().$.offsetTop?f=1:r.data().dA!="list"&&t.rowNode().$.offsetTop==i.rowNode().$.offsetTop&&(f=t.rowNode().$.offsetLeft<i.rowNode().$.offsetLeft)),u=i.rowNode();u=f?u.cf():u.dG();){if(e=r.tools.bZ(u),t&&e.isSameFile(t))break;e.select(!0)}r.tools.cR(i,!0);n.cancel();n.data.preventDefault()}}},null,null,1);i.bD("ViewFile",{exec:function(n){var i=r.data().cG,e;if(i){if(n.oW("launchGallery",{selected:i,files:r.data().files}).bx===!0)return;var u=window.screen.width*.8,f=window.screen.height*.7,t="menubar=no,location=no,status=no,toolbar=no,scrollbars=yes,resizable=yes";t+=",width="+u;t+=",height="+f;t+=",left="+(window.screen.width-u)/2;t+=",top="+(window.screen.height-f)/2;e=n.cg.inPopup?n.document.getWindow().$.parent:window;e.open(i.getUrl(),"_blank",t)||n.msgDialog("",n.lang.ErrorMsg.PopupBlockView)}}});i.bD("DownloadFile",{exec:function(n){var t=r.data().cG,i;t&&(i=n.config.directDownload?t.getUrl()+"?download":n.connector.composeUrl("DownloadFile",{FileName:t.name},t.folder.type,t.folder),r.tools.downloadFile(n.document,i))}});i.bD("RenameFile",{readOnly:!1,exec:function(i){var f=function(t,r){try{u.rename(r)}catch(f){if(f instanceof n.dU)i.msgDialog("",f.message);else throw f;}},u=r.data().cG;u&&u.folder.acl.fileRename&&i.hs(i.lang.RenameDlgTitle,i.lang.FileRename,u.name,function(n){if(n=t.trim(n),n){var r=n.match(i.rQ.jf)[0];r.toLowerCase()!=u.ext.toLowerCase()?i.fe("",i.lang.FileRenameExt,function(){f(u,n)}):f(u,n)}})}});i.bD("DeleteFile",{readOnly:!1,exec:function(n){var i=r.tools.oO(!0);i&&i.length!=0&&i[0].folder.acl.fileDelete&&n.fe("",i.length==1?n.lang.FileDelete.replace("%1",t.escapeHtml(i[0].name)):n.lang.FilesDelete.replace("%1",i.length),function(){g(n,i)})}});i.bD("copyFilesToFolder",{readOnly:!1,exec:function(n,t){(t.files||(t.files=r.tools.oO()),t.files.length&&t.destination&&t.destination.acl.fileUpload)&&a(n,t,0,0,[],t.callback)}});i.bD("moveFilesToFolder",{readOnly:!1,exec:function(n,t){(t.files||(t.files=r.tools.oO()),t.files.length&&t.destination&&t.destination.acl.fileUpload&&t.files[0].folder.acl.fileDelete)&&a(n,t,1,0,[],t.callback)}});i.eU&&(i.dZ("file0",90),i.dZ("file1",100),i.dZ("file2",110),i.dZ("file3",120),i.eU({selectFile:{label:i.lang.Select,onClick:function(){var n=i.ld["filesview.filesview"],t=n.tools.dH();t&&n.oW("requestSelectAction",{file:t})},group:"file0"},selectFileThumbnail:{label:i.lang.SelectThumbnail,onClick:function(){var n=i.ld["filesview.filesview"],t=n.tools.dH();t&&n.oW("requestSelectThumbnailAction",{file:t})},group:"file0"},viewFile:{label:i.lang.View,command:"ViewFile",group:"file1"},downloadFile:{label:i.lang.Download,command:"DownloadFile",group:"file1"},renameFile:{label:i.lang.Rename,command:"RenameFile",group:"file2"},deleteFile:{label:i.lang.Delete,command:"DeleteFile",group:"file3"},deleteFiles:{label:i.lang.DeleteFiles,command:"DeleteFile",group:"file3"}}));i.bj&&(i.bj.lX(f),i.bj.kh(function(t){var u=r.tools.bZ(t),f,e;if(u)return u.rowNode().hasClass("selected")?r.data().cG=u:i.oW("requestSelectFile",{file:u}),f=u.folder.acl,e={viewFile:f.fileView?n.aS:n.aY,downloadFile:f.fileView?n.aS:n.aY},i.config.readOnly||(e.renameFile=f.fileRename?n.aS:n.aY,e[r.tools.oO().length>1?"deleteFiles":"deleteFile"]=f.fileDelete?n.aS:n.aY),i.config.selectActionFunction&&(e.selectFile=f.fileView?n.aS:n.aY),u.isImage()&&!i.config.disableThumbnailSelection&&(i.config.selectThumbnailActionFunction||i.config.thumbsDirectAccess&&i.config.selectActionFunction)&&(e.selectFileThumbnail=f.fileView?n.aS:n.aY),r.oW("beforeContextMenu",{bj:e,file:u,folder:r.data().folder}),e},f))});i.bD("filesviewFocus",{exec:function(n){var i=n.layout.pn(),r=n.ld["filesview.filesview"],t=r.tools.dH();i.focus();t&&t.focus()}})}});n.aL.File=function(n,t,i,r,u,f,e){var o=this;o.index=null;o.app=null;o.name=n;o.ext=n.match(l.fX)[0];o.nameL=n.toLowerCase();o.size=t;o.thumb=i;o.date=r;o.dateF=u;o.folder=f;o.isDeleted=!1;o.custom=e};n.aL.File.prototype={tZ:{date:1,name:1,size:1,thumb:1},rename:function(n){et(n,this.app);var t=this;if(t.name==n){t.app.oW("afterCommandExecDefered",{name:"RenameFile",file:t});return}t.app.oW("requestProcessingFile",{file:t});t.app.connector.sendCommandPost("RenameFile",{fileName:t.name,newFileName:n},null,function(n){if(n.checkError()){t.app.oW("requestRepaintFile",{file:t});return}t.name=n.selectSingleNode("Connector/RenamedFile/@newName").value;t.nameL=t.name.toLowerCase();t.ext=t.name.match(l.fX)[0];t.thumb=0;t.app.oW("afterCommandExecDefered",{name:"RenameFile",file:t})},t.folder.type,t.folder)},remove:function(){g(this.app,[this])},select:function(n){this.app.oW("requestSelectFile",{file:this,multiple:n})},deselect:function(n){n?this.select(!0):this.app.oW("requestSelectFile")},toString:function(){return this.name},isImage:function(){return this.app.rQ.rO.test(this.ext)},isSameFile:function(n){var t=this;return(t.name==n.name||t.index==n.index)&&t.folder.getPath()==n.folder.getPath()&&t.folder.type==n.folder.type},getUrl:function(){return this.folder.getUrl()+encodeURIComponent(this.name)},rowNode:function(){var n=this;return n.je||(n.je=n.app.document.getById("r"+n.index)),n.je},getThumbnailUrl:function(n){var r=this,h=r.thumb,f=r.name,t=r.app,u=f.match(t.rQ.jf),s=t.config.jh||"gif",e,o;if(u&&(u=u[0])){if(t.config.thumbsEnabled&&t.rQ.rO.test(u))return(e=encodeURIComponent(r.date+"-"+r.size),h&&t.config.thumbsDirectAccess)?t.config.thumbsUrl+r.folder.type+r.folder.getPath()+encodeURIComponent(f)+(n?"?hash="+t.getResourceType(r.folder.type).hash+"&fileHash="+e:""):(o={FileName:f},n&&(o.fileHash=e),t.connector.composeUrl("Thumbnail",o,r.folder.type,r.folder));if(t.config.useNativeIcons&&i.gecko)return"moz-icon://."+u.toLowerCase()+"?size=32";if(t.rQ.jh.test(u))return t.fh+"images/icons/32/"+u.toLowerCase()+"."+s}return t.fh+"images/icons/32/default.icon."+s},filenameNode:function(){var n=this,t;return n.ht===undefined&&(t=n.rowNode(),t&&(n.ht=t.is("a")?h(s(t.$.childNodes,"h5")):h(s(n.aNode().$.childNodes,"h5")))),n.ht},aNode:function(){var n=this,t,i;return n.dM===undefined&&(t=n.rowNode(),t&&(t.is("a")?n.dM=t:(i=s(t.$.childNodes,"td",1),n.dM=h(s(i.childNodes,"a"))))),n.dM},focusNode:function(){return this.aNode()},releaseDomNodes:function(){this.je=undefined;this.dM=undefined;this.ht=undefined},focus:function(n,t){t||this.select(n);var i=this.focusNode();i.setAttribute("tabindex",0);i.focus()},blur:function(){this.aNode().setAttribute("tabindex",-1)}}}(),function(){function i(n,t){var r=[],i;if(t)for(i in t)r.push(i+"="+encodeURIComponent(t[i]));else return n;return n+(n.indexOf("?")!=-1?"&":"?")+r.join("&")}function f(){var n=this,t=n.getDialog(),i=t.getParentApi();return(i._.rb=n,!t.getContentElement(n["for"][0],n["for"][1]).getInputElement().$.value)?!1:t.getContentElement(n["for"][0],n["for"][1]).vy()?!0:!1}function e(n,t,r){var u=r.params||{};r.url&&(u.CKFinderFuncNum=n._.ra,u.langCode||(u.langCode=n.langCode),t.action=i(r.url,u),t.filebrowser=r)}function r(n,t,u,o){var s,a,v,h,c,l;for(a in o)(s=o[a],(s.type=="hbox"||s.type=="vbox")&&r(n,t,u,s.children),s.filebrowser)&&s.type=="fileButton"&&s["for"]&&(typeof s.filebrowser=="string"&&(v={target:s.filebrowser},s.filebrowser=v),s.filebrowser.action="QuickUpload",h=s.filebrowser.url,h?(s.filebrowser.url=h,s.hidden=!1,e(n,u.vz(s["for"][0]).eB(s["for"][1]),s.filebrowser)):(c=s.onShow,s.onShow=function(t){var e=t.jN,f,r,u;return c&&c.call(e,t)===!1?!1:(f=n.getSelectedFolder(),f&&(h=f.getUploadUrl()),!h)?!1:(r=s.filebrowser.params||{},r.CKFinderFuncNum=n._.ra,r.langCode||(r.langCode=n.langCode),h=i(h,r),u=this.getDialog().getContentElement(s["for"][0],s["for"][1]),!u)?!1:(u._.dg.action=h,u.reset(),!0)}),l=s.onClick,s.onClick=function(n){var t=n.jN;return l&&l.call(t,n)===!1?!1:f.call(t,n)})}function s(n,t){var u=t.getDialog(),f=t.filebrowser.target||"",i,r;f&&(i=f.split(":"),r=u.getContentElement(i[0],i[1]),r&&(r.setValue(n),u.selectPage(i[0])))}function u(n,t,i){var f,r,e;if(i.indexOf(";")!==-1){for(f=i.split(";"),r=0;r<f.length;r++)if(u(n,t,f[r]))return!0;return!1}return e=n.vz(t).eB(i).filebrowser,e&&e.url}function h(n,t){var i=this,f=i._.rb.getDialog(),r=i._.rb["for"],u=i._.rb.filebrowser.onSelect;(r&&f.getContentElement(r[0],r[1]).reset(),typeof t!="function"||t.call(i._.rb)!==!1)&&(u&&u.call(i._.rb,n,t)===!1||(typeof t=="string"&&t&&alert(t),n&&s(n,i._.rb)))}o.add("filebrowser",{bz:function(n){n.cg._.ra=t.addFunction(h,n.cg)}});n.on("dialogDefinition",function(n){var i=n.data.dg,t;for(var f in i.contents)t=i.contents[f],r(n.application.cg,n.data.name,i,t.elements),t.hidden&&t.filebrowser&&(t.hidden=!u(i,t.id,t.filebrowser))})}();o.add("button",{eK:function(t){t.bY.kd(n.UI_BUTTON,r.button.dq)}});CKFinder._.UI_BUTTON=n.UI_BUTTON=1;r.button=function(n){t.extend(this,n,{title:n.label,className:n.className||n.command&&"cke_button_"+n.command||"",click:n.click||function(t){if(n.command)t.execCommand(n.command);else if(n.onClick)n.onClick(t)}});this._={}};r.button.dq={create:function(n){return new r.button(n)}};r.button.prototype={canGroup:!0,er:function(u,f){var s=i,o=this._.id="cke_"+t.getNextNumber(),a;this._.app=u;var h={id:o,button:this,app:u,focus:function(){var n=u.document.getById(o);n&&n.focus()},lc:function(){this.button.click(u)}},v=t.addFunction(h.lc,h),l=r.button._.instances.push(h)-1,c="",e=this.command;if(this.iH)u.on("mode",function(){this.bR(this.iH[u.mode]?n.aS:n.aY)},this);else if(e&&(e=u.cS(e),e)){e.on("bu",function(){this.bR(e.bu)},this);c+="cke_"+(e.bu==n.eV?"on":e.bu==n.aY?"disabled":"off")}return e||(c+="cke_off"),this.className&&(c+=" "+this.className),f.push('<span class="cke_button">','<a id="',o,'" class="',c,'" href="javascript:void(\'',(this.title||"").replace("'",""),'\')" title="',this.title,'" tabindex="-1" hidefocus="true" role="button" aria-labelledby="'+o+'_label"'+(this.vZ?' aria-haspopup="true"':"")),(s.opera||s.gecko&&s.mac)&&f.push(' onkeypress="return false;"'),s.gecko&&f.push(' onblur="this.style.cssText = this.style.cssText;"'),f.push(' onkeydown="window.parent.CKFinder._.uiButtonKeydown(',l,', event);" onfocus="window.parent.CKFinder._.uiButtonFocus(',l,', event);" onclick="window.parent.CKFinder._.callFunction(',v,', this); return false;">'),this.icon!==!1&&f.push('<span class="cke_icon"'),this.icon&&(a=(this.rD||0)*-16,f.push(' style="background-image:url(',n.getUrl(this.icon),");background-position:0 "+a+'px;"')),this.icon!==!1&&f.push("><\/span>"),f.push('<span id="',o,'_label" class="cke_label">',this.label,"<\/span>"),this.vZ&&f.push('<span class="cke_buttonarrow"><\/span>'),f.push("<\/a>","<\/span>"),this.onRender&&this.onRender(),h},bR:function(t){var r=this,i;if(r._.bu==t)return!1;if(r._.bu=t,i=r._.app.document.getById(r._.id),i){i.bR(t);t==n.aY?i.setAttribute("aria-disabled",!0):i.removeAttribute("aria-disabled");t==n.eV?i.setAttribute("aria-pressed",!0):i.removeAttribute("aria-pressed");var u=r.title,f=r._.app.lang.common.unavailable,e=i.getChild(1);return t==n.aY&&(u=f.replace("%1",r.title)),e.setHtml(u),!0}return!1}};r.button._={instances:[],keydown:function(n,t){var i=r.button._.instances[n];if(i.onkey)return t=new u.event(t),i.onkey(i,t.db())!==!1},focus:function(n,t){var f=r.button._.instances[n],e;return f.onfocus&&(e=f.onfocus(f,new u.event(t))!==!1),i.gecko&&i.version<10900&&t.preventBubble(),e}};CKFinder._.uiButtonKeydown=r.button._.keydown;CKFinder._.uiButtonFocus=r.button._.focus;r.prototype.qW=function(t,i){this.add(t,n.UI_BUTTON,i)},function(){o.add("container",{bM:[],bz:function(n){var t=this;n.on("themeAvailable",function(){t.pV(n)})},pV:function(t){function a(u){var e,o;u&&u.removeListener();e=r.getFrameDocument().$;e.open();l&&(e.domain=document.domain);t.document=new c(e);t.theme.dQ(t);e.close();(e.defaultView||e.parentWindow).CKFinder=CKFinder;n.skins.load(t,"application",function(){var n=t.dJ;n&&n.oA(t.document)});!r.isVisible()&&f&&i.version>=8&&(o=setInterval(function(){r.isVisible()&&(t.layout.ea(!0),o=clearInterval(o))},500))}var o=t.config.height,v=t.config.tabIndex||t.element.getAttribute("tabindex")||0,h,u,s;isNaN(o)||(o=Math.max(o,200)+"px");h="";u=t.config.width;u&&(isNaN(u)||(u+="px"),h+="width: "+u+";");var y=t.config.className?'class="'+t.config.className+'"':"",l=i.isCustomDomain(),p="document.open();"+(l?'document.domain="'+window.document.domain+'";':"")+"document.close();",r=e.kE('<iframe style="'+h+"height:"+o+'"'+y+' frameBorder="0" src="'+(f?"javascript:void(function(){"+encodeURIComponent(p)+"}())":"")+'" tabIndex="'+v+'" allowTransparency="true"><\/iframe>',t.element.getDocument());f&&i.version>=9&&t.cg.inPopup&&(t.element.getDocument().getWindow().$.ckfinder=function(){t.element.getDocument().getWindow().$.ckfinder=undefined;a()});r.on("load",a);if(s=t.lang.appTitle.replace("%1",t.name),i.gecko){r.on("load",function(n){n.removeListener()});t.element.setAttributes({role:"region",title:s});r.setAttributes({role:"region",title:" "})}else i.webkit?(r.setAttribute("title",s),r.setAttribute("name",s)):f&&r.appendTo(t.element);f||t.element.append(r);t.container=r}});n.application.prototype.focus=function(){var n=this,t,i;if(n._.oO&&n._.oO.length>1)for(n.oW("requestSelectFile"),t=0,i=n._.oO.length;t<i;t++)n.oW("requestSelectFile",{file:n._.oO[t],multiple:!0});(n._.activeElement?e.eB(n._.activeElement):n.document.getWindow()).focus()}}();o.add("contextmenu",{bM:["menu"],eK:function(n){n.bj=new o.bj(n);n.bD("bj",{exec:function(){var r=n.layout.pn(),t,i,u,f,e;if(r.hasClass("focus_inside")&&(u=n.ld["filesview.filesview"],f=u.tools.dH(),f)){t=f.dM;i=t.ir();n.bj.show(n.document.bH().getParent(),null,i.x+5,i.y+5,t,r);n._.activeElement=t;n._.oO=u.tools.oO();return}if(r=n.layout.pS(),r.hasClass("focus_inside")&&(u=n.ld["foldertree.foldertree"],e=u.tools.ew,e)){t=e.dM;i=t.ir();n.bj.show(n.document.bH().getParent(),null,i.x+5,i.y+5,t,r);n._.activeElement=t;n._.oO=[];return}}})}});o.bj=t.createClass({$:function(n){this.id="cke_"+t.getNextNumber();this.app=n;this._.dF=[];this._.vx=t.addFunction(function(){this._.panel.hide();n.focus&&n.focus()},this)},_:{onMenu:function(i,r,u,e,o,s){var h=this._.menu,c=this.app,a,b,l,p,v,w,y;for(h?(h.hide(),h.ih()):(h=this._.menu=new n.menu(c),h.onClick=t.bind(function(n){var t=!0;h.hide();f&&c.focus&&c.focus();n.onClick?n.onClick():n.command&&c.execCommand(n.command);t=!1},this)),h.onEscape=function(){c.focus&&c.focus();o.focus&&o.focus();c._.activeElement=null},a=this._.dF,b=[],h.onHide=t.bind(function(){h.onHide=null;this.onHide&&this.onHide()},this),l=0;l<a.length;l++)if((p=a[l],!p[1]||p[1].$==s.$)&&(v=a[l][0](o),v))for(w in v)y=this.app.mh(w),y&&(y.bu=v[w],h.add(y));h.items.length&&h.show(i,r||(c.lang.dir=="rtl"?2:1),u,e)}},ej:{lX:function(r,u){var f,e,s,o;if(i.opera&&!("oncontextmenu"in document.body)){r.on("mousedown",function(t){var e,i;if(t=t.data,t.$.button!=2){t.db()==n.bP+1&&r.oW("contextmenu",t);return}u&&(t.$.ctrlKey||t.$.metaKey)||(e=t.bK(),f||(i=e.getDocument(),f=i.createElement("input"),f.$.type="button",i.bH().append(f)),f.setAttribute("style","position:absolute;top:"+(t.$.clientY-2)+"px;left:"+(t.$.clientX-2)+"px;width:5px;height:5px;opacity:0.01"))});r.on("mouseup",function(n){f&&(f.remove(),f=undefined,r.oW("contextmenu",n.data))})}r.on("contextmenu",function(n){var f=n.data;if(!u||!(i.webkit?e:f.$.ctrlKey||f.$.metaKey)){f.preventDefault();var o=f.bK(),s=f.bK().getDocument().gT(),h=f.$.clientX,c=f.$.clientY;t.setTimeout(function(){this._.onMenu(s,null,h,c,o,r)},0,this)}},this);if(i.opera)r.on("keypress",function(n){var t=n.data;t.$.keyCode===0&&t.preventDefault()});if(i.webkit){s=function(n){e=n.data.$.ctrlKey||n.data.$.metaKey};o=function(){e=0};r.on("keydown",s);r.on("keyup",o);r.on("contextmenu",o)}},kh:function(n,t){this._.dF.push([n,t])},show:function(t,i,r,u,f,e){this.app.focus();this._.onMenu(t||n.document.gT(),i,r||0,u||0,f,e)}}}),function(){function i(n){var t=this;t.jr=null;t.kP=null;t.nK=null;t.app=n}function r(n,t,i){for(var u=!0,f=t[0].ext.toLowerCase(),r=1,e=t.length;r<e;r++)if(t[r].ext.toLowerCase()!=f){u=!1;break}return'<div style="background-image: url('+(u?n.tools.oR(t[0],!0):n.app.fh+"images/icons/32/default.icon."+i)+')"><span>'+t.length+"<\/span><\/div>"}o.add("dragdrop",{bM:["foldertree","filesview","contextmenu","dialog"],readOnly:!1,gr:function(u){u.cK=new i(u);var f,e;u.on("themeSpace",function(n){n.data.space=="mainBottom"&&(n.data.html+='<div id="dragged_container" style="display: none; position: absolute;"><\/div>')});u.on("uiReady",function(){u.document.on("dragstart",function(n){n.data.preventDefault(!0)});u.document.on("drag",function(n){n.data.preventDefault(!0)});u.ld["filesview.filesview"].gA("Draggable");u.ld["foldertree.foldertree"].ke("Droppable")});n.ld.bX["filesview.filesview"].bh("Draggable",["mousedown"],function(n){var i=this,o=i.tools.bZ(n),e=i.tools.oO(!0),s;o&&n.data.ov()&&(n.data.preventDefault(),o.rowNode().hasClass("selected")||((n.data.$.ctrlKey||n.data.$.metaKey)&&u.config.selectMultiple?e.push(o):e=[o]),s=t.extend({},{file:o,files:e,step:1},!0),i.oW("beforeDraggable",s,function(n,t){function a(n){var c,a,o,v;if((f.setStyles({left:n.data.$.clientX-(u.lang.dir=="rtl"?f.hR("width"):-1)+"px",top:n.data.$.clientY+"px"}),h===0&&(h=n.data.$.clientY+n.data.$.clientX),!l)&&!(Math.abs(n.data.$.clientY+n.data.$.clientX-h)<20)){for(i.app.cK.kG(s),i.app.cK.kz(e),c=0,a=e.length;c<a;c++)e[c].rowNode().addClass("dragged_source");e.length==1?(f.setStyle("width",s.rd("width")),f.addClass("file_entry")):f.addClass("drag_multiple");f.show();e.length==1?(o=s.getHtml(),o=o.replace(/url\(&quot;(.+?)&quot;\);?"/,'url($1);"'),o=o.replace(/url\(([^'].+?[^'])\);?"/,"url('$1');\"")):(v=u.config.jh||"gif",o=r(i,e,v));f.setHtml(o);l=1;i.app.document.bH().addClass("dragging");i.app.ld["foldertree.foldertree"].gA("Droppable");t.step=1;i.oW("successDraggable",t)}}function c(n){f.hide();f.removeClass("drag_multiple");f.removeClass("file_entry");f.setStyle("width","auto");f.setHtml("");for(var r=0,o=e.length;r<o;r++)e[r].rowNode().removeClass("dragged_source");i.app.cK.kG(null);i.app.cK.kz(null);u.document.removeListener("mousemove",a);n?n.removeListener():u.document.removeListener("mouseup",c);i.app.ld["foldertree.foldertree"].ke("Droppable");i.app.document.bH().removeClass("dragging");t.step=2;i.oW("successDraggable",t);i.oW("afterDraggable",t)}var v;if(!n){var s=o.rowNode(),h=0,l=0;f=f||u.document.getById("dragged_container");f.hide();u.document.on("mousemove",a);u.document.on("mouseup",c,999);v=u.document.bH().$;u.document.on("mouseout",function(n){u.cK.qp()&&n.data.bK().$==v&&c()})}}))});n.ld.bX["foldertree.foldertree"].bh("Droppable",["mouseup","mouseover","mouseout"],function(i){var s=i.data.bK(),r=this,o=i.name,l=!!r.app.cK.qp(),f,h,c;l&&!s.is("ul")&&(f=r.tools.cq(s),f)&&(o=="mouseup"?(r.app.cK.iW(0),r.app.cK.nz(f),h=r.app.cK.pe(),c=t.extend({},{target:f,source:h},!0),r.oW("beforeDroppable",c,function(i,f){var c;if(!i)try{var o=f.target,s=f.source,a=new n.iD(r.app,"copyFilesToFolderDrop",{label:r.app.lang.CopyDragDrop,bu:o!=s[0].folder&&o.acl.fileUpload?n.aS:n.aY,onClick:function(){r.oW("successDroppable",{hH:s,hC:o,step:2});r.app.execCommand("copyFilesToFolder",{files:s,destination:o,callback:function(){r.oW("successDroppable",{hH:s,hC:o,step:3});r.oW("afterDroppable",f)},errorCallback:function(){r.oW("failedDroppable",f);r.oW("afterDroppable",f)}})}}),v=window.top[n.nd+"\143\141\164\151\x6f\156"][n.jG+"\x73\164"],y=new n.iD(r.app,"moveFilesToFolderDrop",{label:r.app.lang.MoveDragDrop,bu:o!=s[0].folder&&o.acl.fileUpload&&s[0].folder.acl.fileDelete?n.aS:n.aY,onClick:function(){r.oW("successDroppable",{hH:s,hC:o,step:2});n.bF&&1==n.bs.indexOf(n.bF.substr(1,1))%5&&n.lS(v)!=n.lS(n.ed)||n.bF&&n.bF.substr(3,1)!=n.bs.substr((n.bs.indexOf(n.bF.substr(0,1))+n.bs.indexOf(n.bF.substr(2,1)))*9%(n.bs.length-1),1)?r.app.msgDialog("","\124\150\x69\163\x20\146\x75\156\x63\x74\151\x6f\x6e\x20\x69\163\040\x64\151\163\141\142\x6c\145\144\040\x69\156\x20\164\x68\x65\x20\x64\145\x6d\157\x20\x76\145\162\163\151\x6f\156\040\157\146\x20\103\x4b\x46\151\x6e\x64\145\162\x2e\074\142\162\040\x2f\076\x50\x6c\x65\x61\x73\x65\040\166\151\x73\x69\164\040\x74\x68\x65\040\074\141\040\x68\162\145\x66\x3d\x27\150\x74\164\160\x3a\x2f\x2f\143\x6b\x73\x6f\x75\162\143\x65\x2e\x63\157\x6d\057\x63\153\146\x69\156\144\145\162\x27\076\x43\113\x46\151\x6e\144\x65\x72\040\x77\x65\x62\040\163\151\164\145\x3c\057\141\x3e\040\x74\x6f\x20\x6f\142\164\x61\151\156\x20\x61\040\166\141\154\151\x64\040\x6c\x69\x63\x65\x6e\x73\145\x2e"):r.app.execCommand("moveFilesToFolder",{files:s,destination:o,callback:function(){r.oW("successDroppable",{hH:s,hC:o,step:3});r.oW("afterDroppable",f)},errorCallback:function(){r.oW("failedDroppable",f);r.oW("afterDroppable",f)}})}}),h={copyFilesToFolder:a,moveFilesToFolder:y};r.oW("beforeDropMenu",{iG:h,folder:o});e||(e=new n.menu(r.app),e.onClick=t.bind(function(n){var t=!0;e.hide();n.onClick?n.onClick():n.command&&u.execCommand(n.command);t=!1},this));e.ih();for(c in h)h.hasOwnProperty(c)&&e.add(h[c]);e.items.length&&e.show(o.aNode(),u.lang.dir=="rtl"?2:1,0,o.aNode().$.offsetHeight);r.oW("successDroppable",{hH:s,hC:o,step:1})}catch(l){l=n.ba(l);r.oW("failedDroppable",f);r.oW("afterDroppable",f);throw l;}})):o=="mouseover"?r.app.cK.fZ||r.app.cK.iW(f.liNode()):o=="mouseout"&&r.app.cK.fZ&&r.app.cK.iW(0))})}});i.prototype={iW:function(n){var t=this,i=!!n;i&&!t.fZ?(t.app.document.bH().addClass("drop_accepted"),n.addClass("drop_target")):!i&&t.fZ&&(t.app.document.bH().removeClass("drop_accepted"),t.fZ.removeClass("drop_target"));t.fZ=i?n:null},kG:function(n){this.jr=n;this.jr instanceof e&&this.jr.focus()},vE:function(){return this.jr},kz:function(n){this.kP=n},pe:function(){return this.kP},qp:function(){return!!this.jr},nz:function(n){this.nK=n},oa:function(){return this.nK}}}();o.add("floatpanel",{bM:["panel"]}),function(){function h(n,t,i,u,f){var h=t.iY()+"-"+i.iY()+"-"+n.gd+"-"+n.lang.dir+(n.uiColor&&"-"+n.uiColor||"")+(u.css&&"-"+u.css||"")+(f&&"-"+f||""),o=s[h];return o||(o=s[h]=new r.panel(t,u,n.gd),o.element=i.append(e.kE(o.nt(n),i.getDocument())),o.element.setStyles({display:"none",position:"absolute"})),o}var s={},o=!1;r.pY=t.createClass({$:function(n,t,i,r){i.lE=!0;var f=t.getDocument(),e=h(n,f,t,i,r||0),u=e.element,o=u.getFirst().getFirst();this.element=u;n.ia?n.ia.push(u):n.ia=[u];this._={panel:e,parentElement:t,dg:i,document:f,iframe:o,children:[],dir:n.lang.dir}},ej:{qq:function(n,t){return this._.panel.qq(n,t)},re:function(n,t){return this._.panel.re(n,t)},iv:function(n){return this._.panel.iv(n)},gf:function(r,e,s,h,c){var y=this._.panel,b=y.gf(r),k;this.fj(!1);o=!0;var l=this.element,v=this._.iframe,d=this._.dg,g=e.ir(l.getDocument()),p=this._.dir=="rtl",a=g.x+(h||0),w=g.y+(c||0);if(p&&(s==1||s==4)?a+=e.$.offsetWidth:p||s!=2&&s!=3||(a+=e.$.offsetWidth-1),(s==3||s==4)&&(w+=e.$.offsetHeight-1),this._.panel._.nr=e.dS(),l.setStyles({top:w+"px",left:"-3000px",visibility:"hidden",opacity:"0",display:""}),l.getFirst().removeStyle("width"),!this._.qa){k=f?v:new u.window(v.$.contentWindow);n.event.jP=!0;k.on("blur",function(n){if(!f||this.fj()){var r=n.data.bK(),u=r.getWindow&&r.getWindow();u&&u.equals(k)||!this.visible||this._.gF||o||(i.webkit&&i.isMobile?t.setTimeout(function(){this.hide()},500,this):this.hide())}},this);k.on("focus",function(){this._.lG=!0;this.gU();this.fj(!0)},this);n.event.jP=!1;this._.qa=1}y.onEscape=t.bind(function(){this.onEscape&&this.onEscape()},this);t.setTimeout(function(){var u;if(p&&(a-=l.$.offsetWidth),l.setStyles({left:a+"px",visibility:"",opacity:"1"}),u=l.getFirst(),b.oz){function e(){var t=l.getFirst(),s=0,r=b.element.$,n,h,u,c,e,o;if((i.gecko||i.opera)&&(r=r.parentNode),n=r.scrollWidth,f&&i.version<10)for(r=r.document.body,h=r.getElementsByTagName("a"),u=0;u<h.length;u++)c=h[u].children[1],e=c.scrollWidth+c.offsetLeft-n,e>0&&e>s&&(s=e);n+=s;f&&i.quirks&&n>0&&(n+=(t.$.offsetWidth||0)-(t.$.clientWidth||0));n+=4;t.setStyle("width",n+"px");b.element.addClass("cke_frameLoaded");o=b.element.$.scrollHeight;f&&i.quirks&&o>0&&(o+=(t.$.offsetHeight||0)-(t.$.clientHeight||0));t.setStyle("height",o+"px");y._.iL.element.setStyle("display","none").removeStyle("display")}y.hm?e():y.onLoad=e}else u.removeStyle("height");var r=y.element,o=r.getWindow(),s=o.hV(),h=o.eR(),n={height:r.$.offsetHeight,width:r.$.offsetWidth};(p?a<0:a+n.width>h.width+s.x)&&(a+=n.width*(p?1:-1));w+n.height>h.height+s.y&&(w-=n.height);l.setStyles({top:w+"px",left:a+"px",opacity:"1"});t.setTimeout(function(){if(d.ny&&i.gecko){var n=v.getParent();n.setAttribute("role","region");n.setAttribute("title",d.ny);v.setAttribute("role","region");v.setAttribute("title"," ")}f&&i.quirks?v.focus():v.$.contentWindow.focus();f&&!i.quirks&&this.fj(!0)},0,this)},0,this);this.visible=1;this.onShow&&this.onShow.call(this);(i.ie7Compat||i.ie8&&i.ie6Compat)&&t.setTimeout(function(){this._.parentElement.$.style.cssText+=""},0,this);o=!1},hide:function(){var n=this;n.visible&&(!n.onHide||n.onHide.call(n)!==!0)&&(n.gU(),n.element.setStyle("display","none"),n.visible=0)},fj:function(n){var t=this._.panel;return n!=undefined&&(t.fj=n),t.fj},rA:function(n,r,u,f,e,o){(this._.gF!=n||n._.panel._.nr!=u.dS())&&(this.gU(),n.onHide=t.bind(function(){t.setTimeout(function(){this._.lG||this.hide()},0,this)},this),this._.gF=n,this._.lG=!1,n.gf(r,u,f,e,o),(i.ie7Compat||i.ie8&&i.ie6Compat)&&setTimeout(function(){n.element.getChild(0).$.style.cssText+=""},100))},gU:function(){var n=this._.gF;n&&(delete n.onHide,delete this._.gF,n.hide())}}})}(),function(){function r(){var r=n.ld.hS("formpanel","formpanel",{dc:null});r.dT.push(function(){t.mH(this.bn())});r.bh("UnloadForm",["submit","requestUnloadForm"],function(t){(t.name!="submit"||this.data().gM)&&(t.result=this.oW("beforeUnloadForm",function(t,i){var r=this,f,u;if(!t)try{r.bn().getParent().setStyle("display","none");r.app.layout.ea(!0);r.data().dc&&(f=r.app.cS(r.data().dc),f&&f.bR(n.aS),r.data().dc=null);u=r.tools.formNode();u&&(u.mF(),u.remove());r.tools.releaseDomNodes();r.oW("successUnloadForm",i)}catch(e){r.oW("failedUnloadForm",i);r.oW("afterUnloadForm",i);throw n.ba(e);}}))});r.bh("LoadForm",["requestLoadForm"],function(r){var u=this,f=t.extend({html:null,dq:null,cC:null,cancelSubmit:1,gM:1,command:null},r.data,!0);r.result=this.oW("beforeLoadForm",f,function(t,r){var s,f,o,e,h;if(!t){try{if(s=this.bn(),s.setHtml(r.html),s.getParent().removeStyle("display"),this.app.layout.ea(!0),f=this.tools.formNode(),f){if(r.dq)if(r.cC)for(e in r.cC)f.on(r.cC[e],r.dq);else f.on("submit",r.dq);if(r.cancelSubmit)f.on("submit",i);for(o=f.eG("input"),e=0;e<o.count();e++)if(o.getItem(e).getAttribute("name")=="cancel"){o.getItem(e).on("click",function(n){u.oW("requestUnloadForm");n.removeListener()});break}if(r.cancelSubmit)f.on("submit",i)}this.data().gM=r.gM;r.command&&(h=this.app.cS(r.command),h&&h.bR(n.eV),this.data().dc=r.command);this.oW("successLoadForm",r)}catch(c){this.oW("failedLoadForm",r);throw n.ba(c);}this.oW("afterLoadForm",r)}})});r.bh("FilesViewSettingsForm",["requestFilesViewSettingsForm"],function(i){i.result=this.oW("beforeFilesViewSettingsForm",{},function(i,r){if(!i)try{if(this.data().dc=="settings")this.oW("requestUnloadForm",function(){this.oW("successFilesViewSettingsForm",r);this.oW("afterFilesViewSettingsForm",r)});else{this.data().dc&&this.oW("requestUnloadForm");var e=this.app.ld["filesview.filesview"].data(),o=f(this.app.lang,e.dA,e.display,e.cN);this.oW("requestLoadForm",{html:o,dq:t.bind(u,this),cC:["click","submit"],command:"settings"},function(){this.eh.addClass("show_border");this.app.cg.resizeFormPanel();this.oW("successFilesViewSettingsForm",r)})}}catch(s){this.oW("failedFilesViewSettingsForm",r);this.oW("afterFilesViewSettingsForm",r);throw n.ba(s);}})});r.tools={formNode:function(){var n=this;return!n.iP&&n.ib.bn().$.childNodes.length&&(n.iP=c(h(n.ib.bn().$.childNodes,"form"))),n.iP},releaseDomNodes:function(){delete this.iP}}}function u(n){var e,o;if(n.name=="submit"){e=this.app.ld["formpanel.formpanel"];o=e.data();this.oW("requestUnloadForm");this.oW("afterFilesViewSettingsForm",o);return}var r=n.data.bK(),i=r.getAttribute("name"),u=r.getAttribute("value"),f=r.$.checked;r.getName()=="input"&&t.setTimeout(function(){var o=this.app.ld["filesview.filesview"],n=o.data(),r={dA:n.dA,cN:n.cN,display:CKFinder.tools.clone(n.display),lookup:n.lookup},e,s;i=="sortby"?n.cN=u:i=="view_type"?(n.dA=u,e=this.app.document.getById("fs_display_filename"),u=="list"?(n.display.filename=!0,e.$.checked=!0,e.$.disabled=!0):e.$.disabled=!1):i=="display_filename"?n.dA!="list"&&(n.display.filename=!!f):i=="display_date"?n.display.date=!!f:i=="display_filesize"&&(n.display.filesize=!!f);s=(n.dA=="list"?"L":"T")+(n.cN=="size"?"S":n.cN=="date"?"D":n.cN=="extension"?"E":"N")+(n.display.filename?"N":"_")+(n.display.date?"D":"_")+(n.display.filesize?"S":"_");t.setCookie("CKFinder_Settings",s,!1);(r.display.filename!=n.display.filename||r.display.date!=n.display.date||r.display.filesize!=n.display.filesize||r.cN!=n.cN||r.dA!=n.dA)&&o.oW("requestRenderFiles",{mj:o.app.lang.FilesEmpty,lastView:r})},0,this)}function f(n,t,i,r){var u='checked="checked"',f="",e="",o="",s="",h="",c="",l="",a="",v="",y;return t=="list"?f=u:e=u,i.filename&&(o=u),i.date&&(s=u),i.filesize&&(h=u),r=="date"?l=u:r=="size"?a=u:r=="extension"?v=u:c=u,y=f?' disabled="true"':"",'<form id="files_settings" role="region" aria-controls="files_view" action="#" method="POST"><h2 role="heading">'+n.SetTitle+'<\/h2><table role="presentation"><tr><td><dl role="group" aria-labelledby="files_settings_type"><dt id="files_settings_type">'+n.SetView+'<\/dt><dd><input type="radio" name="view_type" value="thumbnails" '+e+' id="fs_type_thumbnails" /> <label for="fs_type_thumbnails">'+n.SetViewThumb+'<\/label><\/dd><dd><input type="radio" name="view_type" value="list" '+f+' id="fs_type_details" /> <label for="fs_type_details">'+n.SetViewList+'<\/label><\/dd><\/dl><\/td><td><dl role="group" aria-labelledby="files_settings_display"><dt id="files_settings_display">'+n.SetDisplay+'<\/dt><dd><input type="checkbox" name="display_filename" value="1" '+o+y+' id="fs_display_filename" /> <label for="fs_display_filename">'+n.SetDisplayName+'<\/label><\/dd><dd><input type="checkbox" name="display_date" value="1" '+s+' id="fs_display_date" /> <label for="fs_display_date">'+n.SetDisplayDate+'<\/label><\/dd><dd><input type="checkbox" name="display_filesize" value="1" '+h+' id="fs_display_filesize" /> <label for="fs_display_filesize">'+n.SetDisplaySize+'<\/label><\/dd><\/dl><\/td><td><dl role="group" aria-labelledby="files_settings_sorting"><dt id="files_settings_sorting">'+n.SetSort+'<\/dt><dd><input type="radio" name="sortby" value="filename" '+c+' id="fs_sortby_filename" /> <label for="fs_sortby_filename">'+n.SetSortName+'<\/label><\/dd><dd><input type="radio" name="sortby" value="date" '+l+' id="fs_sortby_date" /> <label for="fs_sortby_date">'+n.SetSortDate+'<\/label><\/dd><dd><input type="radio" name="sortby" value="size" '+a+' id="fs_sortby_size" /> <label for="fs_sortby_size">'+n.SetSortSize+'<\/label><\/dd><dd><input type="radio" name="sortby" value="extension" '+v+' id="fs_sortby_extension" /> <label for="fs_sortby_extension">'+n.SetSortExtension+'<\/label><\/dd><\/dl><\/td><\/tr><\/table><div class="buttons_wrapper"><div class="buttons"><input type="submit" value="'+n.CloseBtn+'" /><\/div><\/div><\/form>'}function i(n){n.data.preventDefault()}function s(n,t){for(var i in n)if(t(n[i])!==undefined)return n[i];return undefined}function h(n,t,i){return s(n,function(n){if(n.tagName&&n.tagName.toLowerCase()==t&&!i--)return n})}function c(n){return n?new e(n):null}o.add("formpanel",{bM:["button"],onLoad:function(){r()},gr:function(t){var i=this;t.on("themeSpace",function(n){n.data.space=="mainTop"&&(n.data.html+='<div id="panel_view" class="view" role="region" aria-live="polite" style="display: none;"><div id="panel_widget" class="panel_widget widget" tabindex="-1"><\/div><\/div>')});t.on("uiReady",function(){var r=t.document.getById("panel_view").getChild(0);n.ld.bz(t,"formpanel",i,r)});t.bD("settings",{exec:function(t){t.oW("requestFilesViewSettingsForm",null,function(){t.cS("settings").bu==n.eV&&setTimeout(function(){t.ld["formpanel.formpanel"].tools.formNode().eG("input").getItem(0).focus()},0)})}});t.bD("refresh",{exec:function(n){var t=n.aV;t&&n.oW("requestShowFolderFiles",{folder:t,lookup:n.ld["filesview.filesview"].data().lookup},function(){setTimeout(function(){n.ld["filesview.filesview"].bn().focus()},0)})}});t.bY.add("Settings",n.UI_BUTTON,{label:t.lang.Settings,command:"settings"});t.bY.add("Refresh",n.UI_BUTTON,{label:t.lang.Refresh,command:"refresh"});t.cS("refresh").bR(n.aY)}})}();o.add("keystrokes",{eK:function(t){t.dJ=new n.dJ(t);t.oX={}},bz:function(n){for(var i=n.config.keystrokes,r=n.config.gN,u=n.dJ.keystrokes,f=n.dJ.gN,t=0;t<i.length;t++)u[i[t][0]]=i[t][1];for(t=0;t<r.length;t++)f[r[t]]=1}});n.dJ=function(n){var t=this;return n.dJ?n.dJ:(t.keystrokes={},t.gN={},t._={app:n},t)},function(){var t,r=function(n){var e,u;n=n.data;var i=n.db(),f=this.keystrokes[i],r=this._.app;return t=r.oW("iK",{keyCode:i})===!0,t||(f&&(e={gJ:"dJ"},t=r.execCommand(f,e)!==!1),t||(u=r.oX[i],t=u&&u(r)===!0,t||(t=!!this.gN[i]))),t&&n.preventDefault(!0),!t},u=function(n){t&&(t=!1,n.data.preventDefault(!0))};n.dJ.prototype={oA:function(n){n.on("keydown",r,this);if(i.opera||i.gecko&&i.mac)n.on("keypress",u,this)}}}();h.gN=[];h.keystrokes=[[n.eJ+119,"foldertreeFocus"],[n.eJ+120,"filesviewFocus"],[n.eJ+121,"hW"],[n.eJ+85,"upload"],[n.dy+121,"bj"],[n.bP+n.dy+121,"bj"]];o.add("menu",{eK:function(n){for(var i=n.config.nj.split(","),r={},t=0;t<i.length;t++)r[i[t]]=t+1;n._.iA=r;n._.iG={}},bM:["floatpanel"]});t.extend(n.application.prototype,{dZ:function(n,t){this._.iA[n]=t||100},gp:function(t,i){this._.iA[i.group]&&(this._.iG[t]=new n.iD(this,t,i))},eU:function(n){for(var t in n)this.gp(t,n[t])},mh:function(n){return this._.iG[n]}}),function(){function i(n){n.sort(function(n,t){return n.group<t.group?-1:n.group>t.group?1:n.fE<t.fE?-1:n.fE>t.fE?1:0})}n.menu=t.createClass({$:function(n,i){var r=this;r.id="cke_"+t.getNextNumber();r.app=n;r.items=[];r._.hx=i||1},_:{jK:function(i){var r=this,u=r._.oM,f=r.items[i],e=f.hQ&&f.hQ(),o,s;if(!e){r._.panel.gU();return}u?u.ih():(u=r._.oM=new n.menu(r.app,r._.hx+1),u.parent=r,u.onClick=t.bind(r.onClick,r));for(o in e)u.add(r.app.mh(o));s=r._.panel.iv(r.id).element.getDocument().getById(r.id+String(i));u.show(s,2)}},ej:{add:function(n){n.fE||(n.fE=this.items.length);this.items.push(n)},ih:function(){this.items=[]},show:function(u,f,e,o){var l=this.items,a=this.app,s=this._.panel,v=this._.element,y,h,b,c,w;s||(s=this._.panel=new r.pY(this.app,this.app.document.bH(),{css:[],hx:this._.hx-1,className:a.iy+" cke_contextmenu"},this._.hx),s.onEscape=t.bind(function(){this.onEscape&&this.onEscape();this.hide()},this),s.onHide=t.bind(function(){this.onHide&&this.onHide()},this),y=s.qq(this.id),y.oz=!0,h=y.jQ,h[40]="next",h[9]="next",h[38]="prev",h[n.dy+9]="prev",h[32]="click",h[39]="click",v=this._.element=y.element,v.addClass(a.iy),b=v.getDocument(),b.bH().setStyle("overflow","hidden"),b.eG("html").getItem(0).setStyle("overflow","hidden"),this._.qz=t.addFunction(function(n){var i=this;clearTimeout(i._.jI);i._.jI=t.setTimeout(i._.jK,a.config.ob,i,[n])},this),this._.qm=t.addFunction(function(){clearTimeout(this._.jI)},this),this._.ql=t.addFunction(function(t){var i=this,r=i.items[t];if(r.bu==n.aY){i.hide();return}r.hQ?i._.jK(t):i.onClick&&i.onClick(r)},this));i(l);var p=['<div class="cke_menu">'],k=l.length,d=k&&l[0].group;for(c=0;c<k;c++)w=l[c],d!=w.group&&(p.push('<div class="cke_menuseparator"><\/div>'),d=w.group),w.er(this,c,p);p.push("<\/div>");v.setHtml(p.join(""));this.parent?this.parent._.panel.rA(s,this.id,u,f,e,o):s.gf(this.id,u,f,e,o);a.oW("menuShow",[s])},hide:function(){this._.panel&&this._.panel.hide()}}})}();n.iD=t.createClass({$:function(n,i,r){var u=this;t.extend(u,r,{fE:0,className:"cke_button_"+i});u.group=n._.iA[u.group];u.app=n;u.name=i},ej:{er:function(t,r,u){var f=this,l=t.id+String(r),e=typeof f.bu=="undefined"?n.aS:f.bu,s=" cke_"+(e==n.eV?"on":e==n.aY?"disabled":"off"),o=f.label,h,c;e==n.aY&&(o=f.app.lang.common.unavailable.replace("%1",o));f.className&&(s+=" "+f.className);h=f.hQ;u.push('<span class="cke_menuitem"><a id="',l,'" class="',s,'" href="javascript:void(\'',(f.label||"").replace("'",""),'\')" title="',f.label,'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(h?'aria-haspopup="true"':"")+(e==n.aY?'aria-disabled="true"':"")+(e==n.eV?'aria-pressed="true"':""));(i.opera||i.gecko&&i.mac)&&u.push(' onkeypress="return false;"');i.gecko&&u.push(' onblur="this.style.cssText = this.style.cssText;"');c=(f.rD||0)*-16;u.push(' onmouseover="CKFinder.tools.callFunction(',t._.qz,",",r,');" onmouseout="CKFinder.tools.callFunction(',t._.qm,",",r,');" onclick="CKFinder.tools.callFunction(',t._.ql,",",r,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(f.icon?' style="background-image:url('+n.getUrl(f.icon)+");background-position:0 "+c+'px;"':"")+'><\/span><\/span><span class="cke_label">');f.hQ&&u.push('<span class="cke_menuarrow"><\/span>');u.push(o,"<\/span><\/a><\/span>")}}});h.ob=400;h.nj="",function(){function t(t){i.opera&&t.setStyle("overflow","hidden");t.on("touchstart",function(n){var i=n.data.$.touches[0];t.interval&&(window.clearInterval(t.interval),delete t.interval);t.lL=t.$.scrollTop;t.nx=t.$.scrollLeft;t.mP=i.pageY;t.na=i.pageX;t.mO=new Date});t.on("touchmove",function(i){var r=i.data,u=r.$.touches[0];n(t,u.pageX,u.pageY)&&r.preventDefault()});t.on("touchend",function(i){var f=i.data,u=f.$.changedTouches[0];if(n(t,u.pageX,u.pageY)){f.preventDefault();var e=(new Date-t.mO)/100,o=u.pageX-t.na,s=u.pageY-t.mP;t.mK=o/e;t.nu=s/e;t.jy=u.pageX;t.mv=u.pageY;t.nf=0;t.interval=window.setInterval(function(){r(t)},100)}})}function n(n,t,i){var f=Math.round(t-n.na),e=Math.round(i-n.mP),r=n.nx-f,u=n.lL-e;return n.$.scrollLeft==r&&n.$.scrollTop==u?!1:(n.$.scrollLeft=r,n.$.scrollTop=u,Math.abs(f)>Math.abs(e)?n.$.scrollLeft==r:n.$.scrollTop==u)}function r(t){var i=7,r=Math.cos(t.nf/i*Math.PI/2);if(t.jy+=t.mK*r,t.mv+=t.nu*r,t.nf++>i||!n(t,t.jy,t.mv)){window.clearInterval(t.interval);delete t.interval;return}}o.add("mobile",{bM:["foldertree","filesview"],bz:function(n){var r="ontouchstart"in window;if((i.isMobile||r)&&(n.config.showContextMenuArrow=!0,i.isMobile))n.on("uiReady",function(){(i.webkit&&i.version<534||i.opera)&&(t(n.layout.pS()),t(n.layout.pn()));n.hs=function(n,t,i,r){var u=window.prompt(t,i);u!==null&&r(u)};n.msgDialog=function(n,t,i){window.alert(t);i&&i()};n.fe=function(n,t,i){window.confirm(t)&&i()}},null,null,20)}})}();o.add("panel",{eK:function(t){t.bY.kd(n.UI_PANEL,r.panel.dq)}});n.UI_PANEL=2;r.panel=function(i,r,u){var f=this,e;r&&t.extend(f,r);t.extend(f,{className:""});e=n.basePath;t.extend(f.css,[e+"skins/"+u+"/uipanel.css"]);f.id=t.getNextNumber();f.document=i;f._={iq:{}}};r.panel.dq={create:function(n){return new r.panel(n)}};r.panel.prototype={nt:function(n){var t=[];return this.er(n,t),t.join("")},er:function(n,t){var r=this,u="cke_"+r.id,e,o;return t.push('<div class="',n.iy,' cke_compatibility" lang="',n.langCode,'" role="presentation" style="display:none;z-index:'+(n.config.baseFloatZIndex+1)+'"><div id="',u,'"',' dir="',n.lang.dir,'"',' role="presentation" class="cke_panel cke_',n.lang.dir),r.className&&t.push(" ",r.className),t.push('">'),(r.lE||r.css.length)&&(t.push('<iframe id="',u,'_frame" frameborder="0" src="'),e=i.isCustomDomain(),o="document.open();"+(e?'document.domain="'+window.document.domain+'";':"")+"document.close();",t.push(f?"javascript:void(function(){"+encodeURIComponent(o)+"}())":""),t.push('"><\/iframe>')),t.push("<\/div><\/div>"),u},oU:function(){var r=this._.rE,h,f,c;if(!r){if(this.lE||this.css.length){var e=this.document.getById("cke_"+this.id+"_frame"),u=e.getParent(),o=u.getAttribute("dir"),s=u.getParent().getAttribute("class").split(" ")[0],l=u.getParent().getAttribute("lang"),n=e.getFrameDocument();n.$.open();i.isCustomDomain()&&(n.$.domain=document.domain);h=t.addFunction(t.bind(function(){this.hm=!0;this.onLoad&&this.onLoad()},this));f=n.getWindow();f.$.CKFinder=CKFinder;c=i.cssClass.replace(/browser_quirks|browser_iequirks/g,"");n.$.write("<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01//EN' 'http://www.w3.org/TR/html4/strict.dtd'><html dir=\""+o+'" class="'+s+'_container" lang="'+l+'"><head><style>.'+s+'_container{visibility:hidden}<\/style><\/head><body class="cke_'+o+" cke_panel_frame "+c+' cke_compatibility" style="margin:0;padding:0" onload="var ckfinder = window.CKFinder || window.parent.CKFinder; ckfinder && ckfinder.tools.callFunction('+h+');"><\/body><link type="text/css" rel=stylesheet href="'+this.css.join('"><link type="text/css" rel="stylesheet" href="')+'"><\/html>');n.$.close();f.$.CKFinder=CKFinder;n.on("keydown",function(n){var t=this,i=n.data.db();if(t._.onKeyDown&&t._.onKeyDown(i)===!1){n.data.preventDefault();return}i==27&&t.onEscape&&t.onEscape()},this);r=n.bH()}else r=this.document.getById("cke_"+this.id);this._.rE=r}return r},qq:function(n,t){var i=this;return t=i._.iq[n]=t||new r.panel.block(i.oU()),i._.iL||i.gf(n),t},iv:function(n){return this._.iq[n]},gf:function(n){var r=this,f=r._.iq,i=f[n],u=r._.iL;return u&&u.hide(),r._.iL=i,i._.cQ=-1,r._.onKeyDown=i.onKeyDown&&t.bind(i.onKeyDown,i),i.show(),i}};r.panel.block=t.createClass({$:function(n){var t=this;t.element=n.append(n.getDocument().createElement("div",{attributes:{"class":"cke_panel_block",role:"presentation"},gS:{display:"none"}}));t.jQ={};t._.cQ=-1;t.element.hX()},_:{},ej:{show:function(){this.element.setStyle("display","")},hide:function(){var n=this;n.onHide&&n.onHide.call(n)===!0||n.element.setStyle("display","none")},onKeyDown:function(n){var r=this,f=r.jQ[n],i,u,t;switch(f){case"next":for(i=r._.cQ,u=r.element.eG("a");t=u.getItem(++i);)if(t.getAttribute("_cke_focus")&&t.$.offsetWidth){r._.cQ=i;t.focus();break}return!1;case"prev":for(i=r._.cQ,u=r.element.eG("a");i>0&&(t=u.getItem(--i));)if(t.getAttribute("_cke_focus")&&t.$.offsetWidth){r._.cQ=i;t.focus();break}return!1;case"click":return i=r._.cQ,t=i>=0&&r.element.eG("a").getItem(i),t&&(t.$.click?t.$.click():t.$.onclick()),!1}return!0}}});o.add("resize",{bz:function(t){var i=t.config;if(i.nB)t.on("uiReady",function(){function u(n){t.document.bH().addClass("during_sidebar_resize");var r=n.data.$.screenX-e.x,u=o.width+r*(t.lang.dir=="rtl"?-1:1);t.nJ(Math.max(i.nN,Math.min(u,i.nC)))}function f(){t.document.bH().removeClass("during_sidebar_resize");n.document.removeListener("mousemove",u);n.document.removeListener("mouseup",f);t.document&&(t.document.removeListener("mousemove",u),t.document.removeListener("mouseup",f))}var r=null,e,o;t.layout.dV().on("mousedown",function(i){if(r||(r=t.layout.dV()),i.data.bK().$==r.$){o={width:r.$.offsetWidth||0};e={x:i.data.$.screenX};n.document.on("mousemove",u);n.document.on("mouseup",f);if(t.document){t.document.on("mousemove",u);t.document.on("mouseup",f)}}})})}});h.nN=120;h.nC=500;h.nB=!0,function(){function i(){var t=n.ld.hS("status","status");t.bh("ShowFileInfo",["requestShowFileInfo"],function(t){t.result=this.oW("beforeShowFileInfo",t.data,function(t,i){var u=this,f,e;if(!t){f=i.file;try{e=f?r(f,u.app.lang):"";u.bn().setHtml(e);u.oW("successShowFileInfo",i)}catch(o){u.oW("failedShowFileInfo",i);throw n.ba(o);}u.oW("afterShowFileInfo",i)}})});t.bh("ShowFolderInfo",["requestShowFolderInfo"],function(t){t.result=this.oW("beforeShowFolderInfo",t.data,function(i,r){var f=this,o,e;if(!i){o=r.folder;try{e=u(t.data.ib.data().shownFiles.length,f.app.lang);f.bn().setHtml(e);f.oW("successShowFolderInfo",r)}catch(s){f.oW("failedShowFolderInfo",r);throw n.ba(s);}f.oW("afterShowFolderInfo",r)}})})}function r(n,i){return"<p>"+t.escapeHtml(n.name)+" ("+t.formatSize(n.size,i,!0)+", "+n.dateF+")<\/p>"}function u(n,i){var r;return r=n===0?i.FilesCountEmpty:n==1?i.FilesCountOne:i.FilesCountMany.replace("%1",n),"<p>"+t.htmlEncode(r)+"<\/p>"}o.add("status",{bM:["filesview"],onLoad:function(){i()},gr:function(t){var i=this;t.on("themeSpace",function(n){n.data.space=="mainBottom"&&(n.data.html+='<div id="status_view" class="view" role="status"><\/div>')});t.on("uiReady",function(){var f=t.document.getById("status_view"),r=t.ld["filesview.filesview"],u=n.ld.bz(t,"status",i,f,{parent:r});if(r.app==t){r.on("successSelectFile",function(n){u.oW("requestShowFileInfo",n.data)});r.on("successRenderFiles",function(n){var t={folder:n.data.folder,ib:r};u.oW("requestShowFolderInfo",t)})}t.on("afterCommandExecDefered",function(n){if(n.data.name=="RemoveFile"){var t={folder:n.data.folder,ib:r};u.oW("requestShowFolderInfo",t)}});u.on("afterShowFileInfo",function(){this.bn().getText()||u.oW("requestShowFolderInfo",{ib:r,folder:r.data().folder})})})}})}(),function(){var n=function(){this.fk=[];this.pZ=!1},i;n.prototype.focus=function(){for(var i,r,n,t=0;i=this.fk[t++];)for(r=0;n=i.items[r++];)if(n.focus){n.focus();return}};i={hW:{iH:{qt:1,source:1},exec:function(n){n.dh&&(n.dh.pZ=!0,f?setTimeout(function(){n.dh.focus()},100):n.dh.focus())}}};o.add("toolbar",{bM:["formpanel"],bz:function(u){var f=function(n,t){switch(t){case u.lang.dir=="rtl"?37:39:while((n=n.next||n.toolbar.next&&n.toolbar.next.items[0])&&!n.focus);return n?n.focus():u.dh.focus(),!1;case u.lang.dir=="rtl"?39:37:while((n=n.previous||n.toolbar.previous&&n.toolbar.previous.items[n.toolbar.previous.items.length-1])&&!n.focus);if(n)n.focus();else{var i=u.dh.fk[u.dh.fk.length-1].items;i[i.length-1].focus()}return!1;case 27:return u.focus(),!1;case 13:case 32:return n.lc(),!1}return!0};u.on("themeSpace",function(i){var p,e,o,w,b,a,l,k,s,c,v,y,d,h;if(i.data.space=="mainTop"){for(u.dh=new n,p="cke_"+t.getNextNumber(),e=['<div id="toolbar_view" class="view"><div class="cke_toolbox cke_compatibility" role="toolbar" aria-labelledby="',p,'"'],e.push(">"),e.push('<span id="',p,'" class="cke_voice_label">',u.lang.toolbar,"<\/span>"),w=u.dh.fk,b=u.config.toolbar instanceof Array?u.config.toolbar:u.config["toolbar_"+u.config.toolbar],a=0;a<b.length;a++)if(l=b[a],l){if(k="cke_"+t.getNextNumber(),s={id:k,items:[]},o&&(e.push("<\/div>"),o=0),l==="/"){e.push('<div class="cke_break"><\/div>');continue}for(e.push('<span id="',k,'" class="cke_toolbar" role="presentation"><span class="cke_toolbar_start"><\/span>'),c=w.push(s)-1,c>0&&(s.previous=w[c-1],s.previous.next=s),v=0;v<l.length;v++)d=l[v],y=d=="-"?r.separator:u.bY.create(d),y&&(y.canGroup?o||(e.push('<span class="cke_toolgroup">'),o=1):o&&(e.push("<\/span>"),o=0),h=y.er(u,e),c=s.items.push(h)-1,c>0&&(h.previous=s.items[c-1],h.previous.next=h),h.toolbar=s,h.onkey=f);o&&(e.push("<\/span>"),o=0);e.push('<span class="cke_toolbar_end"><\/span><\/span>')}u.search&&u.search.er(u,e);e.push("<\/div><\/div>");i.data.html+=e.join("")}});u.bD("hW",i.hW)}})}();r.separator={er:function(n,t){return t.push('<span class="cke_separator"><\/span>'),{}}};h.toolbar_Basic=[["Upload","Refresh"]];h.toolbar_Full=[["Upload","Refresh","Settings","Maximize","Help"]];h.toolbar="Full",function(){o.add("tools",{eK:function(n){this.app=n},addTool:function(n,i){var r="tool_"+t.getNextNumber();return n=i?'<div id="'+r+'" class="view tool_panel" tabindex="0" style="display: none;">'+n+"<\/div>":'<div id="'+r+'" class="tool" style="display: none;">'+n+"<\/div>",this.app.layout.dV().getChild(0).appendHtml(n),r},addToolPanel:function(n){n=n||"";var i=this.addTool(n,1),r=this.app.layout.dV().getChild(0).dB();return t.mH(r),i},hideTool:function(n){this.app.document.getById(n).setStyle("display","none");this.app.layout.ea(!0)},showTool:function(n){this.app.document.getById(n).removeStyle("display");this.app.layout.ea(!0)},removeTool:function(n){this.hideTool(n);this.app.document.getById(n).remove()}})}(),function(){function r(){function u(){return n.bF.length>0&&"\122\x4d\122\x48\131\x35\x51\064\123\x2c\x47\107\131\130\124\123\x42\114\101\054\121\x53\x38\106\064\x5a\x46\x55\112".indexOf(n.bF.substr(0,9))!=-1}function f(t,i){var r=this,h=r.data(),e=1,o=this.tools.qO(),s=o&&o.$.value,f,u;return s.length?(f=s.match(/\.([^\.]+)\s*$/)[1],f&&i.getResourceType().isExtensionAllowed(f)?e=0:(t.data.preventDefault(),r.app.msgDialog("",r.app.lang.UploadExtIncorrect)),e)?(t.data.preventDefault(!0),this.oW("failedUploadFileForm"),this.oW("afterUploadFileForm"),!1):(u=r.app.document.getWindow().$,u.OnUploadCompleted=function(n,t){var e={step:3,filename:n,folder:i},f;t&&!n?(r.app.msgDialog("",t),f=r.tools.qB(),f.setStyle("display","none"),f.getChild(1).setText(""),f.getChild(2).setText(""),r.oW("failedUploadFileForm",e)):(t&&r.app.msgDialog("",t),r.app.aV==i&&r.app.oW("requestShowFolderFiles",{folder:i,mw:n}),r.oW("requestUnloadForm"),r.oW("successUploadFileForm",e));r.oW("afterUploadFileForm",e);try{delete u.OnUploadCompleted}catch(o){u.OnUploadCompleted=undefined}},n.log("[UPLOADFORM] Starting IFRAME file upload."),this.oW("successUploadFileForm",{step:2}),!0):(t.data.preventDefault(!0),this.oW("failedUploadFileForm"),this.oW("afterUploadFileForm"),!1)}function e(t,i,r){return'<form enctype="multipart/form-data" id="upload_form" role="region" action="'+r+'" method="POST" target="'+i+'"><h2 role="heading">'+t.lang.UploadTitle+'<\/h2><p><input type="file" name="upload" /><\/p><div class="buttons_wrapper"><div class="buttons"><input type="submit" value="'+t.lang.UploadBtn+'" /><input type="hidden" name="ckCsrfToken" value="'+n.getCsrfToken()+'" /><input type="button" name="cancel" value="'+t.lang.UploadBtnCancel+'" /><\/div><\/div><\/form>'}var r=n.ld.bX["formpanel.formpanel"];r&&(r.bh("UploadFileForm",["requestUploadFileForm"],function(){var r=this.app.aV,i=this;this.oW("beforeUploadFileForm",{folder:r,step:1},function(r,o){if(!r&&!u()){var c=this.data(),s=o.folder,h=0;if(s||(this.app.msgDialog("",this.app.lang.UploadNoFolder),h=1),h||s.acl.fileUpload||(this.app.msgDialog("",this.app.lang.UploadNoPerms),h=1),h){this.oW("failedUploadFileForm");this.oW("afterUploadFileForm");return}this.oW("beforeUploadFileForm",{folder:s,step:2},function(r,u){var o;try{if(c.dc=="upload")this.oW("requestUnloadForm",function(){this.app.cS("upload").bR(n.aS);this.oW("successUploadFileForm",u);this.oW("afterUploadFileForm",u)});else{c.dc&&this.oW("requestUnloadForm");var l=this.tools.qL(),a=this.app.connector.composeUrl("FileUpload",{},s.type,s),v=e(this.app,l.$.id,a),y=this;this.oW("requestLoadForm",{html:v,dq:t.bind(function(n){return f.call(y,n,s)}),cC:["submit"],cancelSubmit:0,gM:0,command:"upload"},function(){this.eh.addClass("show_border");u.step=1;this.oW("successUploadFileForm",u)});function h(n){if(n.data.folder&&n.data.folder.acl.fileUpload){var t=i.tools.qO();i.oW("requestUnloadForm");i.oW("requestUploadFileForm",function(){var n=i.tools.qO();t.kB(n);n.remove();delete i.tools.jj})}}o=this.app.ld["filesview.filesview"];o.on("successShowFolderFiles",h);this.on("requestUnloadForm",function(n){n.removeListener();o.removeListener("successShowFolderFiles",h)})}}catch(p){this.oW("failedUploadFileForm",u);this.oW("afterUploadFileForm",u);throw n.ba(p);}})}})}),r.tools.releaseDomNodes=t.override(r.tools.releaseDomNodes,function(n){return function(){var t=this;n.apply(t,arguments);delete t.jj;delete t.jc;t.gq!==undefined&&(t.gq.remove(),delete t.gq)}}),r.tools.qB=function(){var n=this;return n.jc===undefined&&(n.jc=n.ib.bn().getChild([0,2])),n.jc},r.tools.qO=function(){var n=this;return n.jj===undefined&&(n.jj=n.ib.bn().getChild([0,1,0])),n.jj},r.tools.qL=function(){var n=this;if(n.gq===undefined){var f=i.isCustomDomain(),r="ckf_"+t.getNextNumber(),e='<iframe id="'+r+'" name="'+r+'" style="display:none" frameBorder="0"'+(f?" src=\"javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())\"":"")+' tabIndex="-1" allowTransparency="true"><\/iframe>',u=n.ib.app.document.bH();u.appendHtml(e);n.gq=u.dB()}return n.gq})}o.add("uploadform",{bM:["formpanel","button","csrftokenmanager"],readOnly:!1,md:function(){if(!i.webkit)return!0;var n=document.createElement("input");return n.setAttribute("type","file"),n.disabled===!1},onLoad:function(){this.md()&&r()},gr:function(t){if(this.md()){t.bD("upload",{exec:function(t){t.oW("requestUploadFileForm",null,function(){var r=t.ld["formpanel.formpanel"].tools.formNode(),u=t.cg.inPopup&&f&&i.version>8;u&&r&&r.submit();t.cS("upload").bu==n.eV&&setTimeout(function(){if(r){var n=r.eG("input").getItem(0);if(!u)n.on("change",function(){var t,i;if(n.getValue())for(t=0;t<r.$.elements.length;t++)i=r.$.elements[t],i.nodeName=="INPUT"&&i.type=="submit"&&i.click()});n.$.click?n.$.click():n.focus()}},0)})}});t.bY.add("Upload",n.UI_BUTTON,{label:t.lang.Upload,command:"upload"});t.on("appReady",function(){t.ld["filesview.filesview"].on("successShowFolderFiles",function(){var u=this.tools.currentFolder(),i=this.app.cS("upload"),r;u&&u.acl.fileUpload?i.bu==n.aY&&i.bR(n.aS):(r=t.ld["formpanel.formpanel"],r.data().dc=="upload"&&r.oW("requestUnloadForm"),i.bR(n.aY))})})}}})}(),function(){"use strict";function at(n,t){if(yt()&&!t.config.readOnly){var h=new d(t),u=new l(t),r=new o(t,u),f=new p(n,t,u,r),s=new v(n,t,u,r,f),c=new nt(n,t,u,r,f),e=new i(t,u,r);f.tS(window,k,ni,ti,ii,ri);r.tJ(t.config.maxSimultaneousUploads);r.uI=function(n){f.ux=n};e.ns(c);u.ns(e);r.ns(h);r.ns(e);r.ns(u);ot(n,t,"filesview.filesview",function(t,i,o){wt(n,t,s,f,u,r,e,o)});ot(n,t,"formpanel.formpanel",function(t,i,o){bt(n,t,s,f,u,r,e,o)});setInterval(function(){r.sX()&&r.tx()},1e3)}}var vt=/\.([^\.]+)\s*$/,ui=/^(jpg|jpeg|gif|png|bmp)$/i,fi=/\|/,ei=/(\{\{([a-z_]+)\}\})/g,d,g,v,s,y,p,w,b,it,rt,c,nt,a,i,r,l,o,u,f,ut,h,tt=function(){return(new Date).getTime()},et,yt,pt,ot,wt,bt,kt,dt,st,ht,gt,ct=!1,k="ckf_plugin_html5upload_"+tt(),ni=k+"_fallbackAsyncArrayTraverse",ti=k+"_fallbackShouldFallback",ii=k+"_fallbackOnFileBlobReady",ri=k+"_fallbackOnXMLHttpRequestReady",ft="CKFinder._['"+k+"']['{{application_name}}']",lt="var _files = ((('undefined' === typeof files) ? (this.files || (event.dataTransfer && event.dataTransfer.files)) : files) || []);setTimeout(function () {"+ft+"['"+ni+"'](_files, function (file, index, files) {var formData = new FormData(),uploadBlob,xhr = new XMLHttpRequest();if (file && "+ft+"['"+ti+"']()) {formData.append('upload', file);formData.append('ckCsrfToken', CKFINDER.getCsrfToken());uploadBlob = "+ft+"['"+ii+"'](file, formData);"+ft+"['"+ri+"'](file, uploadBlob, xhr, xhr.send.bind(xhr, formData), xhr.abort.bind(xhr));} else {return false;}});}, 500);",oi='<div id="ckf_upload_form" ondrop="'+lt+'"><div class="ckf_upload_info" id="ckf_globalUploads"><div class="ckf_progress_wrapper"><div class="ckf_progress_info"><span><\/span><span><\/span><div class="ckf_progress_bar_container"><div><\/div><\/div><span class="ckf_status"><\/span><span class="ckf_speed"><\/span><\/div><\/div><div class="ckf_uploadButtons"><input type="file" {{input_multiple}} id="ckf_fileInput" onchange="'+lt+'"><a class="cke_dialog_ui_button" href="javascript:void(0);"><span class="cke_dialog_ui_button" id="ckf_addFiles">{{lang_upload_add_files}}<\/span><\/a><br><a class="cke_dialog_ui_button cke_dialog_ui_button_ok" href="javascript:void(0);" id="ckf_cancelUpload"><span class="cke_dialog_ui_button">{{lang_close_button}}<\/span><\/a><\/div><\/div><\/div>',si='<div class="ckf_progress_wrapper"><div class="ckf_progress_info"><span>{{file_name}}<\/span><span><\/span><div class="ckf_progress_bar_container"><div><\/div><\/div><span class="ckf_status"><\/span><span class="ckf_speed"><\/span><div class="ckf_outcome"><\/div><\/div><\/div><div class="ckf_uploadButtons"><a class="cke_dialog_ui_button cke_dialog_ui_button_cancel" name="cancel"><span class="cke_dialog_ui_button">{{lang_cancel_button}}<\/span><\/a><\/div>';h=Object.hasOwnProperty("create")?Object.create:function(n){return ct=!0,n};ut=function(n,t,i){var u=10,e=10,r=0,f;i||(i=null);t=t.bind(i);(f=function(){for(var i,o=0,s=tt();;){if(i=n.item?n.item(r):n[r],!i||!1===t(i,r,n))return;if(r+=1,o+=1,o>=e&&tt()-s>u)return setTimeout(f,u)}})()};et=function(n){return function(t){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return t}};s=function(){this.uU=[]};s.prototype.mD=function(n){var t=this;if(!(n instanceof s))throw new Error("Invalid argument: expected EventDispatcher.");n.sy().forEach(function(n){t.ns(n)})};s.mixin=et(s.prototype);s.prototype.ns=function(n){if(!(n instanceof y))throw new Error("Invalid argument: expected EventSubscriber.");if(this.sL(n))throw new Error("Logic error: same EventSubscriber is added twice to the EventDispatcher");this.uU.push(n)};s.prototype.dispatch=function(n,t){this.uU.forEach(function(i){var r=i.tc();r.hasOwnProperty(n)&&i[r[n]].apply(i,t)})};s.prototype.sy=function(n){return n?this.uU.filter(function(t){return t.sV(n)}):this.uU.slice(0)};s.prototype.sL=function(n){return-1!==this.uU.indexOf(n)};s.prototype.removeSubscriber=function(n){var t=this.uU.indexOf(n);if(!(n instanceof y))throw new Error("Invalid argument: expected EventSubscriber.");if(-1===t)throw new Error("Logic error: this EventSubscriber is not registered");this.uU.splice(t,1)};y=function(){};y.prototype.sV=function(n){return this.tc().hasOwnProperty(n)};y.prototype.tc=function(){throw new Error("This method needs to be overriden in child class.");};d=function(){y.call(this)};d.prototype=h(y.prototype);d.prototype.tc=function(){var n={};return n[o.qM]="tF",n};d.prototype.tF=function(n,t){var i=t.targetFolder,r=n.connector.composeUrl("FileUpload",{response_type:"txt"},i.type,i);t.bT.open("POST",r)};b=function(n,t,i,r){var u=this;y.call(u);u.ckFinder=n;u.application=t;u.ty=i;u.ub=r};b.prototype=h(y.prototype);c=function(n){this.tw(n)};c.mixin=et(c.prototype);c.prototype.tj=function(){if(!this.so)throw new Error("Form panel widget is not set.");return this.so};c.prototype.sX=function(){return!!this.so};c.prototype.uV=function(){};c.prototype.tC=function(){};c.prototype.tw=function(n){var t=this;!t.so&&n?t.uV(n):t.so&&n?(t.tC(),t.uV(n)):t.so&&!n&&t.tC();t.so=n};v=function(n,t,i,r){b.call(this,n,t,i,r);c.call(this)};v.prototype=h(b.prototype);v.prototype=c.mixin(v.prototype);v.prototype.mE=function(n){var t=this,r=n.layout.pn(),i=r.getDocument(),u=t.sS.bind(t),f=t.ss.bind(t),e=t.rs.bind(t);i.on("drop",e);i.on("dragover",f);r.on("dragover",u);t.domElementListeners||(t.domElementListeners=[]);t.domElementListeners.push({evt:"drop",fO:e,bi:i},{evt:"dragover",fO:f,bi:i},{evt:"dragover",fO:u,bi:r})};v.prototype.ss=function(n){var i=n.data,t=i.$.dataTransfer;if(t){t.dropEffect="none";try{t.effectAllowed="none"}catch(r){}this.ckFinder.env.webkit&&i.preventDefault()}};v.prototype.rs=function(n){var t=n.data.$.dataTransfer;t&&t.files&&t.files.length>0&&(this.ub.uG(t.files),n.data.preventDefault())};v.prototype.uV=function(n){var t=this,u=n.bn().getDocument(),i=t.sS.bind(t),r=u.getById("ckf_upload_form");t.domElementListeners||(t.domElementListeners=[]);t.domElementListeners.length>0&&t.tC();t.mE(t.application);r.on("dragover",i);t.domElementListeners.push({evt:"dragover",fO:i,bi:r})};v.prototype.sS=function(n){var i=n.data,t=i.$.dataTransfer;t&&(t.files&&t.files.length||t.types&&(t.types.contains&&t.types.contains("Files")||t.types.indexOf&&-1!==t.types.indexOf("Files"))?(t.dropEffect="copy",i.stopPropagation()):t.dropEffect="none",i.preventDefault())};v.prototype.tC=function(){for(var t,n=0;n<this.domElementListeners.length;n+=1)t=this.domElementListeners[n],t.bi.removeListener(t.evt,t.fO);delete this.domElementListeners};p=function(n,t,i,r){b.call(this,n,t,i,r);this.pJ={};this.ux=!0};p.prototype=h(b.prototype);p.prototype.lT=function(n){var t=this,i,r;for(i in t.pJ)if(t.pJ.hasOwnProperty(i))for(r=0;r<n.length;r+=1)n[r]===t.pJ[i]&&delete t.pJ[i]};p.prototype.ti=function(n,t){if(this.ux)return new a(n,new rt(t))};p.prototype.uK=function(n,t,i,r,u){var f=this,e;if(f.ux){if(!f.ub.sX()){u();return}e=new g(f.application,f.application.aV,t,r,u);e.ns(f.ty);e.nv(i);t.ns(e);f.ub.expectedFiles-=1;f.ub.tL(f.application,e)}};p.prototype.tS=function(n,t,i,r,u,f){var e=this,o={};o[i]=ut;o[r]=e.shouldFallback.bind(e);o[u]=e.ti.bind(e);o[f]=e.uK.bind(e);n.CKFinder.hasOwnProperty("_")||(n.CKFinder._={});n.CKFinder._.hasOwnProperty(t)||(n.CKFinder._[t]={});n.CKFinder._[t][e.application.name]=o};p.prototype.shouldFallback=function(){return!this.ub.shouldStopProcessing&&this.ux};w=function(){s.call(this)};w.prototype=h(s.prototype);w.qQ="xhr.header";w.prototype.tn=function(){throw new Error("This method needs to be overriden in child class.");};it=function(n){w.call(this);this.file=n};it.prototype=h(w.prototype);it.prototype.tn=function(t,i){var r=new FormData;r.append("upload",this.file);r.append("ckCsrfToken",n.getCsrfToken());i(r)};rt=function(n){w.call(this);this.formData=n};rt.prototype=h(w.prototype);rt.prototype.tn=function(n,t){t(this.formData)};nt=function(n,t,i,r,u){b.call(this,n,t,i,r);this.qJ=u};nt.prototype=h(b.prototype);nt.prototype.tc=function(){var n={};return n[i.qN]="onFileInputChange",n};nt.prototype.onFileInputChange=function(n,t){this.ub.uG(t)&&this.qJ.lT(t)};a=function(n,t){this.sz=t;this.file=n};a.prototype=h(s.prototype);a.prototype.mD=function(n){return this.sz.mD(n)};a.prototype.ns=function(n){return this.sz.ns(n)};a.prototype.dispatch=function(n,t){return this.sz.dispatch(n,t)};a.prototype.bZ=function(){return this.file};a.prototype.wv=function(){var n="",t=this.getFileName();return vt.test(t)?(n=t.match(vt),n[1].toLowerCase()):n};a.prototype.getFileName=function(){return this.file.name};a.prototype.getFileSize=function(){return this.file.size};a.prototype.sy=function(n){return this.sz.sy(n)};a.prototype.tn=function(n){this.sz.tn(this.file,n)};r=function(){};r.prototype=h(y.prototype);r.pH="abort";r.rj="error";r.qk="load";r.rc="progress";r.prototype.tc=function(){var n={};return n[r.pH]="onAbort",n[r.rj]="onError",n[r.qk]="onLoad",n[r.rc]="onProgress",n};r.prototype.onAbort=function(){};r.prototype.onError=function(){};r.prototype.onLoad=function(){};r.prototype.onProgress=function(){};l=function(n){var t=this;s.call(t);r.call(t);t.application=n;t.tM=[]};l.prototype=h(r.prototype);l.prototype=s.mixin(l.prototype);l.prototype.mC=function(){var n=this.tM.concat();this.tM=[];ut(n,function(n){n&&n.sY()&&n.lN()})};l.prototype.mU=function(n){this.tM.push(n)};l.prototype.nU=function(n){var t=this.tM.indexOf(n);if(-1===t)throw new Error("Given upload supervisor is not attached.");this.tM.splice(t,1)};l.prototype.tc=function(){var n=r.prototype.tc.call(this);return n[u.pN]="uc",n[o.qM]="tF",n};l.prototype.sj=function(n){for(var t=0;t<this.tM.length;t+=1)if(n===this.tM[t].uploadBlob.bZ())return!0;return!1};l.prototype.sB=function(n){return this.tM.indexOf(n)>=0};l.prototype.tF=function(n,t){this.mU(t)};l.prototype.uc=function(n){this.sB(n)&&this.nU(n)};i=function(n,t,i){var u=this;s.call(u);c.call(u);r.call(u);u.application=n;u.attachedUploadViewsNumber=0;u.wU=[];u.sa=0;u.sO=0;u.tI=0;u.totalFiles=0;u.ty=t;u.ub=i;u.tM=[]};i.prototype=h(r.prototype);i.prototype=s.mixin(i.prototype);i.prototype=c.mixin(i.prototype);i.prototype.mU=l.prototype.mU;i.prototype.nU=l.prototype.nU;i.prototype.sB=l.prototype.sB;i.prototype.tC=v.prototype.tC;i.qN="event.file.input.change";i.ue=300;i.prototype.mC=function(){for(var n=this,t=0;t<n.tM.length;t+=1)n.tM[t].removeSubscriber(n);n.ty.mC();n.ub.or();n.attachedUploadViewsNumber=0;n.tM=[];n.ud(n.application);n.ma();n.remove()};i.prototype.tc=function(){var n={};return n[o.qM]="tF",n[u.pN]="uc",n[f.EVENT_DOM_ATTACHED]="onUploadViewDomAttached",n[f.EVENT_DOM_REMOVED]="onUploadViewDomRemoved",n[f.pM]="onFolderRefreshRequest",n};i.prototype.onFileInputChange=function(n){var t=n.jN.$,r=t.files;r.length<1||this.dispatch(i.qN,[t,r])};i.prototype.onFolderRefreshRequest=function(n,t){this.wU.push({folder:n,mw:t})};i.prototype.uV=function(n){var t=this,r=n.bn().getDocument(),f=r.getById("ckf_addFiles"),e=r.getById("ckf_cancelUpload"),o=r.getById("ckf_fileInput"),i=r.getById("ckf_globalUploads"),u,s=t.mC.bind(t),h=t.onFileInputChange.bind(t);i=i.getChild([0,0]);t.domElement={addFilesButton:f,cancelButton:e,countSpan:i.getChild(0),fileInput:o,ni:i.getChild([2,0]),np:i.getChild(4),mz:i.getChild(3),totalSizeSpan:i.getChild(1)};u=t.onDomElementAddFilesClickListener.bind(t);f.on("click",u);e.on("click",s);o.on("change",h);t.domElementListeners||(t.domElementListeners=[]);t.domElementListeners.push({evt:"click",fO:u,bi:f},{evt:"click",fO:s,bi:e},{evt:"change",fO:h,bi:o});t.shouldBeClickedAutomatically&&(t.shouldBeClickedAutomatically=!1,u())};i.prototype.onDomElementAddFilesClickListener=function(){this.domElement.fileInput.$.click()};i.prototype.onUploadPanelUploadStartClick=function(n,t,i){this.shouldBeClickedAutomatically=!0;i(n)};i.prototype.uH=function(n){this.domElement.cancelButton.getFirst().setHtml(n.lang.UploadBtnCancel)};i.prototype.ud=function(n){var t=this;t.domElement.cancelButton.getFirst().setHtml(n.lang.CloseBtn);t.sa=0;t.sO=0;t.tI=0;t.totalFiles=0};i.prototype.onUploadViewDomAttached=function(){this.attachedUploadViewsNumber+=1};i.prototype.onUploadViewDomRemoved=function(){var n=this;n.attachedUploadViewsNumber-=1;n.ub.expectedFiles<1&&n.attachedUploadViewsNumber<1&&(n.attachedUploadViewsNumber=0,n.ub.expectedFiles=0,n.remove())};i.prototype.tF=function(n,t){var i=this,u=t.uploadBlob.bZ(),e=i.tj(),r=new f(n,t,u);t.ns(i);t.ns(r);r.ns(i);r.tw(e);i.mU(t);i.tI+=u.size;i.to(i.tI);i.totalFiles+=1;i.tm(i.totalFiles);1===i.totalFiles&&i.uH(n)};i.prototype.uc=function(n){var t=this,i=t.ub.expectedFiles,r=n.uploadBlob.bZ();t.sB(n)&&t.nU(n);i<1&&t.tM.length<1?(t.ma(),t.ud(t.application)):(t.sa+=r.size,t.sO+=1);t.updateUploadProgress(t.sa,t.tI,t.sO,t.totalFiles,i);t.to(t.tI);t.tm(t.totalFiles)};i.prototype.ma=function(){for(var n=this,i,r=n.application.aV,t=0;t<n.wU.length;t+=1)if(n.wU[t].folder===r){i=n.wU[t];break}n.wU=[];i&&n.application.oW("requestShowFolderFiles",i)};i.prototype.remove=function(){this.tj().oW("requestUnloadForm")};i.prototype.setUploadCommand=function(n,t){var u,i,f,r;if(t.pW&&!(t.pW.length<1))for(this.domElementListeners||(this.domElementListeners=[]),f=function(n,i){this.onUploadPanelUploadStartClick(i,t,n)},r=t.pW,i=0;i<r.length;i+=1)r[i].click&&(u=r[i].click,r[i].click=f.bind(this,u))};i.prototype.tD=function(n,t){this.updateLoadedPercentage(n,t)};i.prototype.updateLoadedPercentage=function(n,t,i){var r;r=t>0?Math.round(n/t*100):0;r<0&&(r=0);(r>100||isNaN(r))&&(r=100);this.domElement.ni.setStyle("width",r+"%");i=i?" - "+i.trim():"";this.updateStatusText(this.application.lang.UploadUploaded.replace("!n",r)+i)};i.prototype.nR=function(n,i){var r;i<1||(r=n/1024/i,this.domElement.np.setText(t.formatSpeed(r,this.application.lang)))};i.prototype.updateStatusText=function(n){this.domElement.mz.setText(n)};i.prototype.to=function(n){this.domElement.totalSizeSpan.setText(this.application.lang.UploadTotalSize+" "+t.formatSize(n/1024,this.application.lang))};i.prototype.tm=function(n){this.domElement.countSpan.setText(this.application.lang.UploadTotalFiles+" "+n+" ")};i.prototype.updateUploadProgress=function(n,t,i,r,u){var s=n/t,f=1,h=i/(r+u),e=3,o;o=CKFinder.tools.formatSize(n/1024,this.application.lang);this.updateLoadedPercentage(s*f+h*e,f+e,o)};o=function(n,t){var i=this;s.call(i);c.call(i);r.call(i);i.application=n;i.lQ=10;i.expectedFiles=0;i.shouldStopProcessing=!1;i.tM=[];i.ty=t};o.prototype=h(r.prototype);o.prototype=s.mixin(o.prototype);o.prototype=c.mixin(o.prototype);o.qM="upload.supervisor.ready";o.prototype.or=function(){this.expectedFiles=0;this.shouldStopProcessing=!0;this.tM=[]};o.prototype.nZ=function(){return this.tM.shift()};o.prototype.qg=function(n){this.sj(n.file)||this.tM.push(n)};o.prototype.tc=function(){var n={};return n[u.pU]="tH",n[u.pN]="uc",n};o.prototype.getUploadCommand=function(){if(!this.uploadCommand)throw new Error("Upload command is not set.");return this.uploadCommand};o.prototype.sj=function(n){for(var t=0;t<this.tM.length;t+=1)if(n===this.tM[t].uploadBlob.bZ())return!0;return!1};o.prototype.tH=function(){this.tx()};o.prototype.uc=function(){this.lQ+=1;this.tx()};o.prototype.uG=function(t){var f,o,e=this.sX(),r,i=this,u=this.getUploadCommand(),s=this.application.aV;if(!s)return!1;if(this.expectedFiles+=t.length,this.shouldStopProcessing=!1,u.bu!==n.aY){if(t.length<1)return!1;try{o=t[0];this.uI&&this.uI(!1)}catch(h){return!1}finally{u.bu!==n.eV&&(e=!1,u.exec(this.application))}return(r=ut.bind(null,t,function(n){if(i.shouldStopProcessing)return i.expectedFiles=0,i.shouldStopProcessing=!1,!1;i.expectedFiles-=1;i.tA(new a(n,new it(n)))}),e)?(r(),!0):(f=setInterval(function(){i.sX()&&(clearInterval(f),r())},100),!0)}};o.prototype.tA=function(n){var t=this,r,i;if(n.getFileName().length<1){t.tj().oW("failedUploadFile");return}i=new u(t.application,t.application.aV,n);i.ns(t.ty);n.ns(i);r=new XMLHttpRequest;i.nv(r);t.tL(t.application,i)};o.prototype.tL=function(n,t){var i=this;if(i.dispatch(o.qM,[i.application,t]),t.ns(i),i.lQ<1){i.qg(t);return}i.tv(n,t)};o.prototype.tx=function(){for(var n=this;n.tM.length>0&&n.lQ>0;)n.tv(n.application,n.nZ())};o.prototype.tJ=function(n){this.lQ=n};o.prototype.setUploadCommand=function(n,t){this.uploadCommand=t};o.prototype.tv=function(n,t){this.lQ-=1;t.mW()};u=function(n,t,i){var u=this;s.call(u);r.call(u);u.application=n;u.isAborted=!1;u.sa=0;u.oS=0;u.targetFolder=t;u.uploadBlob=i};u.prototype=h(r.prototype);u.prototype=s.mixin(u.prototype);u.pU="start";u.pN="stop";u.prototype.lN=function(){if(!this.sY())throw new Error("Upload is not in progress.");this.isAborted=!0;this.bT.abort()};u.prototype.ns=function(n){if(!(n instanceof r))throw new Error("Invalid argument: expected UploadProgressListener.");s.prototype.ns.call(this,n)};u.prototype.ta=function(n){var t=this.wv(),i=n.aV,r=i.getResourceType();if(t&&!r.isExtensionAllowed(t)){this.onError(n.lang.UploadExtIncorrect);return!1}return!0};u.prototype.wN=function(n){var t=this,f=t.wv(),i=t.getFileSize(),u=parseInt(n.config.uploadMaxSize,10),r,e=n.aV,o=e.getResourceType();if(r=parseInt(o.maxSize,10),i===0){t.onError(n.lang.Errors[202]);return!1}if(u&&i>u||r&&i>r&&(n.config.uploadCheckImages||!ui.test(f))){t.onError(n.lang.Errors[203]);return!1}return!0};u.prototype.tl=function(n){return this.ta(n)?this.wN(n):!1};u.prototype.nv=function(n){var t=this,i;if(t.sY())throw new Error("Upload is already started.");n.addEventListener(r.pH,t.onAbort.bind(t));n.addEventListener(r.rj,t.onError.bind(t));n.addEventListener(r.qk,t.onLoad.bind(t));i=n.upload;i&&i.addEventListener(r.rc,t.onProgress.bind(t));t.bT=n;t.isAborted=!1};u.prototype.tK=function(){return this.oS};u.prototype.bZ=function(){return this.uploadBlob.bZ()};u.prototype.wv=function(){return this.uploadBlob.wv()};u.prototype.getFileName=function(){return this.uploadBlob.getFileName()};u.prototype.getFileSize=function(){return this.uploadBlob.getFileSize()};u.prototype.tc=function(){var n=r.prototype.tc.call(this);return n["xhr.header"]="tO",n};u.prototype.sY=function(){return this.isAborted?!1:!!this.bT};u.prototype.onAbort=function(){this.dispatch(r.pH,[this.uploadBlob]);this.onStop()};u.prototype.onError=function(n){var t=this;n||(n=t.application.lang.UploadUnknError);t.dispatch(r.rj,[t.uploadBlob,n]);t.onStop()};u.prototype.tO=function(n,t){if(!this.bT)throw new Error("Request is not initialized");this.bT.setRequestHeader(n,t)};u.prototype.onLoad=function(n){var t=this,u,i,e,f;if(200!==t.bT.status)return t.onError();e=n.target.responseText;f=e.split(fi,2);u=f[0];i=f[1];!u.length&&i?t.dispatch(r.rj,[t.uploadBlob,i]):t.dispatch(r.qk,[t.uploadBlob,u,i]);t.onStop()};u.prototype.onProgress=function(n){var t=this;n.lengthComputable&&(t.sa=n.target.kC=n.loaded,t.dispatch(r.rc,[t,t.uploadBlob,t.sa,t.tK()]))};u.prototype.onStop=function(){var n=this;delete n.bT;n.isAborted=!0;n.oS=0;n.dispatch(u.pN,[n,n.uploadBlob])};u.prototype.mW=function(){var n=this,t=this.bT;if(!this.tl(this.application))return!1;this.uploadBlob.tn(function(i){if(n.dispatch(u.pU,[n.uploadBlob]),t){n.oS=tt();try{n.bT.send(i)}catch(r){n.onStop()}}else n.onStop()})};g=function(n,t,i,r,f){var e=this;u.call(e,n,t,i);e.isAborted=!1;e.tG=r;e.uz=f};g.prototype=h(u.prototype);g.prototype.lN=function(){if(!this.sY())throw new Error("Upload is not in progress.");this.isAborted=!0;this.uz()};g.prototype.mW=function(){var n=this;if(!n.tl(n.application))return!1;n.isAborted=!1;n.oS=tt();n.dispatch(u.pU,[n.uploadBlob]);try{n.tG()}catch(t){try{n.uz()}catch(t){throw t;}finally{n.onStop()}}};f=function(n,t,i){var u=this;s.call(u);c.call(u);r.call(u);u.application=n;u.file=i;u.isDomAttached=!1;u.isDomRemoved=!1;u.shouldBeRemovedOnStop=!0;u.targetFolder=t.targetFolder;u.ts=t};f.prototype=h(r.prototype);f.prototype=s.mixin(f.prototype);f.prototype=c.mixin(f.prototype);f.prototype.tD=i.prototype.updateLoadedPercentage;f.prototype.nR=i.prototype.nR;f.prototype.updateStatusText=i.prototype.updateStatusText;f.EVENT_DOM_ATTACHED="event.dom.attached";f.EVENT_DOM_REMOVED="event.dom.removed";f.pM="event.folder.refresh.request";f.prototype.tc=function(){var n=r.prototype.tc.call(this);return n[u.pN]="onStop",n};f.prototype.onAbort=function(){var n=this;n.ts&&(n.ts.sY()&&(n.ts.lN(),n.ts.onStop()),n.onStop())};f.prototype.onError=function(n,t){this.tE(t)};f.prototype.uV=function(n){var t=this,u,r,i;if(!t.isDomAttached){u=n.bn();i=new e("div",u.getDocument());i.setAttribute("class","ckf_upload_info");i.setHtml(gt(t.application,n,t.file,si));u.dB().append(i);t.application.cg.resizeFormPanel();r=i.getChild([0,0]);t.domElement={button:i.getChild([1,0]),container:i,mI:r.getChild(5),ni:r.getChild([2,0]),mx:r.getChild(1),np:r.getChild(4),mz:r.getChild(3)};t.domElement.button.on("click",t.uk.bind(t,t.ts));t.isDomAttached=!0;t.dispatch(f.EVENT_DOM_ATTACHED,[t])}};f.prototype.onLoad=function(n,t,i){this.tN(i);this.dispatch(f.pM,[this.targetFolder,t])};f.prototype.onProgress=function(n,t,i,r){this.tD(i,this.file.size);this.nR(i,r)};f.prototype.onStop=function(){this.shouldBeRemovedOnStop&&this.remove()};f.prototype.uk=function(n){if(this.shouldBeRemovedOnStop=!0,n.sY())n.lN();else this.onAbort(n.uploadBlob)};f.prototype.remove=function(){var n=this;n.isDomRemoved||(n.domElement.container.remove(),n.application.cg.resizeFormPanel(),n.isDomRemoved=!0,n.dispatch(f.EVENT_DOM_REMOVED,[n]))};f.prototype.tE=function(n){var t=this,i=t.tj();t.tp(n);t.domElement.container.addClass("ckf_FileError");t.application.cg.resizeFormPanel();i.oW("failedUploadFile",n)};f.prototype.tp=function(n){var t=this;n&&(t.shouldBeRemovedOnStop=!1);t.domElement.ni.getParent().hide();t.domElement.mz.hide();t.domElement.np.hide();t.domElement.mI.setText(n);t.domElement.button.getFirst().setHtml(t.application.lang.CloseBtn);t.domElement.button.addClass("cke_dialog_ui_button_ok");t.domElement.button.removeClass("cke_dialog_ui_button_cancel")};f.prototype.tN=function(n){var t=this,i=t.tj();n?(t.tp(n),t.application.cg.resizeFormPanel()):t.remove();i.oW("successUploadFile",n)};yt=function(){return!ct&&typeof FormData!="undefined"};pt=function(t){var i;return i=t.env?t:n,!(!i.env.mac&&i.env.safari)};ot=function(n,t,i,r){var u;u=setInterval(function(){t.ld.hasOwnProperty(i)&&(clearInterval(u),r(t,i,t.ld[i]))},10)};wt=function(n,t,i,r,u,f,e,o){var s=o.bn();i.sX()||i.mE(t);s.hasAttribute("ondrop")||s.setAttribute("ondrop",ht(t,lt))};bt=function(n,t,i,r,u,f,e,o){var h=ht(t,oi),s=t.cS("upload");f.setUploadCommand(t,s);e.setUploadCommand(t,s);t.cg.replaceUploadForm(h,function(){kt(n,t,i,r,u,f,e,o)},!0,11)};kt=function(n,t,i,r,u,f,e,o){i.tw(o);e.tw(o);f.tw(o)};st=function(n,t){return n.replace(ei,function(n,i,r){return t[r]})};ht=function(n,i){var r={application_name:t.escapeHtml(n.name),input_multiple:pt(n)?'multiple="multiple"':"",lang_upload_add_files:n.lang.UploadAddFiles,lang_close_button:n.lang.CloseBtn};return st(i,r)};gt=function(n,i,r,u){var f={file_name:t.escapeHtml(r.name),lang_cancel_button:n.lang.UploadBtnCancel};return st(u,f)};dt=function(n){var t;at.bind?t=at.bind(this,n):(ct=!0,t=at);n.plugins.add("html5upload",{bM:["uploadform"],bz:t})};dt(n)}(),function(){function i(n,i,r,u){n.execCommand(u?"moveFilesToFolder":"copyFilesToFolder",{files:r,destination:i,fileCallback:function(n,i){for(var e=t.indexOf(n.basketFiles,i),u=1,f=n.basketFiles.length-1,r=e;r<f;r++){if(!n.basketFiles[r]){u++;continue}n.basketFiles[r]=n.basketFiles[r+u]}n.basketFiles.length=Math.max(f,0)}})}o.add("basket",{bM:["foldertree","filesview","contextmenu"],readOnly:!1,basketToolbar:[["clearBasket",{label:"BasketClear",command:"TruncateBasket",disableEmpty:!0}]],basketFileContextMenu:[["mu",{label:"BasketRemove",command:"RemoveFileFromBasket",group:"file3"}],["hN",{label:"BasketOpenFolder",command:"OpenFileFolder",group:"file1"}]],bz:function(r){var o=window.top[n.nd+"\143\x61\164\151\157\156"][n.jG+"\163\x74"],u=[],f=function(){for(var i=r.basketFiles.length?n.aS:n.aY,t=0,f=u.length;t<f;t++)r.cS(u[t]).bR(i)},e;r.bD("FolderPasteCopyBasket",{exec:function(n){var t=n.aV;t&&i(n,t,n.basketFiles)}});r.bD("FolderPasteMoveBasket",{exec:function(t){if(n.bF&&1==n.bs.indexOf(n.bF.substr(1,1))%5&&n.lS(o)!=n.lS(n.ed)||n.bF&&n.bF.substr(3,1)!=n.bs.substr((n.bs.indexOf(n.bF.substr(0,1))+n.bs.indexOf(n.bF.substr(2,1)))*9%(n.bs.length-1),1))t.msgDialog("","\124\150\151\x73\x20\146\165\156\143\164\x69\157\x6e\040\x69\163\x20\x64\151\163\x61\142\x6c\145\x64\x20\151\156\x20\x74\x68\x65\040\x64\145\x6d\x6f\x20\x76\x65\162\x73\151\x6f\x6e\040\x6f\146\040\103\113\106\151\x6e\144\145\x72\x2e\074\x62\162\x20\057\076\x50\x6c\x65\141\x73\145\040\x76\x69\163\151\x74\x20\x74\x68\x65\040\074\141\040\150\x72\x65\x66\x3d\x27\150\x74\164\160\072\057\057\143\x6b\x73\157\165\x72\x63\145\056\143\x6f\x6d\057\143\x6b\x66\x69\x6e\x64\145\x72\x27\076\x43\113\106\151\156\144\x65\x72\x20\x77\145\x62\x20\x73\151\x74\145\074\x2f\x61\x3e\040\x74\157\x20\x6f\142\x74\141\x69\156\040\x61\040\166\x61\154\x69\144\040\x6c\x69\143\x65\x6e\163\145\056");else{var r=t.aV;if(!r)return;i(t,r,t.basketFiles,!0);f()}}});r.eU({folderPasteMoveBasket:{label:r.lang.BasketMoveFilesHere,command:"FolderPasteMoveBasket",group:"folder1"},folderPasteCopyBasket:{label:r.lang.BasketCopyFilesHere,command:"FolderPasteCopyBasket",group:"folder1"}});e=r.basket=new n.aL.BasketFolder(r);r.basketFiles=[];r.on("uiReady",function(){function c(n){var r,o,f,i,e,h,s;for(r in n.plugins)if(n.plugins.hasOwnProperty(r)&&(r=n.plugins[r],r.basketToolbar))for(o=0;o<r.basketToolbar.length;o++)(f=r.basketToolbar[o],n.bY._.items[f[0]])||(i=t.deepCopy(f[1]),e=i.command,i.command||(h=f[1].onClick,e="BasketToolbar_"+f[0],n.bD(e,{exec:function(n){h(n.cg)}}),i.command=e),s=t.capitalize(r.name),typeof i.label=="function"?i.label=i.label.call(r,n.cg):n.lang[r.name]&&n.lang[r.name][i.label]?i.label=n.lang[r.name][i.label]:n.lang[s]&&n.lang[s][i.label]?i.label=n.lang[s][i.label]:n.lang[i.label]&&(i.label=n.lang[i.label]),i.basketToolbar=1,i.disableEmpty&&u.push(e),n.bY.add(f[0],CKFinder._.UI_BUTTON,i))}function l(n){var r,e,f,i,s,c,o;if(n.eU)for(r in n.plugins)if(n.plugins.hasOwnProperty(r)&&(r=n.plugins[r],r.basketFileContextMenu))for(e=0;e<r.basketFileContextMenu.length;e++)(f=r.basketFileContextMenu[e],n._.iG[f[0]])||(i=t.deepCopy(f[1]),i.command||(s="BasketContextMenu_"+f[0],c=f[1].onClick,n.bD("BasketContextMenu_"+f[0],{exec:function(n){c(n.cg)}}),i.command=s),o=t.capitalize(r.name),typeof i.label=="function"?i.label=i.label.call(r,n.cg):n.lang[r.name]&&n.lang[r.name][i.label]?i.label=n.lang[r.name][i.label]:n.lang[o]&&n.lang[o][i.label]?i.label=n.lang[o][i.label]:n.lang[i.label]&&(i.label=n.lang[i.label]),i.disableEmpty&&u.push(s),n.gp(f[0],i),h.push(f[0]))}var i=r.ld["foldertree.foldertree"];i.on("beforeAddFolder",function(n){n.removeListener();n.data.folders.push(e)});i.on("beforeDroppable",function(i){var f,o,u,s,e,h;if(i.data.target instanceof n.aL.BasketFolder&&(i.data.source instanceof n.aL.File&&(i.data.source=[i.data.source]),t.isArray(i.data.source)&&i.data.source.length&&i.data.source[0]instanceof n.aL.File)){for(f=i.data.source,o=0,u=0,s=f.length;u<s;u++){for(e=0,h=r.basketFiles.length;e<h;e++)if(f[u].isSameFile(r.basketFiles[e])){o=1;break}o||r.basketFiles.push(f[u])}i.cancel(1)}});i.on("beforeContextMenu",function(t){var i;t.data.folder instanceof n.aL.BasketFolder?(i=t.data.bj,delete i.renameFolder,delete i.removeFolder,delete i.createSubFolder,i.qT=r.basketFiles.length?n.aS:n.aY):(i=t.data.bj,i.folderPasteCopyBasket=r.basketFiles.length?n.aS:n.aY,i.folderPasteMoveBasket=r.basketFiles.length?n.aS:n.aY)});i.on("beforeKeyboardNavigation",function(t){if(t.data.folder instanceof n.aL.BasketFolder){var i=t.data.db();(i==46||i==113)&&t.cancel()}});r.bD("TruncateBasket",{exec:function(n){n.basketFiles.length&&n.fe("",n.lang.BasketTruncateConfirm,function(){n.basketFiles.length=0;n.oW("requestSelectFolder",{folder:n.basket})})}});r.bD("RemoveFileFromBasket",{exec:function(n){var i=n.ld["filesview.filesview"].tools.oO();i&&i.length&&n.fe("",i.length==1?n.lang.BasketRemoveConfirm.replace("%1",t.escapeHtml(i[0].name)):n.lang.BasketRemoveConfirmMultiple.replace("%1",i.length),function(){for(var r=0,u=i.length,t;r<u;r++)for(t=0;t<n.basketFiles.length;t++)if(i[r].isSameFile(n.basketFiles[t])){n.basketFiles.splice(t,1);break}n.oW("requestSelectFolder",{folder:n.basket});f()})}});r.bD("OpenFileFolder",{exec:function(n){var t=n.ld["filesview.filesview"].data().cG;t&&n.oW("requestSelectFolder",{folder:t.folder})}});r.eU&&r.gp("truncateBasket",{label:r.lang.BasketClear,command:"TruncateBasket",group:"folder"});var o=[],s=r.ld["filesview.filesview"],h=[];s.on("beforeContextMenu",function(t){var i,r;if(t.data.folder instanceof n.aL.BasketFolder)for(i=t.data.bj,delete i.renameFile,delete i.deleteFile,delete i.deleteFiles,i.mu=n.aS,i.hN=n.aS,r=0;r<h.length;r++)i[h[r]]=n.aS});s.on("beforeShowFolderFiles",function(t){var u,i,y,s,h,a,e,v;if(t.data.folder instanceof n.aL.BasketFolder){for(t.cancel(1),this.app.oW("requestRenderFiles",{files:r.basketFiles,mj:r.lang.BasketEmpty,eu:1,folder:t.data.folder}),this.app.oW("requestRepaintFolder",t.data),c(this.app),l(this.app),f(),u=this.app.dh.fk,i=0;i<u.length;i++){y=this.app.document.getById(u[i].id);s=['<span class="cke_toolgroup" id="basket">'];for(h in this.app.bY._.items)this.app.bY._.items.hasOwnProperty(h)&&(a=r.bY._.items[h],a.mp[0].basketToolbar)&&(a=r.bY.create(h),e=a.er(r,s),v=u[i].items.push(e)-1,v>0&&(e.previous=u[i].items[v-1],e.previous.next=e),o[i]||(o[i]=[]),o[i].push(v));s.push("<\/span>");y.appendHtml(s.join(""))}this.on("beforeShowFolderFiles",function(n){var r,t,i;for(this.app.document.getById("basket").remove(),r=this.app.dh.fk,t=0;t<r.length;t++)for(i=0;i<r[t].items.length;i++)o[t][i]&&delete r[t].items[i];n.removeListener()},null,null,1);this.oW("successShowFolderFiles",t.data);this.oW("afterShowFolderFiles",t.data)}});s.on("beforeKeyboardNavigation",function(t){var u=r.aV,i;u&&u instanceof n.aL.BasketFolder&&(i=t.data.db(),i==46&&(t.cancel(),r.execCommand("RemoveFileFromBasket")),i==113&&t.cancel())})},null,null,20)}});n.aL.BasketFolder=t.createClass({$:function(t){var i=this;n.aL.Folder.call(i,t,null,t.lang.BasketFolder);i.hasChildren=0;i.acl=new n.aL.Acl("1111111");i.isBasket=!0},base:n.aL.Folder,ej:{createNewFolder:function(){},getChildren:function(n){n.apply(this,null)},rename:function(){},remove:function(){},getUrl:function(){return"ckfinder://basketFolder"},getUploadUrl:function(){return null},getPath:function(){return"/"},copyFiles:function(){},moveFiles:function(){}}})}();n.DIALOG_RESIZE_NONE=0;n.DIALOG_RESIZE_WIDTH=1;n.DIALOG_RESIZE_HEIGHT=2;n.DIALOG_RESIZE_BOTH=3,function(){function w(n){return!!this._.tabs[n][0].$.offsetHeight}function b(){for(var n=this,f=n._.gx,i=n._.cU.length,u=t.indexOf(n._.cU,f)+i,r=u-1;r>u-i;r--)if(w.call(n,n._.cU[r%i]))return n._.cU[r%i];return null}function k(){for(var n=this,f=n._.gx,r=n._.cU.length,u=t.indexOf(n._.cU,f),i=u+1;i<u+r;i++)if(w.call(n,n._.cU[i%r]))return n._.cU[i%r];return null}function d(n,t,i){this.element=t;this.cQ=i;this.fM=function(){return!t.getAttribute("disabled")&&t.isVisible()};this.focus=function(){n._.aW=this.cQ;this.element.focus()};t.on("keydown",function(n){n.data.db()in{32:1,13:1}&&this.oW("click")});t.on("focus",function(){this.oW("mouseover")});t.on("blur",function(){this.oW("mouseout")})}function nt(n,i){this._={dialog:n};t.extend(this,i)}function ot(t){function s(i){var u=t.hR(),s=n.document.getWindow().eR(),h=i.data.$.screenX,c=i.data.$.screenY,v=h-o.x,y=c-o.y,l,a;o={x:h,y:c};r.x+=v;r.y+=y;l=r.x+f[3]<e?-f[3]:r.x-f[1]>s.width-u.width-e?s.width-u.width+f[1]:r.x;a=r.y+f[0]<e?-f[0]:r.y-f[2]>s.height-u.height-e?s.height-u.height+f[2]:r.y;t.move(l,a,1);i.data.preventDefault()}function h(){if(n.document.removeListener("mousemove",s),n.document.removeListener("mouseup",h),i.ie6Compat){var t=u.getChild(0).getFrameDocument();t.removeListener("mousemove",s);t.removeListener("mouseup",h)}}var o=null,r=null,l=t.getElement().getFirst(),c=t.eY(),e=c.config.dialog_magnetDistance,f=c.skin.margins||[0,0,0,0];typeof e=="undefined"&&(e=20);t.bO.title.on("mousedown",function(f){o={x:f.data.$.screenX,y:f.data.$.screenY};n.document.on("mousemove",s);n.document.on("mouseup",h);if(r=t.gz(),i.ie6Compat){var e=u.getChild(0).getFrameDocument();e.on("mousemove",s);e.on("mouseup",h)}f.data.preventDefault()},t)}function st(r){function d(n){if(r._.moved&&h.lang.dir=="rtl"){var t=r._.element.getFirst();t.setStyle("right",n+"px");t.removeStyle("left")}else r._.moved||r.layout()}function k(t){var o,y,h;c=r.hR();t=t.data.$;o=r.bO.contents;y=o.$.getElementsByTagName("iframe").length;y&&(l=e.kE('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"><\/div>'),o.append(l));b=c.height-r.bO.contents.hR("height",!(i.gecko||i.opera||f&&i.quirks));w=c.width-r.bO.contents.hR("width",1);p={x:t.screenX,y:t.screenY};s=n.document.getWindow().eR();n.document.on("mousemove",a);n.document.on("mouseup",v);if(i.ie6Compat){h=u.getChild(0).getFrameDocument();h.on("mousemove",a);h.on("mouseup",v)}t.preventDefault&&t.preventDefault()}function a(t){var f=h.lang.dir=="rtl",k=(t.data.$.screenX-p.x)*(f?-1:1),nt=t.data.$.screenY-p.y,e=c.width,l=c.height,a=e+k*(r._.moved?1:2),v=l+nt*(r._.moved?1:2),g=r._.element.getFirst(),i=f&&g.getComputedStyle("right"),u=r.gz();i&&(i=i=="auto"?s.width-(u.x||0)-g.hR("width"):parseInt(i,10));u.y+v>s.height&&(v=s.height-u.y);(f?i:u.x)+a>s.width&&(a=s.width-(f?i:u.x));o!=n.DIALOG_RESIZE_WIDTH&&o!=n.DIALOG_RESIZE_BOTH||f&&k>0&&!u.x||(e=Math.max(y.minWidth||0,a-w));(o==n.DIALOG_RESIZE_HEIGHT||o==n.DIALOG_RESIZE_BOTH)&&(l=Math.max(y.minHeight||0,v-b));r.resize(e,l);d(i);t.data.preventDefault()}function v(){var e,f,t;n.document.removeListener("mouseup",v);n.document.removeListener("mousemove",a);l&&(l.remove(),l=null);i.ie6Compat&&(e=u.getChild(0).getFrameDocument(),e.removeListener("mouseup",v),e.removeListener("mousemove",a));h.lang.dir=="rtl"&&(f=r._.element.getFirst(),t=f.getComputedStyle("left"),t=t=="auto"?s.width-parseInt(f.rd("right"),10)-r.hR().width:parseInt(t,10),f.removeStyle("right"),r._.position.x+=1,r.move(t,r._.position.y))}var y=r.dg,o=y.resizable,h,w,b,s,p,c,l;if(o!=n.DIALOG_RESIZE_NONE){h=r.eY();r.on("load",function(){var i="",u;o==n.DIALOG_RESIZE_WIDTH?i=" cke_resizer_horizontal":o==n.DIALOG_RESIZE_HEIGHT&&(i=" cke_resizer_vertical");u=e.kE('<div class="cke_resizer'+i+'" title="'+t.htmlEncode(h.lang.resize)+'"><\/div>');u.on("mousedown",k);r.bO.footer.append(u,1)});h.on("destroy",function(){t.removeFunction(k)})}}function v(n,t){var i=function(){u(this);t(this)},r=function(){u(this)},u=function(n){n.removeListener("ok",i);n.removeListener("cancel",r)};n.on("ok",i);n.on("cancel",r)}n.dialog=function(r,f){function p(n){var t=o._.eO,u=n?1:-1,r,i;if(!(t.length<1)){for(r=(o._.aW+u+t.length)%t.length,i=r;!t[i].fM();)if(i=(i+u+t.length)%t.length,i==r)break;t[i].focus();t[i].type=="text"&&t[i].select()}}function l(t){var i,u,r;o==n.dialog._.dL&&(i=t.data.db(),h=0,i==9||i==n.dy+9?(u=i==n.dy+9,o._.eC?(r=u?b.call(o):k.call(o),o.selectPage(r),o._.tabs[r][0].focus()):p(!u),h=1):i!=n.eJ+121||o._.eC?(i==37||i==39)&&o._.eC&&(r=i==37?b.call(o):k.call(o),o.selectPage(r),o._.tabs[r][0].focus(),h=1):(o._.eC=!0,o._.tabs[o._.gx][0].focus(),h=1),h&&(t.stop(),t.data.preventDefault()))}function d(n){h&&n.data.preventDefault()}var e=n.dialog._.ev[f],tt,v,o,y,h,s,nt,it,w,a;if(e=t.extend(e(r),et),e=t.clone(e),e=new g(this,e),tt=n.document,v=r.theme.pu(r),this._={app:r,element:v.element,name:f,hB:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},iX:{},tabs:{},cU:[],gx:null,nM:null,gV:0,qF:null,eC:!1,eO:[],aW:0,hasFocus:!1},this.bO=v.bO,this.bO.dialog.setStyles({position:i.ie6Compat?"absolute":"fixed",top:0,left:0,visibility:"hidden"}),n.event.call(this),this.dg=e=n.oW("dialogDefinition",{name:f,dg:e},r).dg,e.onLoad)this.on("load",e.onLoad);if(e.onShow)this.on("show",e.onShow);if(e.onHide)this.on("hide",e.onHide);if(e.onOk)this.on("ok",function(n){e.onOk.call(this,n)===!1&&(n.data.hide=!1)});if(e.onCancel)this.on("cancel",function(n){e.onCancel.call(this,n)===!1&&(n.data.hide=!1)});o=this;y=function(n){var t=o._.contents,r=!1,i,u;for(i in t)for(u in t[i])if(r=n.call(this,t[i][u]),r)return};this.on("ok",function(n){y(function(t){if(t.validate){var i=t.validate(this);if(typeof i=="string"&&(r.document.getWindow().$.alert(i),i=!1),i===!1)return t.select?t.select():t.focus(),n.data.hide=!1,n.stop(),!0}})},this,null,0);this.on("cancel",function(n){y(function(t){if(t.isChanged())return r.document.getWindow().$.confirm(r.lang.common.confirmCancel)||(n.data.hide=!1),!0})},this,null,0);this.bO.close.on("click",function(){this.oW("cancel",{hide:!0}).hide!==!1&&this.hide()},this);this.on("show",function(){n.document.on("keydown",l,this,null,0);if(i.opera||i.gecko&&i.mac)n.document.on("keypress",d,this);if(i.ie6Compat){var t=u.getChild(0).getFrameDocument();t.on("keydown",l,this,null,0)}});this.on("hide",function(){n.document.removeListener("keydown",l);(i.opera||i.gecko&&i.mac)&&n.document.removeListener("keypress",d)});this.on("iframeAdded",function(n){var t=new c(n.data.iframe.$.contentWindow.document);t.on("keydown",l,this,null,0)});this.on("show",function(){this._.hasFocus||(this._.aW=-1,p(!0))},this,null,4294967295);if(i.ie6Compat)this.on("load",function(){var n=this.getElement(),t=n.getFirst();t.remove();t.appendTo(n)},this);for(ot(this),st(this),this.bO.title.setText(e.title),s=0;s<e.contents.length;s++)this.addPage(e.contents[s]);nt=/cke_dialog_tab(\s|$|_)/;it=/cke_dialog_tab(\s|$)/;this.bO.tabs.on("click",function(n){var i=this,t=n.data.bK(),u=t,r;(nt.test(t.$.className)||t.getName()=="a")&&(r=t.$.id.substr(0,t.$.id.lastIndexOf("_")),i.selectPage(r),i._.eC&&(i._.eC=!1,i._.aW=-1,p(!0)),n.data.preventDefault())},this);for(w=[],a=n.dialog._.gv.hbox.dQ(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:e.buttons},w).getChild(),this.bO.footer.setHtml(w.join("")),s=0;s<a.length;s++)this._.buttons[a[s].id]=a[s];n.skins.load(r,"dialog")};n.dialog.prototype={resize:function(){return function(t,i){var r=this;r._.hB&&r._.hB.width==t&&r._.hB.height==i||(n.dialog.oW("resize",{dialog:r,skin:r._.app.gd,width:t,height:i},r._.app),r._.hB={width:t,height:i})}}(),hR:function(){var n=this._.element.getFirst();return{width:n.$.offsetWidth||0,height:n.$.offsetHeight||0}},mn:function(){var n=this.hR();return n.height=n.height-(this.bO.title.$.offsetHeight||0)-(this.bO.footer.$.offsetHeight||0),n},move:function(){var t;return function(i,r,u){var f=this,o=f._.element.getFirst(),e;(t===undefined&&(t=o.getComputedStyle("position")=="fixed"),t&&f._.position&&f._.position.x==i&&f._.position.y==r)||(f._.position={x:i,y:r},t||(e=n.document.getWindow().hV(),i+=e.x,r+=e.y),o.setStyles({left:(i>0?i:0)+"px",top:(r>0?r:0)+"px"}),u&&(f._.moved=1))}}(),gz:function(){return t.extend({},this._.position)},show:function(){var e=this._.app,o,r,s,h,c,l;if(e.mode=="qt"&&f&&(o=e.getSelection(),o&&o.up()),r=this._.element,s=this.dg,!r.getParent()||!r.getParent().equals(n.document.bH())){if(r.appendTo(n.document.bH()),i.gecko&&i.version<10900&&(h=this.bO.dialog,h.setStyle("position","absolute"),setTimeout(function(){h.setStyle("position","fixed")},0)),this.resize(this._.hB&&this._.hB.width||s.minWidth,this._.hB&&this._.hB.height||s.minHeight),this.selectPage(this.dg.contents[0].id),this.reset(),n.dialog._.gw===null&&(n.dialog._.gw=this._.app.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",n.dialog._.gw+=10),n.dialog._.dL===null){n.dialog._.dL=this;this._.ep=null;try{it(this._.app)}catch(a){u=void 0;it(e);tt=!1}r.on("keydown",rt);r.on(i.opera?"keypress":"keyup",ut);for(c in{keyup:1,keydown:1,keypress:1})r.on(c,ft)}else this._.ep=n.dialog._.dL,l=this._.ep.getElement().getFirst(),l.$.style.zIndex-=Math.floor(this._.app.config.baseFloatZIndex/2),n.dialog._.dL=this;p(this,this,"\x1b",null,function(){var n=this.getButton("cancel");n?n.click():this.oW("cancel",{hide:!0}).hide!==!1&&this.hide()});this._.hasFocus=!1;t.setTimeout(function(){this.layout();this.bO.dialog.setStyle("visibility","");this.cr("load",{});this.oW("show",{});this._.app.oW("dialogShow",this);this.gh(function(n){n.jW&&n.jW()})},100,this)}},layout:function(){var t=this,i=n.document.getWindow().eR(),r=t.hR();t.move(t._.moved?t._.position.x:(i.width-r.width)/2,t._.moved?t._.position.y:(i.height-r.height)/2)},gh:function(n){var t=this,i,r;for(i in t._.contents)for(r in t._.contents[i])n(t._.contents[i][r]);return t},reset:function(){var n=function(n){n.reset&&n.reset()};return function(){return this.gh(n),this}}(),rN:function(){var n=arguments;this.gh(function(t){t.qi&&t.qi.apply(t,n)})},sI:function(){var n=arguments;this.gh(function(t){t.rx&&t.rx.apply(t,n)})},hide:function(){var t,u,o,r,e;if(this.oW("hide",{}),this._.app.oW("dialogHide",this),t=this._.element,t.getParent()){if(t.remove(),this.bO.dialog.setStyle("visibility","hidden"),ct(this),this._.ep?(u=this._.ep.getElement().getFirst(),u.setStyle("z-index",parseInt(u.$.style.zIndex,10)+Math.floor(this._.app.config.baseFloatZIndex/2))):ht(),n.dialog._.dL=this._.ep,this._.ep)n.dialog._.gw-=10;else{n.dialog._.gw=null;t.removeListener("keydown",rt);t.removeListener(i.opera?"keypress":"keyup",ut);for(o in{keyup:1,keydown:1,keypress:1})t.removeListener(o,ft);r=this._.app;r.focus();r._.activeElement=null;r._.oO=[];r.mode=="qt"&&f&&(e=r.getSelection(),e&&e.sd(!0))}this.gh(function(n){n.ki&&n.ki()})}},addPage:function(i){var r=this,h=[],l=i.label?' title="'+t.htmlEncode(i.label)+'"':"",v=i.elements,a=n.dialog._.gv.vbox.dQ(r,{type:"vbox",className:"cke_dialog_page_contents",children:i.elements,expand:!!i.expand,padding:i.padding,style:i.style||"width: 100%; height: 100%;"},h),s=e.kE(h.join(""),n.document),f=e.kE(['<a class="cke_dialog_tab"',r._.gV>0?" cke_last":"cke_first",l,!i.hidden?"":' style="display:none"',' id="',i.id+"_",t.getNextNumber(),'" href="javascript:void(0)"',' hp="true">',i.label,"<\/a>"].join(""),n.document),c,u,o;for(r._.gV===0?r.bO.dialog.addClass("cke_single_page"):r.bO.dialog.removeClass("cke_single_page"),r._.tabs[i.id]=[f,s],r._.cU.push(i.id),r._.gV++,r._.qF=f,c=r._.contents[i.id]={},o=a.getChild();u=o.shift();)c[u.id]=u,typeof u.getChild=="function"&&o.push.apply(o,u.getChild());s.setAttribute("name",i.id);s.appendTo(r.bO.contents);f.unselectable();r.bO.tabs.append(f);i.accessKey&&(p(r,r,"bP+"+i.accessKey,at,lt),r._.iX["bP+"+i.accessKey]=i.id)},selectPage:function(n){var i=this,r,f,e,u;for(r in i._.tabs)f=i._.tabs[r][0],e=i._.tabs[r][1],r!=n&&(f.removeClass("cke_dialog_tab_selected"),e.hide());u=i._.tabs[n];u[0].addClass("cke_dialog_tab_selected");u[1].show();i._.gx=n;i._.nM=t.indexOf(i._.cU,n)},vJ:function(n){var t=this._.tabs[n]&&this._.tabs[n][0];t&&t.hide()},showPage:function(n){var t=this._.tabs[n]&&this._.tabs[n][0];t&&t.show()},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(n,t){return this._.contents[n][t]},getValueOf:function(n,t){return this.getContentElement(n,t).getValue()},setValueOf:function(n,t,i){return this.getContentElement(n,t).setValue(i)},getButton:function(n){return this._.buttons[n]},click:function(n){return this._.buttons[n].click()},disableButton:function(n){return this._.buttons[n].disable()},enableButton:function(n){return this._.buttons[n].enable()},vj:function(){return this._.gV},getParentApi:function(){return this._.app.cg},eY:function(){return this._.app},rf:function(){return this.eY().getSelection().rf()},tQ:function(n,t){var i=this,r;if(typeof t=="undefined")t=i._.eO.length,i._.eO.push(new d(i,n,t));else for(i._.eO.splice(t,0,new d(i,n,t)),r=t+1;r<i._.eO.length;r++)i._.eO[r].cQ++},setTitle:function(n){this.bO.title.setText(n)}};t.extend(n.dialog,{add:function(n,t){this._.ev[n]&&typeof t!="function"||(this._.ev[n]=t)},exists:function(n){return!!this._.ev[n]},getCurrent:function(){return n.dialog._.dL},okButton:function(){var n=function(n,i){return i=i||{},t.extend({id:"ok",type:"button",label:n.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(n){var t=n.data.dialog;t.oW("ok",{hide:!0}).hide!==!1&&t.hide()}},i,!0)};return n.type="button",n.override=function(i){return t.extend(function(t){return n(t,i)},{type:"button"},!0)},n}(),cancelButton:function(){var n=function(n,i){return i=i||{},t.extend({id:"cancel",type:"button",label:n.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(n){var t=n.data.dialog;t.oW("cancel",{hide:!0}).hide!==!1&&t.hide()}},i,!0)};return n.type="button",n.override=function(i){return t.extend(function(t){return n(t,i)},{type:"button"},!0)},n}(),addUIElement:function(n,t){this._.gv[n]=t}});n.dialog._={gv:{},ev:{},dL:null,gw:null};n.event.du(n.dialog);n.event.du(n.dialog.prototype,!0);var et={resizable:n.DIALOG_RESIZE_NONE,minWidth:600,minHeight:400,buttons:[n.dialog.okButton,n.dialog.cancelButton]},h=function(n,t,i){for(var r,f,u=0;r=n[u];u++){if(r.id==t)return r;if(i&&r[i]&&(f=h(r[i],t,i),f))return f}return null},l=function(n,t,i,r,u){var f,e,o;if(i){for(f=0;e=n[f];f++){if(e.id==i)return n.splice(f,0,t),t;if(r&&e[r]&&(o=l(e[r],t,i,r,!0),o))return o}if(u)return null}return n.push(t),t},a=function(n,t,i){for(var u,f,r=0;u=n[r];r++){if(u.id==t)return n.splice(r,1);if(i&&u[i]&&(f=a(u[i],t,i),f))return f}return null},g=function(n,i){var u,r,f;for(this.dialog=n,u=i.contents,r=0;f=u[r];r++)u[r]=new nt(n,f);t.extend(this,i)};g.prototype={vz:function(n){return h(this.contents,n)},getButton:function(n){return h(this.buttons,n)},uh:function(n,t){return l(this.contents,n,t)},qW:function(n,t){return l(this.buttons,n,t)},uP:function(n){a(this.contents,n)},uO:function(n){a(this.buttons,n)}};nt.prototype={eB:function(n){return h(this.elements,n,"children")},add:function(n,t){return l(this.elements,n,t,"children")},remove:function(n){a(this.elements,n,"children")}};var tt=!0,u,y,it=function(t){var f=n.document.getWindow(),s,r,a,v,c,l;tt&&u||(s=t.config.dialog_backgroundCoverColor||"white",r=['<div style="position: ',i.ie6Compat?"absolute":"fixed","; z-index: ",t.config.baseFloatZIndex,"; top: 0px; left: 0px; ",i.ie6Compat?"":"background-color: "+s,'" id="cke_dialog_background_cover">'],i.ie6Compat&&(a=i.isCustomDomain(),v="<html><body style=\\'background-color:"+s+";\\'><\/body><\/html>",r.push('<iframe hp="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),r.push("void((function(){document.open();"+(a?"document.domain='"+document.domain+"';":"")+"document.write( '"+v+"' );document.close();})())"),r.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"><\/iframe>')),r.push("<\/div>"),u=e.kE(r.join(""),n.document));var o=u,h=function(){var n=f.eR();o.setStyles({width:n.width+"px",height:n.height+"px"})},p=function(){var r=f.hV(),t=n.dialog._.dL,i;o.setStyles({left:r.x+"px",top:r.y+"px"});do i=t.gz(),t.move(i.x,i.y);while(t=t._.ep)};y=h;f.on("resize",h);h();i.ie6Compat&&(c=function(){p();arguments.callee.lw.apply(this,arguments)},f.$.setTimeout(function(){c.lw=window.onscroll||function(){};window.onscroll=c},0),p());l=t.config.dialog_backgroundCoverOpacity;o.setOpacity(typeof l!="undefined"?l:.5);o.appendTo(n.document.bH())},ht=function(){if(u){var t=n.document.getWindow();u.remove();t.removeListener("resize",y);i.ie6Compat&&t.$.setTimeout(function(){var n=window.onscroll&&window.onscroll.lw;window.onscroll=n||null},0);y=null}},s={},rt=function(n){var i=n.data.$.ctrlKey||n.data.$.metaKey,r=n.data.$.altKey,u=n.data.$.shiftKey,f=String.fromCharCode(n.data.$.keyCode),t=s[(i?"bP+":"")+(r?"eJ+":"")+(u?"dy+":"")+f];t&&t.length&&(t=t[t.length-1],t.keydown&&t.keydown.call(t.bf,t.dialog,t.iK),n.data.preventDefault())},ut=function(n){var i=n.data.$.ctrlKey||n.data.$.metaKey,r=n.data.$.altKey,u=n.data.$.shiftKey,f=String.fromCharCode(n.data.$.keyCode),t=s[(i?"bP+":"")+(r?"eJ+":"")+(u?"dy+":"")+f];t&&t.length&&(t=t[t.length-1],t.keyup&&(t.keyup.call(t.bf,t.dialog,t.iK),n.data.preventDefault()))},p=function(n,t,i,r,u){var f=s[i]||(s[i]=[]);f.push({bf:n,dialog:t,iK:i,keyup:u||n.eZ,keydown:r||n.iU})},ct=function(n){var r,t,i;for(r in s){for(t=s[r],i=t.length-1;i>=0;i--)(t[i].dialog==n||t[i].bf==n)&&t.splice(i,1);t.length===0&&delete s[r]}},lt=function(n,t){n._.iX[t]&&n.selectPage(n._.iX[t])},at=function(){},vt={27:1,13:1},ft=function(n){n.data.db()in vt&&n.data.stopPropagation()};(function(){r.dialog={bf:function(i,r,u,f,e,o,s){var v,y,b,l,a;if(!(arguments.length<4)){var k=(f.call?f(r):f)||"div",w=["<",k," "],d=(e&&e.call?e(r):e)||{},c=(o&&o.call?o(r):o)||{},g=(s&&s.call?s(i,r):s)||"",nt=this.oJ=c.id||t.getNextNumber()+"_uiElement",tt=this.id=r.id,h;for(c.id=nt,v={},r.type&&(v["cke_dialog_ui_"+r.type]=1),r.className&&(v[r.className]=1),y=c["class"]&&c["class"].split?c["class"].split(" "):[],h=0;h<y.length;h++)y[h]&&(v[y[h]]=1);b=[];for(h in v)b.push(h);c["class"]=b.join(" ");r.title&&(c.title=r.title);l=(r.style||"").split(";");for(h in d)l.push(h+":"+d[h]);for(r.hidden&&l.push("display:none"),h=l.length-1;h>=0;h--)l[h]===""&&l.splice(h,1);l.length>0&&(c.style=(c.style?c.style+"; ":"")+l.join("; "));for(h in c)w.push(h+'="'+t.htmlEncode(c[h])+'" ');w.push(">",g,"<\/",k,">");u.push(w.join(""));(this._||(this._={})).dialog=i;typeof r.isChanged=="boolean"&&(this.isChanged=function(){return r.isChanged});typeof r.isChanged=="function"&&(this.isChanged=r.isChanged);n.event.du(this);this.nc(r);this.eZ&&this.iU&&r.accessKey&&p(this,i,"bP+"+r.accessKey);a=this;i.on("load",function(){if(a.getInputElement())a.getInputElement().on("focus",function(){i._.eC=!1;i._.hasFocus=!0;a.oW("focus")},a)});if(this.eA){this.cQ=i._.eO.push(this)-1;this.on("focus",function(){i._.aW=a.cQ})}t.extend(this,r)}},hbox:function(n,i,u,f,e){if(!(arguments.length<4)){this._||(this._={});var l=this._.children=i,s=e&&e.widths||null,h=e&&e.height||null,o,c=function(){var i=['<tbody><tr class="cke_dialog_ui_hbox">'],r,n;for(o=0;o<u.length;o++)r="cke_dialog_ui_hbox_child",n=[],o===0&&(r="cke_dialog_ui_hbox_first"),o==u.length-1&&(r="cke_dialog_ui_hbox_last"),i.push('<td class="',r,'" '),s?s[o]&&n.push("width:"+t.cssLength(s[o])):n.push("width:"+Math.floor(100/u.length)+"%"),h&&n.push("height:"+t.cssLength(h)),e&&e.padding!=undefined&&n.push("padding:"+t.cssLength(e.padding)),n.length>0&&i.push('style="'+n.join("; ")+'" '),i.push(">",u[o],"<\/td>");return i.push("<\/tr><\/tbody>"),i.join("")};r.dialog.bf.call(this,n,e||{type:"hbox"},f,"table",{},e&&e.align&&{align:e.align}||null,c)}},vbox:function(n,i,u,f,e){if(!(arguments.length<3)){this._||(this._={});var c=this._.children=i,o=e&&e.width||null,s=e&&e.vY||null,h=function(){var i=['<table cellspacing="0" border="0" '],f,r;for(i.push('style="'),e&&e.expand&&i.push("height:100%;"),i.push("width:"+t.cssLength(o||"100%"),";"),i.push('"'),i.push('align="',t.htmlEncode(e&&e.align||(n.eY().lang.dir=="ltr"?"left":"right")),'" '),i.push("><tbody>"),f=0;f<u.length;f++)r=[],i.push("<tr><td "),o&&r.push("width:"+t.cssLength(o||"100%")),s?r.push("height:"+t.cssLength(s[f])):e&&e.expand&&r.push("height:"+Math.floor(100/u.length)+"%"),e&&e.padding!=undefined&&r.push("padding:"+t.cssLength(e.padding)),r.length>0&&i.push('style="',r.join("; "),'" '),i.push(' class="cke_dialog_ui_vbox_child">',u[f],"<\/td><\/tr>");return i.push("<\/tbody><\/table>"),i.join("")};r.dialog.bf.call(this,n,e||{type:"vbox"},f,"div",null,null,h)}}}})();r.dialog.bf.prototype={getElement:function(){return n.document.getById(this.oJ)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(n){return this.getInputElement().setValue(n),this.oW("change",{value:n}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var n=this,r=n.getInputElement(),t=r,i;(t=t.getParent())&&t.$.className.search("cke_dialog_page_contents")==-1;);return t?(i=t.getAttribute("name"),n._.dialog._.gx!=i&&n._.dialog.selectPage(i),n):n},focus:function(){return this.selectParentTab().getInputElement().focus(),this},nc:function(n){var i,r=function(n,t,i,r){t.on("load",function(){n.getInputElement().on(i,r,n)})};for(var t in n)(i=t.match(/^on([A-Z]\w+)/))&&(this.dm[t]?this.dm[t].call(this,this._.dialog,n[t]):r(this,this._.dialog,i[1].toLowerCase(),n[t]));return this},dm:{onLoad:function(n,t){n.on("load",t,this)},onShow:function(n,t){n.on("show",t,this)},onHide:function(n,t){n.on("hide",t,this)}},iU:function(){this.focus()},eZ:function(){},disable:function(){var n=this.getInputElement();n.setAttribute("disabled","true");n.addClass("cke_disabled")},enable:function(){var n=this.getInputElement();n.removeAttribute("disabled");n.removeClass("cke_disabled")},isEnabled:function(){return!this.getInputElement().getAttribute("disabled")},isVisible:function(){return this.getInputElement().isVisible()},fM:function(){return!this.isEnabled()||!this.isVisible()?!1:!0}};r.dialog.hbox.prototype=t.extend(new r.dialog.bf,{getChild:function(n){var t=this;return arguments.length<1?t._.children.concat():(n.splice||(n=[n]),n.length<2?t._.children[n[0]]:t._.children[n[0]]&&t._.children[n[0]].getChild?t._.children[n[0]].getChild(n.slice(1,n.length)):null)}},!0);r.dialog.vbox.prototype=new r.dialog.hbox,function(){var t={dQ:function(t,i,u){for(var o,s=i.children,f,h=[],c=[],e=0;e<s.length&&(f=s[e]);e++)o=[],h.push(o),c.push(n.dialog._.gv[f.type].dQ(t,f,o));return new r.dialog[i.type](t,c,h,u,i)}};n.dialog.addUIElement("hbox",t);n.dialog.addUIElement("vbox",t)}();n.rB=function(n){this.ry=n};n.rB.prototype={exec:function(n){n.openDialog(this.ry)},sG:!1},function(){var t=/^([a]|[^a])+$/,i=/^\d*$/,r=/^\d*(?:\.\d+)?$/;n.sg=1;n.jb=2;n.dialog.validate={functions:function(){return function(){for(var i=this,o=i&&i.getValue?i.getValue():arguments[0],f=undefined,e=n.jb,u=[],r,t=0;t<arguments.length;t++)if(typeof arguments[t]=="function")u.push(arguments[t]);else break;for(t<arguments.length&&typeof arguments[t]=="string"&&(f=arguments[t],t++),t<arguments.length&&typeof arguments[t]=="number"&&(e=arguments[t]),r=e==n.jb?!0:!1,t=0;t<u.length;t++)r=e==n.jb?r&&u[t](o):r||u[t](o);return r?!0:(f!==undefined&&alert(f),i&&(i.select||i.focus)&&(i.select||i.focus()),!1)}},regex:function(n,t){return function(){var i=this,r=i&&i.getValue?i.getValue():arguments[0];return n.test(r)?!0:(t!==undefined&&alert(t),i&&(i.select||i.focus)&&(i.select?i.select():i.focus()),!1)}},notEmpty:function(n){return this.regex(t,n)},integer:function(n){return this.regex(i,n)},number:function(n){return this.regex(r,n)},equals:function(n,t){return this.functions(function(t){return t==n},t)},notEqual:function(n,t){return this.functions(function(t){return t!=n},t)}}}();t.extend(n.application.prototype,{openDialog:function(t,i,r){var f=n.dialog._.ev[t],e,u;if(typeof f=="function")return e=this._.oB||(this._.oB={}),u=e[t]||(e[t]=new n.dialog(this,t)),i&&i.call(u,u),this._.activeElement||(this._.activeElement=this.document.$.activeElement),this._.oO||(this._.oO=this.ld["filesview.filesview"].tools.oO()),u.show(),u;if(f=="failed")throw new Error('[CKFINDER.dialog.openDialog] Dialog "'+t+'" failed when loading dg.');var o=n.document.bH(),s=o.$.style.cursor,h=this;return o.setStyle("cursor","wait"),n.scriptLoader.load(n.getUrl(f),function(){typeof n.dialog._.ev[t]!="function"&&(n.dialog._.ev[t]="failed");h.openDialog(t,i);o.setStyle("cursor",s)},null,null,r),null},hs:function(n,t,i,r){var u=this;setTimeout(function(){u.cg.openDialog("Input",function(f){f.show();f.setTitle(n||u.lang.common.inputTitle);f.getContentElement("tab1","msg").getElement().setHtml(t);f.getContentElement("tab1","input").setValue(i);v(f,function(n){var t=n.getContentElement("tab1","input").getValue();r(t)})})},0)},msgDialog:function(n,t,i){var r=this;setTimeout(function(){r.cg.openDialog("Msg",function(u){u.show();u.setTitle(n||r.lang.common.messageTitle);u.getContentElement("tab1","msg").getElement().setHtml(t);i&&v(u,function(){i()})})},0)},fe:function(n,t,i){var r=this;setTimeout(function(){r.cg.openDialog("Confirm",function(u){u.show();u.setTitle(n||r.lang.common.confirmationTitle);u.getContentElement("tab1","msg").getElement().setHtml(t);v(u,function(){i()})})},0)},skippedFilesDialog:function(n,i,r,u){var f=this;setTimeout(function(){f.cg.openDialog("SkippedFiles",function(e){var o;e.show();e.setTitle(n||f.lang.common.messageTitle);r?(e.getContentElement("tab1","msg").getElement().show(),e.getContentElement("tab1","msg").getElement().setHtml(r)):e.getContentElement("tab1","msg").getElement().hide();var h="",c="cke_files_list",l="",s=i.length;for(s>3&&(c+=" cke_files_list_many",l=' style="height: '+Math.min(s+.1,20)+'em"'),o=0;o<s;o++)h+="<li>"+t.escapeHtml(typeof i[o]=="string"?i[o]:i[o].getAttribute("name"))+"<\/li>";e.getContentElement("tab1","skippedList").getElement().setHtml('<ul class="'+c+'"'+l+">"+h+"<\/ul>");u&&v(e,function(){u()})})},0)}});o.add("dialog",{bM:["dialogui"],onLoad:function(){n.dialog.add("Confirm",function(n){return{title:n.lang.common.confirmationTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});n.dialog.add("Msg",function(n){return{title:n.lang.common.messageTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"}]}],buttons:[CKFinder.dialog.okButton]}});n.dialog.add("Input",function(n){return{title:n.lang.common.inputTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"},{type:"text",id:"input"}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});n.dialog.add("SkippedFiles",function(n){return{title:n.lang.common.messageTitle,minWidth:400,minHeight:100,contents:[{id:"tab1",style:i.ie7Compat?"height: auto":"",expand:!0,padding:0,elements:[{type:"vbox",expand:!0,children:[{type:"html",className:"cke_dialog_msg",html:"",id:"msg"},{type:"html",id:"skippedDescription",className:"cke_dialog_msg",html:n.lang.SkippedFiles},{type:"html",id:"skippedList",className:"cke_dialog_msg",html:""}]}]}],buttons:[CKFinder.dialog.okButton]}})}})}();o.add("dialogui"),function(){var o=function(n){var i=this,r,u;for(i._||(i._={}),i._["default"]=i._.hq=n["default"]||"",r=[i._],u=1;u<arguments.length;u++)r.push(arguments[u]);return r.push(!0),t.extend.apply(t,r),i._},a={dQ:function(n,t,i){return new r.dialog.ju(n,t,i)}},s={dQ:function(n,t,i){return new r.dialog[t.type](n,t,i)}},h={isChanged:function(){return this.getValue()!=this.lu()},reset:function(){this.setValue(this.lu())},jW:function(){this._.hq=this.getValue()},ki:function(){this._.hq=this._["default"]},lu:function(){return this._.hq}},c=t.extend({},r.dialog.bf.prototype.dm,{onChange:function(n,t){if(!this._.pL){n.on("load",function(){this.getInputElement().on("change",function(){this.oW("change",{value:this.getValue()})},this)},this);this._.pL=!0}this.on("change",t)}},!0),v=/^on([A-Z]\w+)/,l=function(n){for(var t in n)(v.test(t)||t=="title"||t=="type")&&delete n[t];return n};t.extend(r.dialog,{dD:function(i,u,f,e){var s,c,h;arguments.length<4||(s=o.call(this,u),s.hz=t.getNextNumber()+"_label",c=this._.children=[],h=function(){var r=[],f;return u.uC!="horizontal"?r.push('<div class="cke_dialog_ui_labeled_label" id="',s.hz,'" >',u.label,"<\/div>",'<div class="cke_dialog_ui_labeled_content">',e(i,u),"<\/div>"):(f={type:"hbox",widths:u.widths,padding:0,children:[{type:"html",html:'<span class="cke_dialog_ui_labeled_label" id="'+s.hz+'">'+t.htmlEncode(u.label)+"<\/span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content">'+e(i,u)+"<\/span>"}]},n.dialog._.gv.hbox.dQ(i,f,r)),r.join("")},r.dialog.bf.call(this,i,u,f,"div",null,null,h))},ju:function(n,i,u){var h,f,s,e,c;if(!(arguments.length<3)){o.call(this,i);h=this._.le=t.getNextNumber()+"_textInput";f={"class":"cke_dialog_ui_input_"+i.type,id:h,type:"text"};i.validate&&(this.validate=i.validate);i.maxLength&&(f.uy=i.maxLength);i.size&&(f.size=i.size);s=this;e=!1;n.on("load",function(){s.getInputElement().on("keydown",function(n){n.data.db()==13&&(e=!0)});s.getInputElement().on("keyup",function(t){t.data.db()==13&&e&&(n.getButton("ok")&&setTimeout(function(){n.getButton("ok").click()},0),e=!1)},null,null,1e3)});c=function(){var n=['<div class="cke_dialog_ui_input_',i.type,'"'],t;i.width&&n.push('style="width:'+i.width+'" ');n.push("><input ");for(t in f)n.push(t+'="'+f[t]+'" ');return n.push(" /><\/div>"),n.join("")};r.dialog.dD.call(this,n,i,u,c)}},textarea:function(n,i,u){var e;if(!(arguments.length<3)){o.call(this,i);var s=this,h=this._.le=t.getNextNumber()+"_textarea",f={};i.validate&&(this.validate=i.validate);f.rows=i.rows||5;f.cols=i.cols||20;e=function(){var n=['<div class="cke_dialog_ui_input_textarea"><textarea class="cke_dialog_ui_input_textarea" id="',h,'" '];for(var i in f)n.push(i+'="'+t.htmlEncode(f[i])+'" ');return n.push(">",t.htmlEncode(s._["default"]),"<\/textarea><\/div>"),n.join("")};r.dialog.dD.call(this,n,i,u,e)}},checkbox:function(n,i,u){var f,e;arguments.length<3||(f=o.call(this,i,{"default":!!i["default"]}),i.validate&&(this.validate=i.validate),e=function(){var o=t.extend({},i,{id:i.id?i.id+"_checkbox":t.getNextNumber()+"_checkbox"},!0),u=[],e={"class":"cke_dialog_ui_checkbox_input",type:"checkbox"};return l(o),i["default"]&&(e.checked="checked"),f.checkbox=new r.dialog.bf(n,o,u,"input",null,e),u.push(' <label for="',e.id,'">',t.htmlEncode(i.label),"<\/label>"),u.join("")},r.dialog.bf.call(this,n,i,u,"span",null,null,e))},radio:function(n,i,u){if(!(arguments.length<3)){o.call(this,i);this._["default"]||(this._["default"]=this._.hq=i.items[0][1]);i.validate&&(this.validate=i.sh);var f=[],e=this,s=function(){for(var a=[],v=[],w=i.id?i.id+"_radio":t.getNextNumber()+"_radio",s=0;s<i.items.length;s++){var u=i.items[s],b=u[2]!==undefined?u[2]:u[0],y=u[1]!==undefined?u[1]:u[0],h=t.extend({},i,{id:t.getNextNumber()+"_radio_input",title:null,type:null},!0),p=t.extend({},h,{id:null,title:b},!0),c={type:"radio","class":"cke_dialog_ui_radio_input",name:w,value:y},o=[];e._["default"]==y&&(c.checked="checked");l(h);l(p);f.push(new r.dialog.bf(n,h,o,"input",null,c));o.push(" ");new r.dialog.bf(n,p,o,"label",null,{"for":c.id},u[0]);a.push(o.join(""))}return new r.dialog.hbox(n,[],a,v),v.join("")};r.dialog.dD.call(this,n,i,u,s);this._.children=f}},button:function(i,u,f){var e,s;if(arguments.length){typeof u=="function"&&(u=u(i.eY()));o.call(this,u,{disabled:u.disabled||!1});n.event.du(this);e=this;i.on("load",function(){var n=this.getElement();(function(){n.on("click",function(n){e.oW("click",{dialog:e.getDialog()});n.data.preventDefault()})})();n.unselectable()},this);s=t.extend({},u);delete s.style;r.dialog.bf.call(this,i,s,f,"a",null,{style:u.style,href:"javascript:void(0)",title:u.label,hp:"true","class":u["class"]},'<span class="cke_dialog_ui_button">'+t.htmlEncode(u.label)+"<\/span>")}},select:function(n,i,u){var f,e;arguments.length<3||(f=o.call(this,i),i.validate&&(this.validate=i.validate),e=function(){var s=t.extend({},i,{id:i.id?i.id+"_select":t.getNextNumber()+"_select"},!0),h=[],c=[],o={"class":"cke_dialog_ui_input_select"},e,u;for(i.size!=undefined&&(o.size=i.size),i.multiple!=undefined&&(o.multiple=i.multiple),l(s),e=0;e<i.items.length&&(u=i.items[e]);e++)c.push('<option value="',t.htmlEncode(u[1]!==undefined?u[1]:u[0]),'" /> ',t.htmlEncode(u[0]));return f.select=new r.dialog.bf(n,s,h,"select",null,o,c.join("")),h.join("")},r.dialog.dD.call(this,n,i,u,e))},file:function(u,f,e){var s,h;if(!(arguments.length<3)){f["default"]===undefined&&(f["default"]="");s=t.extend(o.call(this,f),{dg:f,buttons:[]});f.validate&&(this.validate=f.validate);h=function(){s.gL=t.getNextNumber()+"_fileInput";var r=i.isCustomDomain(),n=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',s.gL,'" title="',f.label,'" src="javascript:void('];return n.push(r?"(function(){document.open();document.domain='"+document.domain+"';document.close();})()":"0"),n.push(')"><\/iframe>'),n.join("")};u.on("load",function(){var t=n.document.getById(s.gL),i=t.getParent();i.addClass("cke_dialog_ui_input_file")});r.dialog.dD.call(this,u,f,e,h)}},fileButton:function(n,i,u){var h,s,f,e;if(!(arguments.length<3)){h=o.call(this,i);s=this;i.validate&&(this.validate=i.validate);f=t.extend({},i);e=f.onClick;f.className=(f.className?f.className+" ":"")+"cke_dialog_ui_button";f.onClick=function(t){var r=i["for"];e&&e.call(this,t)===!1||(n.getContentElement(r[0],r[1]).submit(),this.disable())};n.on("load",function(){n.getContentElement(i["for"][0],i["for"][1])._.buttons.push(s)});r.dialog.button.call(this,n,f,u)}},html:function(){var n=/^\s*<[\w:]+\s+([^>]*)?>/,t=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,i=/\/$/;return function(u,f,e){var h,c,s,l,o,a,v;arguments.length<3||(h=[],s=f.html,s.charAt(0)!="<"&&(s="<span>"+s+"<\/span>"),f.focus&&(a=this.focus,this.focus=function(){a.call(this);f.focus.call(this);this.oW("focus")},f.fM&&(v=this.fM,this.fM=v),this.eA=!0),r.dialog.bf.call(this,u,f,h,"span",null,null,""),c=h.join(""),l=c.match(n),o=s.match(t)||["","",""],i.test(o[1])&&(o[1]=o[1].slice(0,-1),o[2]="/"+o[2]),e.push([o[1]," ",l[1]||"",o[2]].join("")))}}()},!0);r.dialog.html.prototype=new r.dialog.bf;r.dialog.dD.prototype=t.extend(new r.dialog.bf,{rW:function(t){var i=n.document.getById(this._.hz);return i.iu()<1?new u.text(t,n.document).appendTo(i):i.getChild(0).$.nodeValue=t,this},vt:function(){var t=n.document.getById(this._.hz);return!t||t.iu()<1?"":t.getChild(0).getText()},dm:c},!0);r.dialog.button.prototype=t.extend(new r.dialog.bf,{click:function(){var n=this;return n._.disabled?(n.getElement().$.blur(),!1):n.oW("click",{dialog:n._.dialog})},enable:function(){this._.disabled=!1;var n=this.getElement();n&&n.removeClass("disabled")},disable:function(){this._.disabled=!0;this.getElement().addClass("disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},dm:t.extend({},r.dialog.bf.prototype.dm,{onClick:function(n,t){this.on("click",t)}},!0),eZ:function(){this.click()},iU:function(){this.focus()},eA:!0},!0);r.dialog.ju.prototype=t.extend(new r.dialog.dD,{getInputElement:function(){return n.document.getById(this._.le)},focus:function(){var n=this.selectParentTab();setTimeout(function(){var t=n.getInputElement();t&&t.$.focus()},0)},select:function(){var n=this.selectParentTab();setTimeout(function(){var t=n.getInputElement();t&&(t.$.focus(),t.$.select())},0)},eZ:function(){this.select()},setValue:function(n){return n=n!==null?n:"",r.dialog.bf.prototype.setValue.call(this,n)},eA:!0},h,!0);r.dialog.textarea.prototype=new r.dialog.ju;r.dialog.select.prototype=t.extend(new r.dialog.dD,{getInputElement:function(){return this._.select.getElement()},add:function(n,t,i){var r=new e("option",this.getDialog().eY().document),u=this.getInputElement().$;return r.$.text=n,r.$.value=t===undefined||t===null?n:t,i===undefined||i===null?f?u.add(r.$):u.add(r.$,null):u.add(r.$,i),this},remove:function(n){var t=this.getInputElement().$;return t.remove(n),this},clear:function(){for(var n=this.getInputElement().$;n.length>0;)n.remove(0);return this},eA:!0},h,!0);r.dialog.checkbox.prototype=t.extend(new r.dialog.bf,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(n){this.getInputElement().$.checked=n;this.oW("change",{value:n})},getValue:function(){return this.getInputElement().$.checked},eZ:function(){this.setValue(!this.getValue())},dm:{onChange:function(n,t){if(f){n.on("load",function(){var n=this._.checkbox.getElement();n.on("propertychange",function(t){t=t.data.$;t.propertyName=="checked"&&this.oW("change",{value:n.$.checked})},this)},this);this.on("change",t)}else return c.onChange.apply(this,arguments);return null}},eA:!0},h,!0);r.dialog.radio.prototype=t.extend(new r.dialog.bf,{setValue:function(n){for(var r=this._.children,t,i=0;i<r.length&&(t=r[i]);i++)t.getElement().$.checked=t.getValue()==n;this.oW("change",{value:n})},getValue:function(){for(var t=this._.children,n=0;n<t.length;n++)if(t[n].getElement().$.checked)return t[n].getValue();return null},eZ:function(){for(var t=this._.children,n=0;n<t.length;n++)if(t[n].getElement().$.checked){t[n].getElement().focus();return}t[0].getElement().focus()},dm:{onChange:function(n,t){if(f){n.on("load",function(){for(var i,t=this._.children,r=this,n=0;n<t.length;n++){i=t[n].getElement();i.on("propertychange",function(n){n=n.data.$;n.propertyName=="checked"&&this.$.checked&&r.oW("change",{value:this.getAttribute("value")})})}},this);this.on("change",t)}else return c.onChange.apply(this,arguments);return null}},eA:!0},h,!0);r.dialog.file.prototype=t.extend(new r.dialog.dD,h,{getInputElement:function(){var t=n.document.getById(this._.gL).getFrameDocument();return t.$.forms.length>0?new e(t.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},vy:function(){return this.getInputElement().getParent().$.action},reset:function(){function o(){var n,o;for(r.$.open(),i.isCustomDomain()&&(r.$.domain=document.domain),n="",u.size&&(n=u.size-(f?7:0)),r.$.write(['<html><head><title><\/title><\/head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" action="',t.htmlEncode(u.action),'">','<input type="file" name="',t.htmlEncode(u.id||"cke_upload"),'" size="',t.htmlEncode(n>0?n:""),'" />',"<\/form>","<\/body><\/html>"].join("")),r.$.close(),o=0;o<e.length;o++)e[o].enable()}var s=n.document.getById(this._.gL),r=s.getFrameDocument(),u=this._.dg,e=this._.buttons;i.gecko?setTimeout(o,500):o()},getValue:function(){return""},dm:c,eA:!0},!0);r.dialog.fileButton.prototype=new r.dialog.button;n.dialog.addUIElement("text",a);n.dialog.addUIElement("password",a);n.dialog.addUIElement("textarea",s);n.dialog.addUIElement("checkbox",s);n.dialog.addUIElement("radio",s);n.dialog.addUIElement("button",s);n.dialog.addUIElement("select",s);n.dialog.addUIElement("file",s);n.dialog.addUIElement("fileButton",s);n.dialog.addUIElement("html",s);t.extend(CKFinder.dialog,n.dialog)}(),function(){o.add("help",{bM:["toolbar","button"],bz:function(t){t.config.disableHelpButton||(t.bD("help",{exec:function(t){t.ld["filesview.filesview"].bn().focus();window.open(n.basePath+"help/"+(t.lang.HelpLang||"en")+"/index.html")}}),t.bY.add("Help",n.UI_BUTTON,{label:t.lang.Help,command:"help"}))}})}(),function(){function l(n,i,r,f,o){for(var c=0,l=0,a=[],h=0;h<n.length;h++)(!f||f(n[h]))&&(a.push('<a href="',n[h].getUrl(),'" title="',t.escapeHtml(n[h].name),'" rel="',t.escapeHtml(r),'">a<\/a>'),n[h].isSameFile(i)&&(c=l),l++);return s="ckf_gallery_"+t.getRandomString(20),v(),u=new e("div",o),u.setAttribute("id",s),u.setHtml(a.join("")),u.appendTo(o.bH()),u.hide(),c}function nt(t){if(t&&t.inPopup){var r=new c(t.document),u=r.getWindow();if(!f&&!i.opera||u.$.top.location.href.match(/ckfinder.html/)||u.$.top.name=="CKFinderpopup")return r}return n.oC}function a(n){return function(){n.$.activeElement&&n.$.activeElement.blur();n.$.activeElement&&n.$.activeElement.blur();i.gecko||(n.getWindow().focus(),n.bH().focus())}}function v(){u&&u.remove()}function y(n){return function(){v();n&&n.focus(!0,!0)}}function tt(t){if(t.click)t.click();else if(n.document.$.createEvent){var i=n.document.$.createEvent("MouseEvents");i.initEvent("click",!0,!0);t.dispatchEvent(i)}}function it(n,t,r){if(f&&i.version<9)n.$.onreadystatechange=function(){(this.readyState=="loaded"||this.readyState=="complete")&&setTimeout(function(){t.callee.apply(r,t)},0)};else n.on("load",function(){setTimeout(function(){t.callee.apply(r,t)},0)})}function rt(n,t){if(!n||!n.inPopup){n&&n.ld["filesview.filesview"].on("afterRenderFiles",v);var i=nt(t).getWindow().$;typeof i.jQuery!="undefined"&&i.jQuery.fn.colorbox?r=w:typeof i.jQuery!="undefined"&&i.jQuery.fn.fancybox?r=b:typeof i.jQuery!="undefined"&&i.jQuery.fn.prettyPhoto?r=k:typeof i.Shadowbox!="undefined"?r=d:typeof i.Prototype!="undefined"&&typeof i.Lightbox!="undefined"&&(r=g);r&&(p=1)}}var w=1,b=2,k=3,d=4,g=5,r=0,p=0,o=[],h,u,s;CKFinder.addPlugin("gallery",{bM:["filesview"],appReady:function(){r=0;p=0;o=[];h=null;u=null},galleryCallback:function(n,i,f){var ht,ot,st;p||rt(null,n);var c=nt(n),ut=c.getWindow().$,ft=function(n){return n.isImage()};if(!r&&n.config.gallery_autoLoad){if(!ft(i))return!1;var yt=c.getHead(),ct=CKFinder.getPluginPath("gallery")+"colorbox/",pt=arguments,et,lt=typeof ut.jQuery=="undefined";if(!lt){var at=ut.jQuery.fn.jquery.split("."),vt=parseInt(at[0],10),wt=parseInt(at[1],10),bt=parseInt(at[2]||0,10);(vt<1||vt==1&&wt<4||vt==1&&wt==4&&bt<3)&&(lt=!0)}return lt?(ut.jQuery&&(o=[ut.jQuery,ut.$]),et=new e("script",c),et.setAttribute("type","text/javascript"),et.setAttribute("src",ct+"jquery.min.js"),it(et,pt,ut),et.appendTo(yt),!0):(c.appendStyleSheet(ct+"colorbox.css"),et=new e("script",c),et.setAttribute("type","text/javascript"),et.setAttribute("src",ct+"jquery.colorbox-min.js"),it(et,pt,ut),et.appendTo(yt),!0)}if(o.length&&(h=ut.jQuery.noConflict(!0),ut.jQuery=o[0],ut.$=o[1],o=[]),h||(h=ut.jQuery),r){ht=t.getRandomString(20);st="ckf_gallery_"+ht;switch(r){case w:if(!ft(i))return!1;ot=l(f,i,st,ft,c);h("#"+s+" a").colorbox(t.extend({minWidth:"300",minHeight:"200",maxWidth:"95%",maxHeight:"95%",scalePhotos:!0,current:n.lang.Gallery.current},n.config.gallery_config,{rel:st,group:st,onClosed:y(i),onOpen:a(c)},!0)).eq(ot).click();break;case b:if(ft=function(n){return n.isImage()||n.ext=="swf"},!ft(i))return!1;ot=l(f,i,st,ft,c);ut.jQuery("#"+s+" a").fancybox(t.extend({},n.config.gallery_config,{onClosed:v,onComplete:a(c),afterClose:y(i),afterShow:a(c)},!0)).eq(ot).click();break;case k:if(ft=function(n){return n.isImage()||n.ext=="swf"||n.ext=="mov"},!ft(i))return!1;ot=l(f,i,"prettyPhoto[ckf_gallery_"+ht+"]",ft,c);ut.jQuery("#"+s+" a").prettyPhoto(t.extend({},n.config.gallery_config,{callback:y(i),changepicturecallback:a(c)},!0)).eq(ot).click();break;case d:if(ft=function(n){return n.isImage()||n.ext=="swf"||n.ext=="mov"},!ft(i))return!1;ot=l(f,i,st,ft,c);ut.Shadowbox.qi("#"+s+" a",t.extend({},n.config.gallery_config,{gallery:st,onClose:y(i),onFinish:a(c)},!0));tt(u.eG("a").getItem(ot).$);break;case g:if(!ft(i))return!1;ot=l(f,i,"lightbox[ckf_gallery_"+ht+"]",ft,c);tt(u.eG("a").getItem(ot).$);break;default:return!1}return!0}return!1},bz:rt})}();h.gallery_autoLoad=!0,function(){function u(n){var i,t;for(n=n.toLowerCase(),i=document.cookie.split(";"),t=0;t<i.length;t++){var r=i[t].split("="),u=decodeURIComponent(r[0].trim().toLowerCase()),f=r.length>1?r[1]:"";if(u===n)return decodeURIComponent(f)}return""}function f(n,t){document.cookie=encodeURIComponent(n)+"="+encodeURIComponent(t)+";path=/"}function e(n){return t.getRandomString(n)}var i="ckCsrfToken",r=40;typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){for(var n=this.replace(/^\s+/,""),t=n.length-1;t>=0;t--)if(/\S/.test(n.charAt(t))){n=n.substring(0,t+1);break}return n});n.getCsrfToken=function(){var n=u(i);return n.length!=r&&(n=e(r),f(i,n)),n};o.add("csrftokenmanager")}(),function(){function s(t){var u,f,i,s,o,r;if(!t||t.type!=n.cv||t.getName()!="form")return[];for(u=[],f=["style","className"],i=0;i<f.length;i++)s=f[i],o=t.$.elements.namedItem(s),o&&(r=new e(o),u.push([r,r.nextSibling]),r.remove());return u}function h(t,i){var r,u,f;if(t&&t.type==n.cv&&t.getName()=="form"&&i.length>0)for(r=i.length-1;r>=0;r--)u=i[r][0],f=i[r][1],f?u.insertBefore(f):u.appendTo(t)}function l(n,t){var u=s(n),r={},i=n.$;return t||(r["class"]=i.className||"",i.className=""),r.inline=i.style.cssText||"",t||(i.style.cssText="position: static; overflow: visible"),h(u),r}function a(n,t){var r=s(n),i=n.$;"class"in t&&(i.className=t["class"]);"inline"in t&&(i.style.cssText=t.inline);h(r)}var r=null,u=null;o.add("maximize",{bz:function(o){function k(n){var t=v.eR(),i,r;if(!n&&h&&(n=[h]),n){for(i=0,r=n.length;i<r;i++)n[i].setStyles({width:t.width+"px",height:t.height+"px"});o.oW("resize")}else o.resize(t.width,t.height)}var w=o.lang.Maximize,d=n.oC,v=d.getWindow(),h,s=[0,0,0,0],p={},y,b;h=n.document.getWindow().$;try{h=h.frameElement}catch(g){h=null}h=h&&new e(h);h&&!h.getFrameDocument().bH().hasClass("CKFinderFrameWindow")&&(h=null);o.bD("maximize",{oD:!1,exec:function(){var d=o.document.getWindow().$,nt,it,tt,rt,st,ut,ft,lt,ht,g,ct,et,ot;if(o.cg.inPopup&&(!f&&!i.opera||d.top.location.href.match(/ckfinder.html/)||d.top.name=="CKFinderpopup"))d=o.document.getWindow().$.parent,this.bu==n.aS?(s[2]=d.screenLeft||d.screenX,s[3]=d.screenTop||d.screenY,d.moveTo(0,0),u||(u=[d.screenLeft||d.screenX,d.screenTop||d.screenY]),s[2]-=u[0],s[3]-=u[1],d.outerHeight?(s[0]=d.outerWidth,s[1]=d.outerHeight):(s[0]=d.document.body.scrollWidth,s[1]=d.document.body.scrollHeight,r||(d.resizeTo(d.screen.availWidth,d.screen.availHeight),r=[d.screen.availWidth-d.document.body.scrollWidth,d.screen.availHeight-d.document.body.scrollHeight]),s[0]+=r[0],s[1]+=r[1]),d.resizeTo?d.resizeTo(d.screen.availWidth,d.screen.availHeight):(d.outerHeight=d.screen.availHeight,d.outerWidth=d.screen.availWidth)):(d.resizeTo?d.resizeTo(s[0],s[1]):(d.outerWidth=s[0],d.outerHeight=s[1]),d.moveTo(s[2],s[3]));else if(nt=h||o.container,this.bu==n.aS){for(y=v.hV(),g=nt;g=g.getParent();)it=t.getNextNumber(),p[it]=l(g),g.$.og=it,g.is("html","body")&&g.setStyle("overflow","hidden"),g.setStyle("z-index",o.config.baseFloatZIndex-1);for(it=t.getNextNumber(),p[it]=l(nt,!0),nt.$.og=it,tt=[nt],d=nt.getDocument().getWindow().$;d.frameElement;)tt.push(e.eB(d.frameElement)),d=d.parent;b=function(){k(tt)};v.on("resize",b);for(rt=new c(d.document),st={overflow:i.webkit?"":"hidden",width:0,height:0},rt.gT().setStyles(st),i.gecko||rt.gT().setStyle("position","fixed"),rt.bH().setStyles(st),f?setTimeout(function(){v.$.scrollTo(0,0)},0):v.$.scrollTo(0,0),ft=0,lt=tt.length;ft<lt;ft++)ut=tt[ft],ut.setStyle("position","absolute"),ut.$.offsetLeft,ut.setStyles({"z-index":o.config.baseFloatZIndex-1,left:"0px",top:"0px"});tt[0].addClass("cke_maximized");k(tt);ht=tt[0].ir();tt[0].setStyles({left:-1*ht.x+"px",top:-1*ht.y+"px"})}else{for(v.removeListener("resize",b),g=nt;g;)a(g,p[g.$.og]),g.$.og=null,g=g.getParent();p={};f?setTimeout(function(){v.$.scrollTo(y.x,y.y)},0):v.$.scrollTo(y.x,y.y);nt.removeClass("cke_maximized");i.webkit&&(nt.setStyle("display","inline"),setTimeout(function(){nt.setStyle("display","block")},0));o.oW("resize")}this.rJ();ct=this.pW[0];ct&&(et=this.bu==n.aS?w.maximize:w.minimize,ot=o.document.getById(ct._.id),ot.getChild(1).setHtml(et),ot.setAttribute("title",et),ot.setAttribute("href",'javascript:void("'+et+'");'))}});o.bY.qW("Maximize",{label:w.maximize,command:"maximize"})}})}(),function(){function t(n,t){for(var i=0,r=t.length;i<r;i++)if(t[i].name&&t[i].name===n)return!0;return!1}var n={};CKFinder.addPlugin("zip",{uiReady:function(i){var r=i.lang.Zip;CKFinder.dialog.add("compressToFileName",function(n){var t=n.getSelectedFolder();return{title:n.lang.DestinationFile,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:n.lang.FileRename},{type:"hbox",widths:["90%","10%"],padding:0,children:[{type:"text",label:"",id:"fileName","default":t.name,validate:function(){if(!this.getValue())return n.openMsgDialog("",n.lang.ErrorMsg.FileEmpty),!1}},{type:"html",html:".zip",id:"fileNameExt",onLoad:function(){this.getElement().getParent().setStyles({"vertical-align":"bottom","padding-bottom":"2px"})}}]}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});CKFinder.dialog.add("unzipDirExists",function(t){var i=t.getSelectedFolder(),u=[[t.lang.ManuallyRename,"manuallyrename"]];return i.acl.fileDelete&&i.acl.fileRename&&i.acl.folderRename&&i.acl.folderDelete&&u.push([r.removeAndExtract,"overwrite"],[r.extractAndOverwrite,"merge"]),{title:t.lang.ErrorMsg.FolderNameExists,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{label:t.lang.common.makeDecision,type:"radio",id:"option","default":"manuallyrename",items:u}]}]}],onOk:function(){var r=this,i=r.getValueOf("tab1","option");return i=="manuallyrename"&&(i=null),n.extractTo(t.getSelectedFile(),i),!0},onCancel:function(){return n.ma(i),!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});CKFinder.dialog.add("unzipFileExists",function(t){var i=t.getSelectedFolder();return{title:t.lang.FileExistsDlgTitle,minWidth:350,minHeight:120,contents:[{id:"tab1",label:"",title:"",style:CKFinder.env.ie7Compat?"height:auto":"",expand:!0,padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",widths:["70%","30%"],html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{type:"radio",id:"option",label:t.lang.common.makeDecision,"default":"autorename",items:[[t.lang.FileAutorename,"autorename"],[t.lang.FileOverwrite,"overwrite"],[t.lang.common.skip,"skip"]]}]},{type:"hbox",className:"cke_dialog_remember_decision",children:[{type:"checkbox",id:"remember",label:t.lang.common.rememberDecision}]}]}],onCancel:function(){return n.ma(i),!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});CKFinder.dialog.add("compressFileExists",function(t){var i=t.getSelectedFolder(),r=[[t.lang.ManuallyRename,"manuallyrename"]];return i.acl.fileDelete&&i.acl.fileRename&&r.push([t.lang.FileAutorename,"autorename"],[t.lang.FileOverwrite,"overwrite"]),{title:t.lang.FileExistsDlgTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{label:t.lang.common.makeDecision,type:"radio",id:"option","default":"manuallyrename",items:r}]}]}],onOk:function(){var r=this,i=r.getValueOf("tab1","option");return i=="manuallyrename"&&(i=null),n.nX(t.getSelectedFolder(),n.pp.download,i),!0},onCancel:function(){return n.ma(i),!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});i.connector.app.dZ("zip",112);n={rQ:{iz:/[\\\/:\*\?"<>\|]/},iG:{extractHere:{label:r.extractHereLabel,command:"ExtractHere",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},extractTo:{label:r.extractToLabel,command:"ExtractTo",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},downloadZip:{label:r.downloadZipLabel,command:"DownloadZip",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},compressZip:{label:r.compressZipLabel,command:"CompressZip",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"}},ma:function(n){n.getChildren(function(){n.close();n.showFiles();n.open()},!0)},oc:function(t){return!t||!t.length?i.lang.ErrorMsg.FolderEmpty:n.rQ.iz.test(t)?i.lang.ErrorMsg.FolderInvChar:!1},nI:function(r){var f,u;if(!n.filesList[n.currentItem]){n.extractHere(i.getSelectedFile(),!0);return}if(f=[{name:"skip"},{name:"ok"}],n.filesList[n.currentItem].options&&t(n.filesList[n.currentItem].options,f)){n.currentItem++;i.openDialog("unzipFileExists",n.nI);return}r.show();u=i.lang.ErrorMsg[n.filesList[n.currentItem].type=="Folder"?"FolderExists":"FileExists"];u="<strong>"+u.replace("%s",n.filesList[n.currentItem].name)+"<\/strong>";r.getContentElement("tab1","msg").getElement().setHtml(u);r.on("ok",function(t){var e,f,u,o;if(t.removeListener(),e=r.getValueOf("tab1","remember"),f=r.getValueOf("tab1","option"),e){for(u=0,o=n.filesList.length;u<o;u++)n.filesList[u].options||(n.filesList[u].options=f);n.extractHere(i.getSelectedFile(),!0);return}for(n.filesList[n.currentItem].options=f,n.currentItem++;n.currentItem<n.filesList.length;){if(!n.filesList[n.currentItem].options||n.filesList[n.currentItem].options&&n.filesList[n.currentItem].options!="skip")break;n.currentItem++}if(n.currentItem<n.filesList.length){setTimeout(function(){i.openDialog("unzipFileExists",n.nI)},0);return}n.extractHere(i.getSelectedFile(),!0);return})},extract:function(t){var u={},f=t.file;t.extra&&(u=t.extra);u.fileName=t.file.name;i.connector.sendCommandPost(t.action,null,u,function(t){var o,h,c,f,s,u,l;if(n.filesList=[],t.getErrorNumber()==303){n.currentItem=0;var e=t.selectNodes("Connector/Errors/Error"),f=t.selectNodes("Connector/UnzippedFiles/File"),v=0,a;for(u=0,h=e.length;u<h;u++)a="skip",e[u].getAttribute("code")==115&&(v=1,a=null),n.filesList[u]={name:e[u].getAttribute("name"),options:a,type:e[u].getAttribute("type"),code:e[u].getAttribute("code")};for(o=0,h=f.length;o<h;o++,u++)n.filesList[u]={name:f[o].getAttribute("name"),options:f[o].getAttribute("action"),type:"File",code:0};if(v){i.openDialog("unzipFileExists",n.nI);return}}else if(t.checkError())return;if(c=t.selectNodes("Connector/FolderExists/Folder"),c&&c.length){i.openDialog("unzipDirExists",function(n){n.show();var t=i.lang.FolderNameExists;t="<strong>"+t.replace("%s",c[0].getAttribute("name"))+"<\/strong>";n.getContentElement("tab1","msg").getElement().setHtml(t)});return}if(f=t.selectNodes("Connector/UnzippedFiles/File"),f&&f.length){for(s=[],u=0,l=f.length;u<l;u++)f[u].getAttribute("action")=="skip"&&s.push(f[u].getAttribute("name"));if(n.filesList)for(u=0,l=n.filesList.length;u<l;u++)s.push(n.filesList[u].name);if(s.length)return i.openSkippedFilesDialog(null,s,r.extractSuccess),n.ma(i.getSelectedFolder()),!0}return i.openMsgDialog("OK",r.extractSuccess),n.ma(i.getSelectedFolder()),!0},f.folder.type,f.folder)},extractHere:function(t,u){var o,s,f,e;if(u){for(o=!1,f=0,e=n.filesList.length;f<e;f++)if(n.filesList[f].code==115&&n.filesList[f].options!="skip"){for(o=!0,u={},f=0,e=n.filesList.length;f<e;f++)u["files["+f+"][name]"]=n.filesList[f].name,u["files["+f+"][options]"]=n.filesList[f].options;break}if(!o){for(s=[],f=0,e=n.filesList.length;f<e;f++)s.push(n.filesList[f].name);i.openSkippedFilesDialog(null,s,r.extractSuccess,function(){return n.ma(i.getSelectedFolder()),!0});return}}u=u||{};n.extract({action:"ExtractHere",file:t,extra:u})},extractTo:function(r,u){if(u){n.extract({action:"ExtractTo",file:r,extra:{extractDir:n.extractDir||"/",force:u}});return}i.openInputDialog(i.lang.DestinationFolder,i.lang.FolderRename,"",function(f){var e=i.getSelectedFolder(),f=CKFinder.tools.trim(f),o=n.oc(f);if(o)return i.openConfirmDialog("",o,function(){n.extractTo(r,u)}),!1;n.extractDir=f;e.hasChildren?e.getChildren(function(u){if(t(f,u)){i.openDialog("unzipDirExists",function(n){n.show();var t=i.lang.ErrorMsg.FolderExists;t="<strong>"+t.replace("%s",f)+"<\/strong>";n.getContentElement("tab1","msg").getElement().setHtml(t)});return}n.extract({action:"ExtractTo",file:r,extra:{extractDir:f}})},!0):(e.createNewFolder(f),n.extract({action:"ExtractTo",file:r,extra:{extractDir:f}}))})},downloadZip:function(n,t,r){var u=i.connector.composeUrl("DownloadZip",{FileName:n,ZipName:t},r.type,r);i.connector.app.ld["filesview.filesview"].tools.downloadFile(new CKFinder.dom.document(i.document),u)},oH:function(t,r){i.connector.sendCommandPost("CreateZip",null,r,function(i){var u;if(!i.checkError()){if(r.download&&(u=i.selectSingleNode("Connector/ZipFile"),u))return u=u.getAttribute("name"),n.downloadZip(u,r.zipName,t);n.ma(t)}},t.type,t)},nX:function(r,u,f,e){var s={zipName:r.name+".zip",download:u},o,h;if(e)for(o=0,h=e.length;o<h;o++)s["files["+o+"][name]"]=e[o].name,s["files["+o+"][type]"]=e[o].folder.type,s["files["+o+"][folder]"]=e[o].folder.getPath();if(f)return s=n.pp,s.fileExistsAction=f,n.oH(r,s);if(r.isBasket||u){if(r.isBasket&&typeof e=="undefined")for(s.zipName="basket.zip",o=0,h=i.basketFiles.length;o<h;o++)s["files["+o+"][name]"]=i.basketFiles[o].name,s["files["+o+"][type]"]=i.basketFiles[o].folder.type,s["files["+o+"][folder]"]=i.basketFiles[o].folder.getPath();return r.isBasket&&(r=i.folders[1],s.basket=!0),n.oH(r,s)}i.openDialog("compressToFileName",function(f){f.show();f.getContentElement("tab1","fileName").getElement().setValue(r.name);f.on("ok",function(e){var o,h;if(e.removeListener(),o=f.getValueOf("tab1","fileName"),o=CKFinder.tools.trim(o)+".zip",h=n.oc(o),h)return i.openConfirmDialog("",h,function(){n.nX(r,u)}),!1;s.zipName=o;r.getFiles(function(u){if(t(o,u))return n.pp=s,i.openDialog("compressFileExists",function(n){n.show();var t=i.lang.ErrorMsg.FileExists;t="<strong>"+t.replace("%s",o)+"<\/strong>";n.getContentElement("tab1","msg").getElement().setHtml(t)}),!1;n.oH(r,s)},!0)})})}};i.addFileContextMenuOption(n.iG.extractHere,function(t,i){n.extractHere(i)},function(n){var r=i.getSelectedFolder(),t;return r.isBasket?!1:(t=i.getSelectedFiles(),n.ext.toLowerCase()!=="zip"||i.config.selectMultiple&&t.length>1)?!1:n.folder.acl.fileUpload&&n.folder.acl.folderCreate?!0:-1});i.addFileContextMenuOption(n.iG.extractTo,function(t,i){n.extractTo(i)},function(n){var r=i.getSelectedFolder(),t;return r.isBasket?!1:(t=i.getSelectedFiles(),n.ext.toLowerCase()!=="zip"||i.config.selectMultiple&&t.length>1)?!1:n.folder.acl.fileUpload&&n.folder.acl.folderCreate?!0:-1});i.addFileContextMenuOption(n.iG.compressZip,function(t){var i=t.getSelectedFiles(),r=t.getSelectedFolder();n.nX(r,!1,!1,i)},function(n){var t=i.getSelectedFolder(),r;return t.isBasket?!1:(r=i.getSelectedFiles(),!i.config.selectMultiple||r.length<2)?!1:n.folder.acl.fileUpload&&n.folder.acl.folderCreate&&t.getResourceType().isExtensionAllowed("zip")?!0:-1});i.addFileContextMenuOption(n.iG.downloadZip,function(t){var i=t.getSelectedFiles(),r=t.getSelectedFolder();n.nX(r,!0,!1,i)},function(n){var t=i.getSelectedFiles();return!i.config.selectMultiple||t.length<2?!1:n.folder.acl.fileUpload?!0:-1});i.addFolderContextMenuOption(n.iG.compressZip,function(t,i){n.nX(i,!1)},function(n){return n.isBasket?!1:n.acl.fileUpload&&n.getResourceType().isExtensionAllowed("zip")&&(i.files.length||n.hasChildren)?!0:-1});i.addFolderContextMenuOption(n.iG.downloadZip,function(t,i){n.nX(i,!0)},function(n){return n.isBasket?n.app.basketFiles.length?!0:-1:n.acl.fileUpload&&(i.files.length||n.hasChildren)?!0:-1});i.connector.app.ld["filesview.filesview"].on("beforeContextMenu",function(n){i.getSelectedFiles().length>1&&delete n.data.bj.downloadFile})},basketToolbar:[["DownloadZip",{label:"downloadZipLabel",icon:CKFinder.getPluginPath("zip")+"images/zip.gif",onClick:function(t){var i=t.getSelectedFolder();i.app.basketFiles.length&&n.nX(i,!0)},disableEmpty:!0}]]})}();n.skins.add("kama",function(){var r=["images/loaders/16x16.gif","images/loaders/32x32.gif","images/ckffolder.gif","images/ckffolderopened.gif"];return f&&i.version<7&&r.push("images/sprites_ie6.png"),{ls:r,application:{css:["app.css"]},host:{qx:1,css:["host.css"]},mA:7,kN:7,ps:1,bz:function(r){function h(n){var t=n.getHead().append("style");return t.setAttribute("id","cke_ui_color"),t.setAttribute("type","text/css"),t}function o(n,t,r){for(var u,e,o,s=0;s<n.length;s++)if(i.webkit){for(e=0;e<n[s].$.sheet.rules.length;e++)n[s].$.sheet.removeRule(e);for(e=0;e<t.length;e++){for(o=t[e][1],u=0;u<r.length;u++)o=o.replace(r[u][0],r[u][1]);n[s].$.sheet.addRule(t[e][0],o)}}else{for(o=t,u=0;u<r.length;u++)o=o.replace(r[u][0],r[u][1]);f?n[s].$.styleSheet.cssText=o:n[s].setHtml(o)}}var s,u,e,c;if(r.config.width&&!isNaN(r.config.width)&&(r.config.width-=12),s=[],u="/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{\tbackground-color: $color !important;}",i.webkit)for(u=u.split("}").slice(0,-1),e=0;e<u.length;e++)u[e]=u[e].split("{");c=/\$color/g;t.extend(r,{uiColor:null,rk:function(){return this.uiColor},setUiColor:function(t){var a,v,y=h(n.oC),p=h(this.document),f=".cke_"+r.name.replace(".","\\."),e=[f+" .cke_wrapper",f+"_dialog .cke_dialog_contents",f+"_dialog a.cke_dialog_tab",f+"_dialog .cke_dialog_footer"].join(","),l="background-color: $color !important;";return i.webkit?(a=[[e,l]],v=[["body,"+e,l]]):(a=e+"{"+l+"}",v="body,"+e+"{"+l+"}"),(this.setUiColor=function(n){var t=[[c,n]];r.uiColor=n;o([y],a,t);o([p],v,t);o(s,u,t)})(t)}});r.on("menuShow",function(n){var e=n.data[0],f=e.element.eG("iframe").getItem(0).getFrameDocument(),t,i;f.getById("cke_ui_color")||(t=h(f),s.push(t),i=r.rk(),i&&o([t],u,[[c,i]]))});if(r.config.uiColor)r.on("uiReady",function(){r.setUiColor(r.config.uiColor)})}}}()),function(){function t(){n.dialog.on("resize",function(n){var t=n.data,r=t.width,u=t.height,i=t.dialog,f=i.bO.contents;t.skin=="kama"&&(f.setStyles({width:r+"px",height:u+"px"}),setTimeout(function(){var t=i.bO.dialog.getChild([0,0,0]),r=t.getChild(0),n=t.getChild(2);n.setStyle("width",r.$.offsetWidth+"px");n=t.getChild(7);n.setStyle("width",r.$.offsetWidth-28+"px");n=t.getChild(4);n.setStyle("height",r.$.offsetHeight-45+"px");n=t.getChild(5);n.setStyle("height",r.$.offsetHeight-45+"px")},100))})}n.dialog?t():n.on("dialogPluginReady",t)}();n.skins.add("v1",function(){var n=["images/loaders/16x16.gif","images/loaders/32x32.gif","images/ckffolder.gif","images/ckffolderopened.gif"];return f&&i.version<7&&n.push("images/sprites_ie6.png"),{ls:n,application:{css:["app.css"]},ps:1,rv:-8,kN:0,host:{qx:1,css:["host.css"]}}}()),function(){function t(){n.dialog.on("resize",function(n){var t=n.data,r=t.width,u=t.height,i=t.dialog,f=i.bO.contents;t.skin=="v1"&&(f.setStyles({width:r+"px",height:u+"px"}),setTimeout(function(){var t=i.bO.dialog.getChild([0,0,0]),r=t.getChild(0),n=t.getChild(2);n.setStyle("width",r.$.offsetWidth+"px");n=t.getChild(7);n.setStyle("width",r.$.offsetWidth-28+"px");n=t.getChild(4);n.setStyle("height",r.$.offsetHeight-45+"px");n=t.getChild(5);n.setStyle("height",r.$.offsetHeight-45+"px")},100))})}n.dialog?t():n.on("dialogPluginReady",t)}(),function(){function t(n,t,i){var u=n.querySelectorAll(t),r;if(u)for(r=0;r<u.length;++r)i.call(u[r])}function i(){n.dialog.on("resize",function(n){var i=n.data,u=i.width,f=i.height,r=i.dialog,e=r.bO.contents;i.skin=="bootstrap"&&(e.setStyles({width:u+"px",height:f+"px"}),setTimeout(function(){var i=r.bO.dialog.getChild([0,0,0]),u=i.getChild(0),n=i.getChild(2),f;n.setStyle("width",u.$.offsetWidth+"px");n=i.getChild(7);n.setStyle("width",u.$.offsetWidth-28+"px");n=i.getChild(4);n.setStyle("height",u.$.offsetHeight-45+"px");n=i.getChild(5);n.setStyle("height",u.$.offsetHeight-45+"px");f=r._.element.$;t(f,'input[type="text"]',function(){this.classList.add("form-control")});t(f,"a.cke_dialog_ui_button",function(){var n=this.classList;n.add("btn");n.contains("cke_dialog_ui_button_ok")?n.add("btn-success"):n.contains("cke_dialog_ui_button_cancel")?n.add("btn-danger"):n.add("btn-default")})},100))})}n.skins.add("bootstrap",function(){return{application:{css:["app.css"]},host:{qx:1,css:["host.css"]},heightAdjust:50,bz:function(n){n.config.jh="png";n.on("appReady",function(){var t=n.document.$,r=t.dir==="rtl",i;r||t.querySelector("#toolbar_view .cke_toolbar").classList.add("col-md-10");t.querySelector(".cke_search_box").classList.add("col-md-2",r?"pull-left":"pull-right");i=t.querySelector(".cke_search_box input");i.classList.add("form-control");i.setAttribute("placeholder",n.lang.Search.searchPlaceholder+"...")})}}}());n.dialog?i():n.on("dialogPluginReady",i)}();n.gc.add("default",function(){return{dQ:function(r){function u(){i.ie6Compat&&(r.layout.oG=r.document.getWindow().eR())}var w=r.name,o=r.element,s=r.ff;if(o&&s!=n.kZ){r.layout=new n.application.layout(r);var h=r.oW("themeSpace",{space:"head",html:""}),c=r.oW("themeSpace",{space:"sidebar",html:""}),l=r.oW("themeSpace",{space:"mainTop",html:""}),a=r.oW("themeSpace",{space:"mainMiddle",html:""}),v=r.oW("themeSpace",{space:"mainBottom",html:""}),e=r.config.skin.indexOf(","),y=(e==-1?r.config.skin:r.config.skin.substr(0,e))||"kama",p='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html lang="'+r.lang.LangCode+'" dir="'+r.lang.dir+'"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />'+h.html+"<\/head><body>"+(i.ie6Compat?'<div id="ckfinder" role="application">':'<div id="ckfinder" role="application" style="visibility: hidden">')+'<!-- 1. CKE Skin class. --><div class="fake_wrapper cke_skin_'+y+'"><!-- 2. High contrast class. --><div class="fake_wrapper"><!-- Applicable: hc cke_hc --><!-- 3. Browser class. --><div class="fake_wrapper '+i.cssClass+'"><!-- 4. RTL class. --><div class="fake_wrapper cke_'+(r.lang.dir=="ltr"||f&&i.version<8?"ltr":"rtl")+'"><!-- Applicable: rtl cke_rtl --><!-- 5. Layout class. --><div class="fake_wrapper"><div id="ckfinder_view" class="columns_2"><!-- Applicable: columns_1 columns_2 --><div id="sidebar_container" class="container" role="region"'+(r.config.sidebarWidth?' style="width: '+t.cssLength(r.config.sidebarWidth)+'"':"")+'><div id="sidebar_wrapper" class="wrapper">'+c.html+'<\/div><\/div><div id="main_container" class="container" role="region">'+l.html+a.html+v.html+"<\/div><\/div><\/div><\/div><\/div><\/div><\/div><\/div><\/body><\/html>";n.log("[THEME] DOM flush using document.write");r.document.$.write(p);r.cr("themeLoaded");r.cr("uiReady",function(){u();r.cr("appReady",function(){function s(){n=n||r.document.getHead().eG("link").getItem(0);var t=0;if(n)try{n.$.sheet&&n.$.sheet.cssRules.length>0?t=1:n.$.styleSheet&&n.$.styleSheet.cssText.length>0?t=1:n.$.innerHTML&&n.$.innerHTML.length>0&&(t=1)}catch(f){}if(!t){window.setTimeout(s,250);return}return i.ie6Compat?(u(),r.layout.ea(),setTimeout(function(){r.layout.ea()},500)):(r.layout.ea(!0),setTimeout(function(){r.document.getById("ckfinder").removeStyle("visibility")})),undefined}var t,f,o,e,n;if(u(),i.ie8&&(t=r.document.$,t.documentMode?f=t.documentMode:(f=5,t.compatMode&&t.compatMode=="CSS1Compat"&&(f=7)),f<8&&(o='<strong style="color: red;">Forced IE compatibility mode! CKFinder may not look as intended.<\/strong>',e=r.plugins.tools,e.showTool(e.addTool(o)))),i.ie6Compat)r.document.getWindow().on("resize",u);r.document.getWindow().on("resize",function(){r.layout.ea.call(r.layout)});s()})})}},pu:function(r){var c=t.getNextNumber(),o=e.kE(['<div class="cke_compatibility cke_'+r.name.replace(".","\\.")+"_dialog cke_skin_",r.gd,'" dir="',r.lang.dir,'" lang="',r.langCode,'"><table class="cke_dialog'," "+i.cssClass.replace(/browser/g,"cke_browser")," cke_",r.lang.dir,'" style="position:absolute"><tr><td><div class="%body"><div id="%title#" class="%title"><\/div><div id="%close_button#" class="%close_button"><span>X<\/span><\/div><div id="%tabs#" class="%tabs"><\/div><table class="%contents"><tr><td id="%contents#" class="%contents"><\/td><\/tr><\/table><div id="%footer#" class="%footer"><\/div><\/div><div id="%tl#" class="%tl"><\/div><div id="%tc#" class="%tc"><\/div><div id="%tr#" class="%tr"><\/div><div id="%ml#" class="%ml"><\/div><div id="%mr#" class="%mr"><\/div><div id="%bl#" class="%bl"><\/div><div id="%bc#" class="%bc"><\/div><div id="%br#" class="%br"><\/div><\/td><\/tr><\/table>',f?"":"<style>.cke_dialog{visibility:hidden;}<\/style>","<\/div>"].join("").replace(/#/g,"_"+c).replace(/%/g,"cke_dialog_"),n.document),u=o.getChild([0,0,0,0,0]),s=u.getChild(0),h=u.getChild(1);return s.unselectable(),h.unselectable(),{element:o,bO:{dialog:o.getChild(0),title:s,close:h,tabs:u.getChild(2),contents:u.getChild([3,0,0,0]),footer:u.getChild(4)}}},destroy:function(t){var u=t.container,r=t.ia,i;for(u&&u.remove(),i=0;r&&i<r.length;i++)r[i].remove();t.element&&(t.ff==n.fc&&t.element.remove(),delete t.element)}}}());n.application.prototype.vU=function(t){var i=""+t;return this._[i]||(this._[i]=n.document.getById(i+"_"+this.name))};n.application.prototype.nJ=function(n){var t;/^\d+$/.test(n)&&(n+="px");t=this.layout.dV();t.setStyle("width",n);this.oW("resize");this.layout.ea()};n.application.prototype.resize=function(n,t){this.element.getChild(0).setStyle("height",t+"px");this.element.getChild(0).setStyle("width",n+"px")},function(){function c(n,t,r){for(var u,o,a,s,v,h,c=0,l=0,e=0;e<n.$.parentNode.childNodes.length;e++)if(u=n.$.parentNode.childNodes[e],u.nodeType==1){if(o=u==n.$,!u.offsetHeight&&!o)continue;l++;o||(c+=u.offsetHeight)}a=n.$.offsetHeight-n.$.clientHeight;s=(l-1)*t;!i.ie6Compat||i.ie8||i.ie7Compat||(s+=t*2);v=f?n.$.parentNode.parentNode.parentNode.offsetHeight:n.$.parentNode.offsetHeight;h=v-a-c-(s||0);r&&(h+=r);try{n.setStyle("height",h+"px")}catch(y){}}function l(t){return n.bs.substr(t*9%32,1)}var e="\x3c\144\151\x76\x20\x63\154\141\x73\163\075\047\166\x69\x65\167\x20\164\x6f\x6f\x6c\137\x70\141\x6e\x65\154\x27\x20\163\164\x79\154\x65\x3d\x27\x70\141\144\144\151\156\x67\072\x32\x70\170\x3b\x64\x69\x73\x70\154\x61\x79\x3a\x62\x6c\x6f\143\x6b\040\041\151\x6d\160\x6f\162\164\141\156\164\073\x70\x6f\163\x69\164\151\x6f\x6e\072\x73\164\141\x74\x69\143\x20\x21\x69\x6d\x70\x6f\162\x74\141\156\164\073\x63\x6f\x6c\x6f\162\x3a\x62\x6c\x61\143\x6b\040\041\151\x6d\160\157\162\164\x61\156\164\073\x62\x61\x63\x6b\x67\162\x6f\x75\156\x64\x2d\143\157\154\157\x72\072\x77\150\x69\164\145\040\041\x69\155\x70\x6f\162\x74\x61\156\164\073\047\x3e",r="\074\057\144\151\166\x3e",o="\124\x68\x69\x73\040\x69\163\x20\164\x68\145\x20\x44\105\x4d\x4f\040\166\x65\162\163\151\x6f\156\040\x6f\x66\x20\x43\x4b\106\151\156\144\145\162\x2e\040\x50\154\x65\141\x73\x65\040\x76\x69\x73\151\x74\x20\164\150\x65\x20\x3c\x61\040\x68\162\x65\x66\075\047\x68\164\164\x70\072\x2f\x2f\x63\153\163\x6f\165\x72\143\145\x2e\143\157\155\057\143\153\x66\x69\156\144\145\162\047\040\x74\141\162\147\x65\x74\x3d\047\x5f\x62\x6c\141\156\x6b\x27\076\x43\113\x46\x69\156\x64\x65\162\040\167\145\x62\x20\163\x69\x74\x65\074\x2f\141\076\x20\x74\x6f\040\x6f\142\164\141\x69\x6e\040\x61\x20\x76\141\x6c\x69\x64\040\154\151\143\x65\x6e\x73\x65\x2e",s="\103\x4b\106\x69\x6e\x64\x65\x72\040\104\145\x76\145\x6c\x6f\x70\x65\x72\040\114\x69\x63\145\156\x73\145\074\142\x72\057\x3e\x4c\x69\x63\145\x6e\163\145\x64\040\164\x6f\072\x20",u=e+o+r,h=e+s+r;n.application.layout=function(n){this.app=u.length?n:null;this.jB=null};n.application.layout.prototype={ea:function(e){this.jB||(this.jB=t.setTimeout(function(){var p,w,v,b;n.log("[THEME] Repainting layout");var y=n.bs.indexOf(n.bF.substr(1,1))%5,k=[n.bF.substr(8,1),n.bF.substr(6,1)],d=n.bF&&n.bF.substr(3,1)!=n.bs.substr((n.bs.indexOf(n.bF.substr(0,1))+n.bs.indexOf(n.bF.substr(2,1)))*9%(n.bs.length-1),1),tt=!!n.ed&&k[1]!=l(n.ed.length+n.bs.indexOf(k[0]));if(n.bF&&1==y&&n.lS(window.top[n.nd+"\143\x61\x74\x69\x6f\x6e"][n.jG+"\x73\164"])!=n.lS(n.ed)||y==4||d){for(p=this.dV().getChild(0).getChildren(),w=0,v=0;v<p.count();v++)p.getItem(v).rd("\160\157\163\151\164\x69\x6f\x6e")=="\x73\164\x61\164\151\x63"&&(w=1);w||(this.app.gd=="bootstrap"&&(b="\x3c\144\151\x76\x20\143\154\x61\163\163\075\x27\166\151\x65\x77\040\x74\x6f\157\154\x5f\x70\141\x6e\145\154\047\x20\163\164\171\x6c\x65\x3d\047\x64\151\163\x70\x6c\141\171\x3a\142\x6c\x6f\x63\153\x20\041\x69\x6d\x70\157\162\164\141\x6e\164\073\x70\x6f\x73\151\164\151\157\x6e\x3a\163\x74\141\164\151\x63\x20\041\x69\155\160\157\x72\x74\141\156\164\073\143\x6f\x6c\157\162\x3a\x23\x33\x31\x37\x30\070\x66\040\x21\x69\155\160\157\162\164\x61\156\x74\x3b\x62\x61\x63\153\x67\162\x6f\165\x6e\144\x2d\x63\x6f\154\x6f\x72\072\043\x64\x39\145\144\x66\x37\x20\041\151\155\x70\157\162\164\x61\156\x74\073\x66\x6f\x6e\164\055\x73\151\172\x65\x3a\040\x31\x33\x70\x78\073\040\x70\x61\144\144\x69\156\x67\072\040\x35\160\170\x3b\040\155\x61\x72\147\x69\x6e\072\x35\x70\x78\073\x62\x6f\162\144\x65\162\x2d\x72\141\x64\x69\x75\163\x3a\x34\x70\170\x3b\x27\x3e",u=b+o+r,h=b+s+r),this.dV().getChild(0).appendHtml(d||tt||y!=4?u:h+"\074\x62\x3e"+t.htmlEncode(n.ed)+"\x3c\057\142\076\074\057\x64\151\x76\x3e"))}var g=this.pn(),nt=this.pS(),a=n.skins.loaded[this.app.gd];if(a.ps&&f&&i.ie6Compat&&!i.ie8){var it=this.mB(),rt=this.dV(),ut=3*a.kN,ft=a.rv?a.rv:0,et=this.oG.width-rt.$.offsetWidth-ut+ft;it.setStyle("width",et+"px")}g&&c(g,a.mA,a.heightAdjust);nt&&c(nt,a.kN);this.jB=null;e=!1;this.app.oW("afterRepaintLayout");i.ie6Compat&&t.setTimeout(function(){this.app.element.$.style.cssText+=""},0,this)},e===!0?0:500,this))},dV:function(){var n=this;return n.kS||(n.kS=n.app.document.getById("sidebar_container")),n.kS},mB:function(){var n=this;return n.lb||(n.lb=n.app.document.getById("main_container")),n.lb},pS:function(){var n=this;return typeof n.kK=="undefined"&&(n.kK=n.app.document.getById("folders_view")),n.kK},pn:function(){var n=this;return typeof n.kD=="undefined"&&(n.kD=n.app.document.getById("files_view")),n.kD}}}()})();